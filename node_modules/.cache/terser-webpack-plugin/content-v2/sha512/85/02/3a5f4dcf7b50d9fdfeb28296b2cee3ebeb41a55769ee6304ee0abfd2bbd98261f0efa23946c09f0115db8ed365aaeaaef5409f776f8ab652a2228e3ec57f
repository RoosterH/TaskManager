{"code":"!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=10)}([function(e,t,r){\"use strict\";(function(e){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\nvar n=r(3),i=r(7),o=r(8);function s(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(s()<t)throw new RangeError(\"Invalid typed array length\");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=a.prototype:(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,r){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,r);if(\"number\"==typeof e){if(\"string\"==typeof t)throw new Error(\"If encoding is specified then the first argument must be a string\");return l(this,e)}return f(this,e,t,r)}function f(e,t,r,n){if(\"number\"==typeof t)throw new TypeError('\"value\" argument must not be a number');return\"undefined\"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError(\"'offset' is out of bounds\");if(t.byteLength<r+(n||0))throw new RangeError(\"'length' is out of bounds\");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);a.TYPED_ARRAY_SUPPORT?(e=t).__proto__=a.prototype:e=h(e,t);return e}(e,t,r,n):\"string\"==typeof t?function(e,t,r){\"string\"==typeof r&&\"\"!==r||(r=\"utf8\");if(!a.isEncoding(r))throw new TypeError('\"encoding\" must be a valid string encoding');var n=0|d(t,r),i=(e=u(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(a.isBuffer(t)){var r=0|p(t.length);return 0===(e=u(e,r)).length||t.copy(e,0,0,r),e}if(t){if(\"undefined\"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||\"length\"in t)return\"number\"!=typeof t.length||(n=t.length)!=n?u(e,0):h(e,t);if(\"Buffer\"===t.type&&o(t.data))return h(e,t.data)}var n;throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")}(e,t)}function c(e){if(\"number\"!=typeof e)throw new TypeError('\"size\" argument must be a number');if(e<0)throw new RangeError('\"size\" argument must not be negative')}function l(e,t){if(c(t),e=u(e,t<0?0:0|p(t)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|p(t.length);e=u(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=s())throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+s().toString(16)+\" bytes\");return 0|e}function d(e,t){if(a.isBuffer(e))return e.length;if(\"undefined\"!=typeof ArrayBuffer&&\"function\"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;\"string\"!=typeof e&&(e=\"\"+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case\"ascii\":case\"latin1\":case\"binary\":return r;case\"utf8\":case\"utf-8\":case void 0:return j(e).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*r;case\"hex\":return r>>>1;case\"base64\":return F(e).length;default:if(n)return j(e).length;t=(\"\"+t).toLowerCase(),n=!0}}function _(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return\"\";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return\"\";if((r>>>=0)<=(t>>>=0))return\"\";for(e||(e=\"utf8\");;)switch(e){case\"hex\":return I(this,t,r);case\"utf8\":case\"utf-8\":return S(this,t,r);case\"ascii\":return T(this,t,r);case\"latin1\":case\"binary\":return B(this,t,r);case\"base64\":return O(this,t,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return R(this,t,r);default:if(n)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,i){if(0===e.length)return-1;if(\"string\"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if(\"string\"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if(\"number\"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&\"function\"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError(\"val must be string, number or Buffer\")}function b(e,t,r,n,i){var o,s=1,u=e.length,a=t.length;if(void 0!==n&&(\"ucs2\"===(n=String(n).toLowerCase())||\"ucs-2\"===n||\"utf16le\"===n||\"utf-16le\"===n)){if(e.length<2||t.length<2)return-1;s=2,u/=2,a/=2,r/=2}function f(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(o=r;o<u;o++)if(f(e,o)===f(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===a)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+a>u&&(r=u-a),o=r;o>=0;o--){for(var l=!0,h=0;h<a;h++)if(f(e,o+h)!==f(t,h)){l=!1;break}if(l)return o}return-1}function v(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError(\"Invalid hex string\");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var u=parseInt(t.substr(2*s,2),16);if(isNaN(u))return s;e[r+s]=u}return s}function m(e,t,r,n){return z(j(t,e.length-r),e,r,n)}function E(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function A(e,t,r,n){return E(e,t,r,n)}function w(e,t,r,n){return z(F(t),e,r,n)}function N(e,t,r,n){return z(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function O(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,u,a,f=e[i],c=null,l=f>239?4:f>223?3:f>191?2:1;if(i+l<=r)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(o=e[i+1]))&&(a=(31&f)<<6|63&o)>127&&(c=a);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(a=(15&f)<<12|(63&o)<<6|63&s)>2047&&(a<55296||a>57343)&&(c=a);break;case 4:o=e[i+1],s=e[i+2],u=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&(a=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&u)>65535&&a<1114112&&(c=a)}null===c?(c=65533,l=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=l}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r=\"\",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=a,t.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&\"function\"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,r){return f(null,e,t,r)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,\"undefined\"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,r){return function(e,t,r,n){return c(t),t<=0?u(e,t):void 0!==r?\"string\"==typeof n?u(e,t).fill(r,n):u(e,t).fill(r):u(e,t)}(null,e,t,r)},a.allocUnsafe=function(e){return l(null,e)},a.allocUnsafeSlow=function(e){return l(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError(\"Arguments must be Buffers\");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},a.concat=function(e,t){if(!o(e))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!a.isBuffer(s))throw new TypeError('\"list\" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},a.byteLength=d,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?\"\":0===arguments.length?S(this,0,e):_.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e=\"\",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString(\"hex\",0,r).match(/.{2}/g).join(\" \"),this.length>r&&(e+=\" ... \")),\"<Buffer \"+e+\">\"},a.prototype.compare=function(e,t,r,n,i){if(!a.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError(\"out of range index\");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),u=Math.min(o,s),f=this.slice(n,i),c=e.slice(t,r),l=0;l<u;++l)if(f[l]!==c[l]){o=f[l],s=c[l];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n=\"utf8\",r=this.length,t=0;else if(void 0===r&&\"string\"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");t|=0,isFinite(r)?(r|=0,void 0===n&&(n=\"utf8\")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");n||(n=\"utf8\");for(var o=!1;;)switch(n){case\"hex\":return v(this,e,t,r);case\"utf8\":case\"utf-8\":return m(this,e,t,r);case\"ascii\":return E(this,e,t,r);case\"latin1\":case\"binary\":return A(this,e,t,r);case\"base64\":return w(this,e,t,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return N(this,e,t,r);default:if(o)throw new TypeError(\"Unknown encoding: \"+n);n=(\"\"+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};function T(e,t,r){var n=\"\";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function B(e,t,r){var n=\"\";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i=\"\",o=t;o<r;++o)i+=L(e[o]);return i}function R(e,t,r){for(var n=e.slice(t,r),i=\"\",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError(\"offset is not uint\");if(e+t>r)throw new RangeError(\"Trying to access beyond buffer length\")}function P(e,t,r,n,i,o){if(!a.isBuffer(e))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('\"value\" argument is out of bounds');if(r+n>e.length)throw new RangeError(\"Index out of range\")}function U(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function C(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function $(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError(\"Index out of range\");if(r<0)throw new RangeError(\"Index out of range\")}function x(e,t,r,n,o){return o||$(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,o){return o||$(e,0,r,8),i.write(e,t,r,n,52,8),r+8}a.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),a.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=a.prototype;else{var i=t-e;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},a.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},a.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):C(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var o=0,s=1,u=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var o=r-1,s=1,u=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):C(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError(\"targetStart out of bounds\");if(r<0||r>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(n<0)throw new RangeError(\"sourceEnd out of bounds\");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},a.prototype.fill=function(e,t,r,n){if(\"string\"==typeof e){if(\"string\"==typeof t?(n=t,t=0,r=this.length):\"string\"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&\"string\"!=typeof n)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof n&&!a.isEncoding(n))throw new TypeError(\"Unknown encoding: \"+n)}else\"number\"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError(\"Out of range index\");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),\"number\"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:j(new a(e,n).toString()),u=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%u]}return this};var k=/[^+\\/0-9A-Za-z-_]/g;function L(e){return e<16?\"0\"+e.toString(16):e.toString(16)}function j(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error(\"Invalid code point\");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function F(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\\s+|\\s+$/g,\"\")}(e).replace(k,\"\")).length<2)return\"\";for(;e.length%4!=0;)e+=\"=\";return e}(e))}function z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(4))},function(module,__webpack_exports__,__webpack_require__){\"use strict\";(function(global,Buffer){__webpack_require__.d(__webpack_exports__,\"a\",(function(){return bson_54}));var long__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),long__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(long__WEBPACK_IMPORTED_MODULE_0__),buffer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),buffer__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(buffer__WEBPACK_IMPORTED_MODULE_1__),commonjsGlobal=\"undefined\"!=typeof window?window:void 0!==global?global:\"undefined\"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var map=createCommonjsModule((function(e){if(void 0!==commonjsGlobal.Map)e.exports=commonjsGlobal.Map,e.exports.Map=commonjsGlobal.Map;else{var t=function(e){this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(null!=e[t]){var r=e[t],n=r[0],i=r[1];this._keys.push(n),this._values[n]={v:i,i:this._keys.length-1}}};t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(e){var t=this._values[e];return null!=t&&(delete this._values[e],this._keys.splice(t.i,1),!0)},t.prototype.entries=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?[r,e._values[r].v]:void 0,done:void 0===r}}}},t.prototype.forEach=function(e,t){t=t||this;for(var r=0;r<this._keys.length;r++){var n=this._keys[r];e.call(t,this._values[n].v,n,t)}},t.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},t.prototype.has=function(e){return null!=this._values[e]},t.prototype.keys=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?r:void 0,done:void 0===r}}}},t.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},t.prototype.values=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?e._values[r].v:void 0,done:void 0===r}}}},Object.defineProperty(t.prototype,\"size\",{enumerable:!0,get:function(){return this._keys.length}}),e.exports=t}})),map_1=map.Map;long__WEBPACK_IMPORTED_MODULE_0___default.a.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},long__WEBPACK_IMPORTED_MODULE_0___default.a.fromExtendedJSON=function(e,t){var r=long__WEBPACK_IMPORTED_MODULE_0___default.a.fromString(e.$numberLong);return t&&t.relaxed?r.toNumber():r},Object.defineProperty(long__WEBPACK_IMPORTED_MODULE_0___default.a.prototype,\"_bsontype\",{value:\"Long\"});var long_1=long__WEBPACK_IMPORTED_MODULE_0___default.a;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var Double=function(){function e(t){_classCallCheck(this,e),this.value=t}return _createClass(e,[{key:\"valueOf\",value:function(){return this.value}},{key:\"toJSON\",value:function(){return this.value}},{key:\"toExtendedJSON\",value:function(e){return e&&e.relaxed&&isFinite(this.value)?this.value:{$numberDouble:this.value.toString()}}}],[{key:\"fromExtendedJSON\",value:function(t,r){return r&&r.relaxed?parseFloat(t.$numberDouble):new e(parseFloat(t.$numberDouble))}}]),e}();Object.defineProperty(Double.prototype,\"_bsontype\",{value:\"Double\"});var double_1=Double;function _typeof(e){return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$1(e,t,r){return t&&_defineProperties$1(e.prototype,t),r&&_defineProperties$1(e,r),e}function _possibleConstructorReturn(e,t){return!t||\"object\"!==_typeof(t)&&\"function\"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Timestamp=function(e){function t(e,r){var n;return _classCallCheck$1(this,t),n=long_1.isLong(e)?_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e.low,e.high)):_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r)),_possibleConstructorReturn(n)}return _inherits(t,e),_createClass$1(t,[{key:\"toJSON\",value:function(){return{$timestamp:this.toString()}}},{key:\"toExtendedJSON\",value:function(){return{$timestamp:{t:this.high,i:this.low}}}}],[{key:\"fromInt\",value:function(e){return new t(long_1.fromInt(e))}},{key:\"fromNumber\",value:function(e){return new t(long_1.fromNumber(e))}},{key:\"fromBits\",value:function(e,r){return new t(e,r)}},{key:\"fromString\",value:function(e,r){return new t(long_1.fromString(e,r))}},{key:\"fromExtendedJSON\",value:function(e){return new t(e.$timestamp.i,e.$timestamp.t)}}]),t}(long_1);Object.defineProperty(Timestamp.prototype,\"_bsontype\",{value:\"Timestamp\"});var timestamp=Timestamp,require$$0={};function normalizedFunctionString(e){return e.toString().replace(\"function(\",\"function (\")}function insecureRandomBytes(e){for(var t=new Uint8Array(e),r=0;r<e;++r)t[r]=Math.floor(256*Math.random());return t}var randomBytes=insecureRandomBytes;if(\"undefined\"!=typeof window&&window.crypto&&window.crypto.getRandomValues)randomBytes=function(e){return window.crypto.getRandomValues(new Uint8Array(e))};else{try{randomBytes=require$$0.randomBytes}catch(e){}null==randomBytes&&(randomBytes=insecureRandomBytes)}var utils={normalizedFunctionString:normalizedFunctionString,randomBytes:randomBytes};function defaultSetTimout(){throw new Error(\"setTimeout has not been defined\")}function defaultClearTimeout(){throw new Error(\"clearTimeout has not been defined\")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}\"function\"==typeof global.setTimeout&&(cachedSetTimeout=setTimeout),\"function\"==typeof global.clearTimeout&&(cachedClearTimeout=clearTimeout);var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title=\"browser\",platform=\"browser\",browser=!0,env={},argv=[],version=\"\",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding(e){throw new Error(\"process.binding is not supported\")}function cwd(){return\"/\"}function chdir(e){throw new Error(\"process.chdir is not supported\")}function umask(){return 0}var performance=global.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function hrtime(e){var t=.001*performanceNow.call(performance),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]}var startTime=new Date;function uptime(){return(new Date-startTime)/1e3}var process={nextTick:nextTick,title:title,browser:browser,env:env,argv:argv,version:version,versions:versions,on:on,addListener:addListener,once:once,off:off,removeListener:removeListener,removeAllListeners:removeAllListeners,emit:emit,binding:binding,cwd:cwd,chdir:chdir,umask:umask,hrtime:hrtime,platform:platform,release:release,config:config,uptime:uptime},inherits;inherits=\"function\"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e};var inherits$1=inherits;function _typeof$1(e){return(_typeof$1=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var formatRegExp=/%[sdj%]/g;function format(e){if(!isString(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(inspect(arguments[r]));return t.join(\" \")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(formatRegExp,(function(e){if(\"%%\"===e)return\"%\";if(r>=i)return e;switch(e){case\"%s\":return String(n[r++]);case\"%d\":return Number(n[r++]);case\"%j\":try{return JSON.stringify(n[r++])}catch(e){return\"[Circular]\"}default:return e}})),s=n[r];r<i;s=n[++r])isNull(s)||!isObject(s)?o+=\" \"+s:o+=\" \"+inspect(s);return o}function deprecate(e,t){if(isUndefined(global.process))return function(){return deprecate(e,t).apply(this,arguments)};var r=!1;return function(){return r||(console.error(t),r=!0),e.apply(this,arguments)}}var debugs={},debugEnviron;function debuglog(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||\"\"),e=e.toUpperCase(),!debugs[e])if(new RegExp(\"\\\\b\"+e+\"\\\\b\",\"i\").test(debugEnviron)){debugs[e]=function(){var t=format.apply(null,arguments);console.error(\"%s %d: %s\",e,0,t)}}else debugs[e]=function(){};return debugs[e]}function inspect(e,t){var r={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),isBoolean(t)?r.showHidden=t:t&&_extend(r,t),isUndefined(r.showHidden)&&(r.showHidden=!1),isUndefined(r.depth)&&(r.depth=2),isUndefined(r.colors)&&(r.colors=!1),isUndefined(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=stylizeWithColor),formatValue(r,e,r.depth)}function stylizeWithColor(e,t){var r=inspect.styles[t];return r?\"\u001b[\"+inspect.colors[r][0]+\"m\"+e+\"\u001b[\"+inspect.colors[r][1]+\"m\":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}function formatValue(e,t,r){if(e.customInspect&&t&&isFunction(t.inspect)&&t.inspect!==inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return isString(n)||(n=formatValue(e,n,r)),n}var i=formatPrimitive(e,t);if(i)return i;var o=Object.keys(t),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),isError(t)&&(o.indexOf(\"message\")>=0||o.indexOf(\"description\")>=0))return formatError(t);if(0===o.length){if(isFunction(t)){var u=t.name?\": \"+t.name:\"\";return e.stylize(\"[Function\"+u+\"]\",\"special\")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),\"regexp\");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),\"date\");if(isError(t))return formatError(t)}var a,f=\"\",c=!1,l=[\"{\",\"}\"];(isArray(t)&&(c=!0,l=[\"[\",\"]\"]),isFunction(t))&&(f=\" [Function\"+(t.name?\": \"+t.name:\"\")+\"]\");return isRegExp(t)&&(f=\" \"+RegExp.prototype.toString.call(t)),isDate(t)&&(f=\" \"+Date.prototype.toUTCString.call(t)),isError(t)&&(f=\" \"+formatError(t)),0!==o.length||c&&0!=t.length?r<0?isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),\"regexp\"):e.stylize(\"[Object]\",\"special\"):(e.seen.push(t),a=c?formatArray(e,t,r,s,o):o.map((function(n){return formatProperty(e,t,r,s,n,c)})),e.seen.pop(),reduceToSingleString(a,f,l)):l[0]+f+l[1]}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize(\"undefined\",\"undefined\");if(isString(t)){var r=\"'\"+JSON.stringify(t).replace(/^\"|\"$/g,\"\").replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"')+\"'\";return e.stylize(r,\"string\")}return isNumber(t)?e.stylize(\"\"+t,\"number\"):isBoolean(t)?e.stylize(\"\"+t,\"boolean\"):isNull(t)?e.stylize(\"null\",\"null\"):void 0}function formatError(e){return\"[\"+Error.prototype.toString.call(e)+\"]\"}function formatArray(e,t,r,n,i){for(var o=[],s=0,u=t.length;s<u;++s)hasOwnProperty(t,String(s))?o.push(formatProperty(e,t,r,n,String(s),!0)):o.push(\"\");return i.forEach((function(i){i.match(/^\\d+$/)||o.push(formatProperty(e,t,r,n,i,!0))})),o}function formatProperty(e,t,r,n,i,o){var s,u,a;if((a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=a.set?e.stylize(\"[Getter/Setter]\",\"special\"):e.stylize(\"[Getter]\",\"special\"):a.set&&(u=e.stylize(\"[Setter]\",\"special\")),hasOwnProperty(n,i)||(s=\"[\"+i+\"]\"),u||(e.seen.indexOf(a.value)<0?(u=isNull(r)?formatValue(e,a.value,null):formatValue(e,a.value,r-1)).indexOf(\"\\n\")>-1&&(u=o?u.split(\"\\n\").map((function(e){return\"  \"+e})).join(\"\\n\").substr(2):\"\\n\"+u.split(\"\\n\").map((function(e){return\"   \"+e})).join(\"\\n\")):u=e.stylize(\"[Circular]\",\"special\")),isUndefined(s)){if(o&&i.match(/^\\d+$/))return u;(s=JSON.stringify(\"\"+i)).match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,\"name\")):(s=s.replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"').replace(/(^\"|\"$)/g,\"'\"),s=e.stylize(s,\"string\"))}return s+\": \"+u}function reduceToSingleString(e,t,r){return e.reduce((function(e,t){return t.indexOf(\"\\n\"),e+t.replace(/\\u001b\\[\\d\\d?m/g,\"\").length+1}),0)>60?r[0]+(\"\"===t?\"\":t+\"\\n \")+\" \"+e.join(\",\\n  \")+\" \"+r[1]:r[0]+t+\" \"+e.join(\", \")+\" \"+r[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return\"boolean\"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return\"number\"==typeof e}function isString(e){return\"string\"==typeof e}function isSymbol(e){return\"symbol\"===_typeof$1(e)}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&\"[object RegExp]\"===objectToString(e)}function isObject(e){return\"object\"===_typeof$1(e)&&null!==e}function isDate(e){return isObject(e)&&\"[object Date]\"===objectToString(e)}function isError(e){return isObject(e)&&(\"[object Error]\"===objectToString(e)||e instanceof Error)}function isFunction(e){return\"function\"==typeof e}function isPrimitive(e){return null===e||\"boolean\"==typeof e||\"number\"==typeof e||\"string\"==typeof e||\"symbol\"===_typeof$1(e)||void 0===e}function isBuffer(e){return Buffer.isBuffer(e)}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?\"0\"+e.toString(10):e.toString(10)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:\"cyan\",number:\"yellow\",boolean:\"yellow\",undefined:\"grey\",null:\"bold\",string:\"green\",date:\"magenta\",regexp:\"red\"};var months=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];function timestamp$1(){var e=new Date,t=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(\":\");return[e.getDate(),months[e.getMonth()],t].join(\" \")}function log(){console.log(\"%s - %s\",timestamp$1(),format.apply(null,arguments))}function _extend(e,t){if(!t||!isObject(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var util={inherits:inherits$1,_extend:_extend,log:log,isBuffer:isBuffer,isPrimitive:isPrimitive,isFunction:isFunction,isError:isError,isDate:isDate,isObject:isObject,isRegExp:isRegExp,isUndefined:isUndefined,isSymbol:isSymbol,isString:isString,isNumber:isNumber,isNullOrUndefined:isNullOrUndefined,isNull:isNull,isBoolean:isBoolean,isArray:isArray,inspect:inspect,deprecate:deprecate,format:format,debuglog:debuglog};function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$2(e,t,r){return t&&_defineProperties$2(e.prototype,t),r&&_defineProperties$2(e,r),e}var Buffer$1=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,randomBytes$1=utils.randomBytes,deprecate$1=util.deprecate,PROCESS_UNIQUE=randomBytes$1(5),checkForHexRegExp=new RegExp(\"^[0-9a-fA-F]{24}$\"),hasBufferType=!1;try{Buffer$1&&Buffer$1.from&&(hasBufferType=!0)}catch(e){hasBufferType=!1}for(var hexTable=[],_i=0;_i<256;_i++)hexTable[_i]=(_i<=15?\"0\":\"\")+_i.toString(16);for(var decodeLookup=[],i=0;i<10;)decodeLookup[48+i]=i++;for(;i<16;)decodeLookup[55+i]=decodeLookup[87+i]=i++;var _Buffer=Buffer$1;function convertToHex(e){return e.toString(\"hex\")}function makeObjectIdError(e,t){var r=e[t];return new TypeError('ObjectId string \"'.concat(e,'\" contains invalid character \"').concat(r,'\" with character code (').concat(e.charCodeAt(t),\"). All character codes for a non-hex string must be less than 256.\"))}var ObjectId=function(){function e(t){if(_classCallCheck$2(this,e),t instanceof e)return t;if(null==t||\"number\"==typeof t)return this.id=e.generate(t),void(e.cacheHexString&&(this.__id=this.toString(\"hex\")));var r=e.isValid(t);if(!r&&null!=t)throw new TypeError(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\");if(r&&\"string\"==typeof t&&24===t.length&&hasBufferType)return new e(Buffer$1.from(t,\"hex\"));if(r&&\"string\"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return e.createFromHexString(t.toHexString());throw new TypeError(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\")}this.id=t,e.cacheHexString&&(this.__id=this.toString(\"hex\"))}return _createClass$2(e,[{key:\"toHexString\",value:function(){if(e.cacheHexString&&this.__id)return this.__id;var t=\"\";if(!this.id||!this.id.length)throw new TypeError(\"invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is [\"+JSON.stringify(this.id)+\"]\");if(this.id instanceof _Buffer)return t=convertToHex(this.id),e.cacheHexString&&(this.__id=t),t;for(var r=0;r<this.id.length;r++){var n=hexTable[this.id.charCodeAt(r)];if(\"string\"!=typeof n)throw makeObjectIdError(this.id,r);t+=n}return e.cacheHexString&&(this.__id=t),t}},{key:\"toString\",value:function(e){return this.id&&this.id.copy?this.id.toString(\"string\"==typeof e?e:\"hex\"):this.toHexString()}},{key:\"toJSON\",value:function(){return this.toHexString()}},{key:\"equals\",value:function(t){return t instanceof e?this.toString()===t.toString():\"string\"==typeof t&&e.isValid(t)&&12===t.length&&this.id instanceof _Buffer?t===this.id.toString(\"binary\"):\"string\"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():\"string\"==typeof t&&e.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof e||t.toHexString))&&t.toHexString()===this.toHexString()}},{key:\"getTimestamp\",value:function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e}},{key:\"toExtendedJSON\",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString(\"hex\")}}}],[{key:\"getInc\",value:function(){return e.index=(e.index+1)%16777215}},{key:\"generate\",value:function(t){\"number\"!=typeof t&&(t=~~(Date.now()/1e3));var r=e.getInc(),n=Buffer$1.alloc(12);return n[3]=255&t,n[2]=t>>8&255,n[1]=t>>16&255,n[0]=t>>24&255,n[4]=PROCESS_UNIQUE[0],n[5]=PROCESS_UNIQUE[1],n[6]=PROCESS_UNIQUE[2],n[7]=PROCESS_UNIQUE[3],n[8]=PROCESS_UNIQUE[4],n[11]=255&r,n[10]=r>>8&255,n[9]=r>>16&255,n}},{key:\"createPk\",value:function(){return new e}},{key:\"createFromTime\",value:function(t){var r=Buffer$1.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,new e(r)}},{key:\"createFromHexString\",value:function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\");if(hasBufferType)return new e(Buffer$1.from(t,\"hex\"));for(var r=new _Buffer(12),n=0,i=0;i<24;)r[n++]=decodeLookup[t.charCodeAt(i++)]<<4|decodeLookup[t.charCodeAt(i++)];return new e(r)}},{key:\"isValid\",value:function(t){return null!=t&&(\"number\"==typeof t||(\"string\"==typeof t?12===t.length||24===t.length&&checkForHexRegExp.test(t):t instanceof e||(t instanceof _Buffer&&12===t.length||!!t.toHexString&&(12===t.id.length||24===t.id.length&&checkForHexRegExp.test(t.id)))))}},{key:\"fromExtendedJSON\",value:function(t){return new e(t.$oid)}}]),e}();ObjectId.get_inc=deprecate$1((function(){return ObjectId.getInc()}),\"Please use the static `ObjectId.getInc()` instead\"),ObjectId.prototype.get_inc=deprecate$1((function(){return ObjectId.getInc()}),\"Please use the static `ObjectId.getInc()` instead\"),ObjectId.prototype.getInc=deprecate$1((function(){return ObjectId.getInc()}),\"Please use the static `ObjectId.getInc()` instead\"),ObjectId.prototype.generate=deprecate$1((function(e){return ObjectId.generate(e)}),\"Please use the static `ObjectId.generate(time)` instead\"),Object.defineProperty(ObjectId.prototype,\"generationTime\",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),ObjectId.prototype[util.inspect.custom||\"inspect\"]=ObjectId.prototype.toString,ObjectId.index=~~(16777215*Math.random()),Object.defineProperty(ObjectId.prototype,\"_bsontype\",{value:\"ObjectID\"});var objectid=ObjectId;function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$3(e,t,r){return t&&_defineProperties$3(e.prototype,t),r&&_defineProperties$3(e,r),e}function alphabetize(e){return e.split(\"\").sort().join(\"\")}var BSONRegExp=function(){function e(t,r){_classCallCheck$3(this,e),this.pattern=t||\"\",this.options=r?alphabetize(r):\"\";for(var n=0;n<this.options.length;n++)if(\"i\"!==this.options[n]&&\"m\"!==this.options[n]&&\"x\"!==this.options[n]&&\"l\"!==this.options[n]&&\"s\"!==this.options[n]&&\"u\"!==this.options[n])throw new Error(\"The regular expression option [\".concat(this.options[n],\"] is not supported\"))}return _createClass$3(e,[{key:\"toExtendedJSON\",value:function(){return{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:\"fromExtendedJSON\",value:function(t){return new e(t.$regularExpression.pattern,t.$regularExpression.options.split(\"\").sort().join(\"\"))}}]),e}();Object.defineProperty(BSONRegExp.prototype,\"_bsontype\",{value:\"BSONRegExp\"});var regexp=BSONRegExp;function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$4(e,t,r){return t&&_defineProperties$4(e.prototype,t),r&&_defineProperties$4(e,r),e}var BSONSymbol=function(){function e(t){_classCallCheck$4(this,e),this.value=t}return _createClass$4(e,[{key:\"valueOf\",value:function(){return this.value}},{key:\"toString\",value:function(){return this.value}},{key:\"inspect\",value:function(){return this.value}},{key:\"toJSON\",value:function(){return this.value}},{key:\"toExtendedJSON\",value:function(){return{$symbol:this.value}}}],[{key:\"fromExtendedJSON\",value:function(t){return new e(t.$symbol)}}]),e}();Object.defineProperty(BSONSymbol.prototype,\"_bsontype\",{value:\"Symbol\"});var symbol=BSONSymbol;function _classCallCheck$5(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$5(e,t,r){return t&&_defineProperties$5(e.prototype,t),r&&_defineProperties$5(e,r),e}var Int32=function(){function e(t){_classCallCheck$5(this,e),this.value=t}return _createClass$5(e,[{key:\"valueOf\",value:function(){return this.value}},{key:\"toJSON\",value:function(){return this.value}},{key:\"toExtendedJSON\",value:function(e){return e&&e.relaxed?this.value:{$numberInt:this.value.toString()}}}],[{key:\"fromExtendedJSON\",value:function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)}}]),e}();Object.defineProperty(Int32.prototype,\"_bsontype\",{value:\"Int32\"});var int_32=Int32;function _classCallCheck$6(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$6(e,t,r){return t&&_defineProperties$6(e.prototype,t),r&&_defineProperties$6(e,r),e}var Code=function(){function e(t,r){_classCallCheck$6(this,e),this.code=t,this.scope=r}return _createClass$6(e,[{key:\"toJSON\",value:function(){return{scope:this.scope,code:this.code}}},{key:\"toExtendedJSON\",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:\"fromExtendedJSON\",value:function(t){return new e(t.$code,t.$scope)}}]),e}();Object.defineProperty(Code.prototype,\"_bsontype\",{value:\"Code\"});var code=Code,Buffer$2=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,PARSE_STRING_REGEXP=/^(\\+|-)?(\\d+|(\\d*\\.\\d*))?(E|e)?([-+])?(\\d+)?$/,PARSE_INF_REGEXP=/^(\\+|-)?(Infinity|inf)$/i,PARSE_NAN_REGEXP=/^(\\+|-)?NaN$/i,EXPONENT_MAX=6111,EXPONENT_MIN=-6176,EXPONENT_BIAS=6176,MAX_DIGITS=34,NAN_BUFFER=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_NEGATIVE_BUFFER=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_POSITIVE_BUFFER=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),EXPONENT_REGEX=/^([-+])?(\\d+)?$/;function isDigit(e){return!isNaN(parseInt(e,10))}function divideu128(e){var t=long_1.fromNumber(1e9),r=long_1.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new long_1(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function multiply64x2(e,t){if(!e&&!t)return{high:long_1.fromNumber(0),low:long_1.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new long_1(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new long_1(t.getLowBits(),0),s=r.multiply(i),u=r.multiply(o),a=n.multiply(i),f=n.multiply(o);return s=s.add(u.shiftRightUnsigned(32)),u=new long_1(u.getLowBits(),0).add(a).add(f.shiftRightUnsigned(32)),{high:s=s.add(u.shiftRightUnsigned(32)),low:f=u.shiftLeft(32).add(new long_1(f.getLowBits(),0))}}function lessThan(e,t){var r=e.high>>>0,n=t.high>>>0;return r<n||r===n&&e.low>>>0<t.low>>>0}function invalidErr(e,t){throw new TypeError('\"'.concat(e,'\" is not a valid Decimal128 string - ').concat(t))}function Decimal128(e){this.bytes=e}Decimal128.fromString=function(e){var t,r=!1,n=!1,i=!1,o=0,s=0,u=0,a=0,f=0,c=[0],l=0,h=0,p=0,d=0,_=0,y=0,g=[0,0],b=[0,0],v=0;if(e.length>=7e3)throw new TypeError(e+\" not a valid Decimal128 string\");var m=e.match(PARSE_STRING_REGEXP),E=e.match(PARSE_INF_REGEXP),A=e.match(PARSE_NAN_REGEXP);if(!m&&!E&&!A||0===e.length)throw new TypeError(e+\" not a valid Decimal128 string\");if(m){var w=m[2],N=m[4],O=m[5],S=m[6];N&&void 0===S&&invalidErr(e,\"missing exponent power\"),N&&void 0===w&&invalidErr(e,\"missing exponent base\"),void 0===N&&(O||S)&&invalidErr(e,\"missing e before exponent\")}if(\"+\"!==e[v]&&\"-\"!==e[v]||(r=\"-\"===e[v++]),!isDigit(e[v])&&\".\"!==e[v]){if(\"i\"===e[v]||\"I\"===e[v])return new Decimal128(Buffer$2.from(r?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));if(\"N\"===e[v])return new Decimal128(Buffer$2.from(NAN_BUFFER))}for(;isDigit(e[v])||\".\"===e[v];)\".\"!==e[v]?(l<34&&(\"0\"!==e[v]||i)&&(i||(f=s),i=!0,c[h++]=parseInt(e[v],10),l+=1),i&&(u+=1),n&&(a+=1),s+=1,v+=1):(n&&invalidErr(e,\"contains multiple periods\"),n=!0,v+=1);if(n&&!s)throw new TypeError(e+\" not a valid Decimal128 string\");if(\"e\"===e[v]||\"E\"===e[v]){var T=e.substr(++v).match(EXPONENT_REGEX);if(!T||!T[2])return new Decimal128(Buffer$2.from(NAN_BUFFER));_=parseInt(T[0],10),v+=T[0].length}if(e[v])return new Decimal128(Buffer$2.from(NAN_BUFFER));if(p=0,l){if(d=l-1,1!==(o=u))for(;\"0\"===e[f+o-1];)o-=1}else p=0,d=0,c[0]=0,u=1,l=1,o=0;for(_<=a&&a-_>16384?_=EXPONENT_MIN:_-=a;_>EXPONENT_MAX;){if((d+=1)-p>MAX_DIGITS){if(c.join(\"\").match(/^0+$/)){_=EXPONENT_MAX;break}invalidErr(e,\"overflow\")}_-=1}for(;_<EXPONENT_MIN||l<u;){if(0===d&&o<l){_=EXPONENT_MIN,o=0;break}if(l<u?u-=1:d-=1,_<EXPONENT_MAX)_+=1;else{if(c.join(\"\").match(/^0+$/)){_=EXPONENT_MAX;break}invalidErr(e,\"overflow\")}}if(d-p+1<o){var B=s;n&&(f+=1,B+=1),r&&(f+=1,B+=1);var I=parseInt(e[f+d+1],10),R=0;if(I>=5&&(R=1,5===I))for(R=c[d]%2==1,y=f+d+2;y<B;y++)if(parseInt(e[y],10)){R=1;break}if(R)for(var D=d;D>=0;D--)if(++c[D]>9&&(c[D]=0,0===D)){if(!(_<EXPONENT_MAX))return new Decimal128(Buffer$2.from(r?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));_+=1,c[D]=1}}if(g=long_1.fromNumber(0),b=long_1.fromNumber(0),0===o)g=long_1.fromNumber(0),b=long_1.fromNumber(0);else if(d-p<17){var P=p;for(b=long_1.fromNumber(c[P++]),g=new long_1(0,0);P<=d;P++)b=(b=b.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[P]))}else{var U=p;for(g=long_1.fromNumber(c[U++]);U<=d-17;U++)g=(g=g.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[U]));for(b=long_1.fromNumber(c[U++]);U<=d;U++)b=(b=b.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[U]))}var C=multiply64x2(g,long_1.fromString(\"100000000000000000\"));C.low=C.low.add(b),lessThan(C.low,b)&&(C.high=C.high.add(long_1.fromNumber(1))),t=_+EXPONENT_BIAS;var $={low:long_1.fromNumber(0),high:long_1.fromNumber(0)};C.high.shiftRightUnsigned(49).and(long_1.fromNumber(1)).equals(long_1.fromNumber(1))?($.high=$.high.or(long_1.fromNumber(3).shiftLeft(61)),$.high=$.high.or(long_1.fromNumber(t).and(long_1.fromNumber(16383).shiftLeft(47))),$.high=$.high.or(C.high.and(long_1.fromNumber(0x7fffffffffff)))):($.high=$.high.or(long_1.fromNumber(16383&t).shiftLeft(49)),$.high=$.high.or(C.high.and(long_1.fromNumber(562949953421311)))),$.low=C.low,r&&($.high=$.high.or(long_1.fromString(\"9223372036854775808\")));var x=Buffer$2.alloc(16);return v=0,x[v++]=255&$.low.low,x[v++]=$.low.low>>8&255,x[v++]=$.low.low>>16&255,x[v++]=$.low.low>>24&255,x[v++]=255&$.low.high,x[v++]=$.low.high>>8&255,x[v++]=$.low.high>>16&255,x[v++]=$.low.high>>24&255,x[v++]=255&$.high.low,x[v++]=$.high.low>>8&255,x[v++]=$.high.low>>16&255,x[v++]=$.high.low>>24&255,x[v++]=255&$.high.high,x[v++]=$.high.high>>8&255,x[v++]=$.high.high>>16&255,x[v++]=$.high.high>>24&255,new Decimal128(x)};var COMBINATION_MASK=31,EXPONENT_MASK=16383,COMBINATION_INFINITY=30,COMBINATION_NAN=31;Decimal128.prototype.toString=function(){for(var e,t,r,n,i,o,s=0,u=new Array(36),a=0;a<u.length;a++)u[a]=0;var f,c,l,h,p,d=0,_=!1,y={parts:new Array(4)},g=[];d=0;var b=this.bytes;if(n=b[d++]|b[d++]<<8|b[d++]<<16|b[d++]<<24,r=b[d++]|b[d++]<<8|b[d++]<<16|b[d++]<<24,t=b[d++]|b[d++]<<8|b[d++]<<16|b[d++]<<24,e=b[d++]|b[d++]<<8|b[d++]<<16|b[d++]<<24,d=0,{low:new long_1(n,r),high:new long_1(t,e)}.high.lessThan(long_1.ZERO)&&g.push(\"-\"),(i=e>>26&COMBINATION_MASK)>>3==3){if(i===COMBINATION_INFINITY)return g.join(\"\")+\"Infinity\";if(i===COMBINATION_NAN)return\"NaN\";o=e>>15&EXPONENT_MASK,l=8+(e>>14&1)}else l=e>>14&7,o=e>>17&EXPONENT_MASK;if(f=o-EXPONENT_BIAS,y.parts[0]=(16383&e)+((15&l)<<14),y.parts[1]=t,y.parts[2]=r,y.parts[3]=n,0===y.parts[0]&&0===y.parts[1]&&0===y.parts[2]&&0===y.parts[3])_=!0;else for(p=3;p>=0;p--){var v=0,m=divideu128(y);if(y=m.quotient,v=m.rem.low)for(h=8;h>=0;h--)u[9*p+h]=v%10,v=Math.floor(v/10)}if(_)s=1,u[d]=0;else for(s=36;!u[d];)s-=1,d+=1;if((c=s-1+f)>=34||c<=-7||f>0){if(s>34)return g.push(0),f>0?g.push(\"E+\"+f):f<0&&g.push(\"E\"+f),g.join(\"\");g.push(u[d++]),(s-=1)&&g.push(\".\");for(var E=0;E<s;E++)g.push(u[d++]);g.push(\"E\"),c>0?g.push(\"+\"+c):g.push(c)}else if(f>=0)for(var A=0;A<s;A++)g.push(u[d++]);else{var w=s+f;if(w>0)for(var N=0;N<w;N++)g.push(u[d++]);else g.push(\"0\");for(g.push(\".\");w++<0;)g.push(\"0\");for(var O=0;O<s-Math.max(w-1,0);O++)g.push(u[d++])}return g.join(\"\")},Decimal128.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.fromExtendedJSON=function(e){return Decimal128.fromString(e.$numberDecimal)},Object.defineProperty(Decimal128.prototype,\"_bsontype\",{value:\"Decimal128\"});var decimal128=Decimal128;function _classCallCheck$7(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$7(e,t,r){return t&&_defineProperties$7(e.prototype,t),r&&_defineProperties$7(e,r),e}var MinKey=function(){function e(){_classCallCheck$7(this,e)}return _createClass$7(e,[{key:\"toExtendedJSON\",value:function(){return{$minKey:1}}}],[{key:\"fromExtendedJSON\",value:function(){return new e}}]),e}();Object.defineProperty(MinKey.prototype,\"_bsontype\",{value:\"MinKey\"});var min_key=MinKey;function _classCallCheck$8(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$8(e,t,r){return t&&_defineProperties$8(e.prototype,t),r&&_defineProperties$8(e,r),e}var MaxKey=function(){function e(){_classCallCheck$8(this,e)}return _createClass$8(e,[{key:\"toExtendedJSON\",value:function(){return{$maxKey:1}}}],[{key:\"fromExtendedJSON\",value:function(){return new e}}]),e}();Object.defineProperty(MaxKey.prototype,\"_bsontype\",{value:\"MaxKey\"});var max_key=MaxKey;function _classCallCheck$9(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$9(e,t,r){return t&&_defineProperties$9(e.prototype,t),r&&_defineProperties$9(e,r),e}var DBRef=function(){function e(t,r,n,i){_classCallCheck$9(this,e);var o=t.split(\".\");2===o.length&&(n=o.shift(),t=o.shift()),this.collection=t,this.oid=r,this.db=n,this.fields=i||{}}return _createClass$9(e,[{key:\"toJSON\",value:function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}},{key:\"toExtendedJSON\",value:function(){var e={$ref:this.collection,$id:this.oid};return this.db&&(e.$db=this.db),e=Object.assign(e,this.fields)}}],[{key:\"fromExtendedJSON\",value:function(t){var r=Object.assign({},t);return[\"$ref\",\"$id\",\"$db\"].forEach((function(e){return delete r[e]})),new e(t.$ref,t.$id,t.$db,r)}}]),e}();Object.defineProperty(DBRef.prototype,\"_bsontype\",{value:\"DBRef\"}),Object.defineProperty(DBRef.prototype,\"namespace\",{get:function(){return this.collection},set:function(e){this.collection=e},configurable:!1});var db_ref=DBRef;function _classCallCheck$a(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$a(e,t,r){return t&&_defineProperties$a(e.prototype,t),r&&_defineProperties$a(e,r),e}var Buffer$3=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,Binary=function(){function e(t,r){if(_classCallCheck$a(this,e),!(null==t||\"string\"==typeof t||Buffer$3.isBuffer(t)||t instanceof Uint8Array||Array.isArray(t)))throw new TypeError(\"only String, Buffer, Uint8Array or Array accepted\");if(this.sub_type=null==r?BSON_BINARY_SUBTYPE_DEFAULT:r,this.position=0,null==t||t instanceof Number)void 0!==Buffer$3?this.buffer=Buffer$3.alloc(e.BUFFER_SIZE):\"undefined\"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE)):this.buffer=new Array(e.BUFFER_SIZE);else{if(\"string\"==typeof t)if(void 0!==Buffer$3)this.buffer=Buffer$3.from(t);else{if(\"undefined\"==typeof Uint8Array&&!Array.isArray(t))throw new TypeError(\"only String, Buffer, Uint8Array or Array accepted\");this.buffer=writeStringToArray(t)}else this.buffer=t;this.position=t.length}}return _createClass$a(e,[{key:\"put\",value:function(t){if(null!=t.length&&\"number\"!=typeof t&&1!==t.length)throw new TypeError(\"only accepts single character String, Uint8Array or Array\");if(\"number\"!=typeof t&&t<0||t>255)throw new TypeError(\"only accepts number in a valid unsigned byte range 0-255\");var r=null;if(r=\"string\"==typeof t?t.charCodeAt(0):null!=t.length?t[0]:t,this.buffer.length>this.position)this.buffer[this.position++]=r;else if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer)){var n=Buffer$3.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}else{var i=null;i=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE+this.buffer.length)):new Array(e.BUFFER_SIZE+this.buffer.length);for(var o=0;o<this.buffer.length;o++)i[o]=this.buffer[o];this.buffer=i,this.buffer[this.position++]=r}}},{key:\"write\",value:function(e,t){if(t=\"number\"==typeof t?t:this.position,this.buffer.length<t+e.length){var r=null;if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer))r=Buffer$3.alloc(this.buffer.length+e.length),this.buffer.copy(r,0,0,this.buffer.length);else if(isUint8Array(this.buffer)){r=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var n=0;n<this.position;n++)r[n]=this.buffer[n]}this.buffer=r}if(void 0!==Buffer$3&&Buffer$3.isBuffer(e)&&Buffer$3.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==Buffer$3&&\"string\"==typeof e&&Buffer$3.isBuffer(this.buffer))this.buffer.write(e,t,\"binary\"),this.position=t+e.length>this.position?t+e.length:this.position;else if(isUint8Array(e)||Array.isArray(e)&&\"string\"!=typeof e){for(var i=0;i<e.length;i++)this.buffer[t++]=e[i];this.position=t>this.position?t:this.position}else if(\"string\"==typeof e){for(var o=0;o<e.length;o++)this.buffer[t++]=e.charCodeAt(o);this.position=t>this.position?t:this.position}}},{key:\"read\",value:function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var r=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),n=0;n<t;n++)r[n]=this.buffer[e++];return r}},{key:\"value\",value:function(e){if((e=null!=e&&e)&&void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString(\"binary\",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),r=0;r<this.position;r++)t[r]=this.buffer[r];return t}return convertArraytoUtf8BinaryString(this.buffer,0,this.position)}},{key:\"length\",value:function(){return this.position}},{key:\"toJSON\",value:function(){return null!=this.buffer?this.buffer.toString(\"base64\"):\"\"}},{key:\"toString\",value:function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):\"\"}},{key:\"toExtendedJSON\",value:function(){var e=Buffer$3.isBuffer(this.buffer)?this.buffer.toString(\"base64\"):Buffer$3.from(this.buffer).toString(\"base64\"),t=Number(this.sub_type).toString(16);return{$binary:{base64:e,subType:1===t.length?\"0\"+t:t}}}}],[{key:\"fromExtendedJSON\",value:function(t){var r=t.$binary.subType?parseInt(t.$binary.subType,16):0;return new e(Buffer$3.from(t.$binary.base64,\"base64\"),r)}}]),e}(),BSON_BINARY_SUBTYPE_DEFAULT=0;function isUint8Array(e){return\"[object Uint8Array]\"===Object.prototype.toString.call(e)}function writeStringToArray(e){for(var t=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function convertArraytoUtf8BinaryString(e,t,r){for(var n=\"\",i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n}Binary.BUFFER_SIZE=256,Binary.SUBTYPE_DEFAULT=0,Binary.SUBTYPE_FUNCTION=1,Binary.SUBTYPE_BYTE_ARRAY=2,Binary.SUBTYPE_UUID_OLD=3,Binary.SUBTYPE_UUID=4,Binary.SUBTYPE_MD5=5,Binary.SUBTYPE_USER_DEFINED=128,Object.defineProperty(Binary.prototype,\"_bsontype\",{value:\"Binary\"});var binary=Binary,constants={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,BSON_INT64_MAX:Math.pow(2,63)-1,BSON_INT64_MIN:-Math.pow(2,63),JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992,BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_DBPOINTER:12,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128};function _typeof$2(e){return(_typeof$2=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var keysToCodecs={$oid:objectid,$binary:binary,$symbol:symbol,$numberInt:int_32,$numberDecimal:decimal128,$numberDouble:double_1,$numberLong:long_1,$minKey:min_key,$maxKey:max_key,$regularExpression:regexp,$timestamp:timestamp};function deserializeValue(e,t,r,n){if(\"number\"==typeof r){if(n.relaxed)return r;if(Math.floor(r)===r){if(r>=BSON_INT32_MIN&&r<=BSON_INT32_MAX)return new int_32(r);if(r>=BSON_INT64_MIN&&r<=BSON_INT64_MAX)return new long_1.fromNumber(r)}return new double_1(r)}if(null==r||\"object\"!==_typeof$2(r))return r;if(r.$undefined)return null;for(var i=Object.keys(r).filter((function(e){return e.startsWith(\"$\")&&null!=r[e]})),o=0;o<i.length;o++){var s=keysToCodecs[i[o]];if(s)return s.fromExtendedJSON(r,n)}if(null!=r.$date){var u=r.$date,a=new Date;return\"string\"==typeof u?a.setTime(Date.parse(u)):long_1.isLong(u)?a.setTime(u.toNumber()):\"number\"==typeof u&&n.relaxed&&a.setTime(u),a}if(null!=r.$code){var f=Object.assign({},r);return r.$scope&&(f.$scope=deserializeValue(e,null,r.$scope)),code.fromExtendedJSON(r)}if(null!=r.$ref||null!=r.$dbPointer){var c=r.$ref?r:r.$dbPointer;if(c instanceof db_ref)return c;var l=Object.keys(c).filter((function(e){return e.startsWith(\"$\")})),h=!0;if(l.forEach((function(e){-1===[\"$ref\",\"$id\",\"$db\"].indexOf(e)&&(h=!1)})),h)return db_ref.fromExtendedJSON(c)}return r}function parse(e,t){var r=this;return\"boolean\"==typeof(t=Object.assign({},{relaxed:!0},t)).relaxed&&(t.strict=!t.relaxed),\"boolean\"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,(function(e,n){return deserializeValue(r,e,n,t)}))}var BSON_INT32_MAX=2147483647,BSON_INT32_MIN=-2147483648,BSON_INT64_MAX=0x8000000000000000,BSON_INT64_MIN=-0x8000000000000000;function stringify(e,t,r,n){null!=r&&\"object\"===_typeof$2(r)&&(n=r,r=0),null==t||\"object\"!==_typeof$2(t)||Array.isArray(t)||(n=t,t=null,r=0),n=Object.assign({},{relaxed:!0},n);var i=Array.isArray(e)?serializeArray(e,n):serializeDocument(e,n);return JSON.stringify(i,t,r)}function serialize(e,t){return t=t||{},JSON.parse(stringify(e,t))}function deserialize(e,t){return t=t||{},parse(JSON.stringify(e),t)}function serializeArray(e,t){return e.map((function(e){return serializeValue(e,t)}))}function getISOString(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+\"Z\"}function serializeValue(e,t){if(Array.isArray(e))return serializeArray(e,t);if(void 0===e)return null;if(e instanceof Date){var r=e.getTime(),n=r>-1&&r<2534023188e5;return t.relaxed&&n?{$date:getISOString(e)}:{$date:{$numberLong:e.getTime().toString()}}}if(\"number\"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var i=e>=BSON_INT64_MIN&&e<=BSON_INT64_MAX;if(e>=BSON_INT32_MIN&&e<=BSON_INT32_MAX)return{$numberInt:e.toString()};if(i)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var o=e.flags;return void 0===o&&(o=e.toString().match(/[gimuy]*$/)[0]),new regexp(e.source,o).toExtendedJSON()}return null!=e&&\"object\"===_typeof$2(e)?serializeDocument(e,t):e}var BSON_TYPE_MAPPINGS={Binary:function(e){return new binary(e.value(),e.subtype)},Code:function(e){return new code(e.code,e.scope)},DBRef:function(e){return new db_ref(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new decimal128(e.bytes)},Double:function(e){return new double_1(e.value)},Int32:function(e){return new int_32(e.value)},Long:function(e){return long_1.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new max_key},MinKey:function(){return new min_key},ObjectID:function(e){return new objectid(e)},ObjectId:function(e){return new objectid(e)},BSONRegExp:function(e){return new regexp(e.pattern,e.options)},Symbol:function(e){return new symbol(e.value)},Timestamp:function(e){return timestamp.fromBits(e.low,e.high)}};function serializeDocument(e,t){if(null==e||\"object\"!==_typeof$2(e))throw new Error(\"not an object instance\");var r=e._bsontype;if(void 0===r){var n={};for(var i in e)n[i]=serializeValue(e[i],t);return n}if(\"string\"==typeof r){var o=e;if(\"function\"!=typeof o.toExtendedJSON){var s=BSON_TYPE_MAPPINGS[r];if(!s)throw new TypeError(\"Unrecognized or invalid _bsontype: \"+r);o=s(o)}return\"Code\"===r&&o.scope?o=new code(o.code,serializeValue(o.scope,t)):\"DBRef\"===r&&o.oid&&(o=new db_ref(o.collection,serializeValue(o.oid,t),o.db,o.fields)),o.toExtendedJSON(t)}throw new Error(\"_bsontype must be a string, but was: \"+_typeof$2(r))}var extended_json={parse:parse,deserialize:deserialize,serialize:serialize,stringify:stringify},FIRST_BIT=128,FIRST_TWO_BITS=192,FIRST_THREE_BITS=224,FIRST_FOUR_BITS=240,FIRST_FIVE_BITS=248,TWO_BIT_CHAR=192,THREE_BIT_CHAR=224,FOUR_BIT_CHAR=240,CONTINUING_CHAR=128;function validateUtf8(e,t,r){for(var n=0,i=t;i<r;i+=1){var o=e[i];if(n){if((o&FIRST_TWO_BITS)!==CONTINUING_CHAR)return!1;n-=1}else if(o&FIRST_BIT)if((o&FIRST_THREE_BITS)===TWO_BIT_CHAR)n=1;else if((o&FIRST_FOUR_BITS)===THREE_BIT_CHAR)n=2;else{if((o&FIRST_FIVE_BITS)!==FOUR_BIT_CHAR)return!1;n=3}}return!n}var validateUtf8_1=validateUtf8,validate_utf8={validateUtf8:validateUtf8_1},Buffer$4=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,validateUtf8$1=validate_utf8.validateUtf8,JS_INT_MAX_LONG=long_1.fromNumber(constants.JS_INT_MAX),JS_INT_MIN_LONG=long_1.fromNumber(constants.JS_INT_MIN),functionCache={};function deserialize$1(e,t,r){var n=(t=null==t?{}:t)&&t.index?t.index:0,i=e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24;if(i<5)throw new Error(\"bson size must be >= 5, is \".concat(i));if(t.allowObjectSmallerThanBufferSize&&e.length<i)throw new Error(\"buffer length \".concat(e.length,\" must be >= bson size \").concat(i));if(!t.allowObjectSmallerThanBufferSize&&e.length!==i)throw new Error(\"buffer length \".concat(e.length,\" must === bson size \").concat(i));if(i+n>e.length)throw new Error(\"(bson size \".concat(i,\" + options.index \").concat(n,\" must be <= buffer length \").concat(Buffer$4.byteLength(e),\")\"));if(0!==e[n+i-1])throw new Error(\"One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00\");return deserializeObject(e,n,t,r)}function deserializeObject(e,t,r,n){var i=null!=r.evalFunctions&&r.evalFunctions,o=null!=r.cacheFunctions&&r.cacheFunctions,s=null!=r.cacheFunctionsCrc32&&r.cacheFunctionsCrc32;if(!s)var u=null;var a=null==r.fieldsAsRaw?null:r.fieldsAsRaw,f=null!=r.raw&&r.raw,c=\"boolean\"==typeof r.bsonRegExp&&r.bsonRegExp,l=null!=r.promoteBuffers&&r.promoteBuffers,h=null==r.promoteLongs||r.promoteLongs,p=null==r.promoteValues||r.promoteValues,d=t;if(e.length<5)throw new Error(\"corrupt bson message < 5 bytes long\");var _=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(_<5||_>e.length)throw new Error(\"corrupt bson message\");for(var y=n?[]:{},g=0;;){var b=e[t++];if(0===b)break;for(var v=t;0!==e[v]&&v<e.length;)v++;if(v>=Buffer$4.byteLength(e))throw new Error(\"Bad BSON Document: illegal CString\");var m=n?g++:e.toString(\"utf8\",t,v);if(t=v+1,b===constants.BSON_DATA_STRING){var E=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(E<=0||E>e.length-t||0!==e[t+E-1])throw new Error(\"bad string length in bson\");if(!validateUtf8$1(e,t,t+E-1))throw new Error(\"Invalid UTF-8 string in BSON document\");var A=e.toString(\"utf8\",t,t+E-1);y[m]=A,t+=E}else if(b===constants.BSON_DATA_OID){var w=Buffer$4.alloc(12);e.copy(w,0,t,t+12),y[m]=new objectid(w),t+=12}else if(b===constants.BSON_DATA_INT&&!1===p)y[m]=new int_32(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(b===constants.BSON_DATA_INT)y[m]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(b===constants.BSON_DATA_NUMBER&&!1===p)y[m]=new double_1(e.readDoubleLE(t)),t+=8;else if(b===constants.BSON_DATA_NUMBER)y[m]=e.readDoubleLE(t),t+=8;else if(b===constants.BSON_DATA_DATE){var N=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,O=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;y[m]=new Date(new long_1(N,O).toNumber())}else if(b===constants.BSON_DATA_BOOLEAN){if(0!==e[t]&&1!==e[t])throw new Error(\"illegal boolean type value\");y[m]=1===e[t++]}else if(b===constants.BSON_DATA_OBJECT){var S=t,T=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(T<=0||T>e.length-t)throw new Error(\"bad embedded document length in bson\");y[m]=f?e.slice(t,t+T):deserializeObject(e,S,r,!1),t+=T}else if(b===constants.BSON_DATA_ARRAY){var B=t,I=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,R=r,D=t+I;if(a&&a[m]){for(var P in R={},r)R[P]=r[P];R.raw=!0}if(y[m]=deserializeObject(e,B,R,!0),0!==e[(t+=I)-1])throw new Error(\"invalid array terminator byte\");if(t!==D)throw new Error(\"corrupted array bson\")}else if(b===constants.BSON_DATA_UNDEFINED)y[m]=void 0;else if(b===constants.BSON_DATA_NULL)y[m]=null;else if(b===constants.BSON_DATA_LONG){var U=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,C=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,$=new long_1(U,C);y[m]=h&&!0===p&&$.lessThanOrEqual(JS_INT_MAX_LONG)&&$.greaterThanOrEqual(JS_INT_MIN_LONG)?$.toNumber():$}else if(b===constants.BSON_DATA_DECIMAL128){var x=Buffer$4.alloc(16);e.copy(x,0,t,t+16),t+=16;var M=new decimal128(x);y[m]=M.toObject?M.toObject():M}else if(b===constants.BSON_DATA_BINARY){var k=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,L=k,j=e[t++];if(k<0)throw new Error(\"Negative binary type element size found\");if(k>Buffer$4.byteLength(e))throw new Error(\"Binary type size larger than document size\");if(null!=e.slice){if(j===binary.SUBTYPE_BYTE_ARRAY){if((k=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error(\"Negative binary type element size found for subtype 0x02\");if(k>L-4)throw new Error(\"Binary type with subtype 0x02 contains to long binary size\");if(k<L-4)throw new Error(\"Binary type with subtype 0x02 contains to short binary size\")}y[m]=l&&p?e.slice(t,t+k):new binary(e.slice(t,t+k),j)}else{var F=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(k)):new Array(k);if(j===binary.SUBTYPE_BYTE_ARRAY){if((k=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error(\"Negative binary type element size found for subtype 0x02\");if(k>L-4)throw new Error(\"Binary type with subtype 0x02 contains to long binary size\");if(k<L-4)throw new Error(\"Binary type with subtype 0x02 contains to short binary size\")}for(v=0;v<k;v++)F[v]=e[t+v];y[m]=l&&p?F:new binary(F,j)}t+=k}else if(b===constants.BSON_DATA_REGEXP&&!1===c){for(v=t;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var z=e.toString(\"utf8\",t,v);for(v=t=v+1;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var Y=e.toString(\"utf8\",t,v);t=v+1;var K=new Array(Y.length);for(v=0;v<Y.length;v++)switch(Y[v]){case\"m\":K[v]=\"m\";break;case\"s\":K[v]=\"g\";break;case\"i\":K[v]=\"i\"}y[m]=new RegExp(z,K.join(\"\"))}else if(b===constants.BSON_DATA_REGEXP&&!0===c){for(v=t;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var J=e.toString(\"utf8\",t,v);for(v=t=v+1;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var W=e.toString(\"utf8\",t,v);t=v+1,y[m]=new regexp(J,W)}else if(b===constants.BSON_DATA_SYMBOL){var q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(q<=0||q>e.length-t||0!==e[t+q-1])throw new Error(\"bad string length in bson\");y[m]=e.toString(\"utf8\",t,t+q-1),t+=q}else if(b===constants.BSON_DATA_TIMESTAMP){var V=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,X=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;y[m]=new timestamp(V,X)}else if(b===constants.BSON_DATA_MIN_KEY)y[m]=new min_key;else if(b===constants.BSON_DATA_MAX_KEY)y[m]=new max_key;else if(b===constants.BSON_DATA_CODE){var H=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(H<=0||H>e.length-t||0!==e[t+H-1])throw new Error(\"bad string length in bson\");var G=e.toString(\"utf8\",t,t+H-1);if(i)if(o){var Z=s?u(G):G;y[m]=isolateEvalWithHash(functionCache,Z,G,y)}else y[m]=isolateEval(G);else y[m]=new code(G);t+=H}else if(b===constants.BSON_DATA_CODE_W_SCOPE){var Q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Q<13)throw new Error(\"code_w_scope total size shorter minimum expected length\");var ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ee<=0||ee>e.length-t||0!==e[t+ee-1])throw new Error(\"bad string length in bson\");var te=e.toString(\"utf8\",t,t+ee-1),re=t+=ee,ne=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,ie=deserializeObject(e,re,r,!1);if(t+=ne,Q<8+ne+ee)throw new Error(\"code_w_scope total size is to short, truncating scope\");if(Q>8+ne+ee)throw new Error(\"code_w_scope total size is to long, clips outer document\");if(i){if(o){var oe=s?u(te):te;y[m]=isolateEvalWithHash(functionCache,oe,te,y)}else y[m]=isolateEval(te);y[m].scope=ie}else y[m]=new code(te,ie)}else{if(b!==constants.BSON_DATA_DBPOINTER)throw new Error(\"Detected unknown BSON type \"+b.toString(16)+' for fieldname \"'+m+'\", are you using the latest BSON parser?');var se=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(se<=0||se>e.length-t||0!==e[t+se-1])throw new Error(\"bad string length in bson\");if(!validateUtf8$1(e,t,t+se-1))throw new Error(\"Invalid UTF-8 string in BSON document\");var ue=e.toString(\"utf8\",t,t+se-1);t+=se;var ae=Buffer$4.alloc(12);e.copy(ae,0,t,t+12);var fe=new objectid(ae);t+=12,y[m]=new db_ref(ue,fe)}}if(_!==t-d){if(n)throw new Error(\"corrupt array bson\");throw new Error(\"corrupt object bson\")}var ce=Object.keys(y).filter((function(e){return e.startsWith(\"$\")})),le=!0;if(ce.forEach((function(e){-1===[\"$ref\",\"$id\",\"$db\"].indexOf(e)&&(le=!1)})),!le)return y;if(null!=y.$id&&null!=y.$ref){var he=Object.assign({},y);return delete he.$ref,delete he.$id,delete he.$db,new db_ref(y.$ref,y.$id,y.$db||null,he)}return y}function isolateEvalWithHash(functionCache,hash,functionString,object){var value=null;return null==functionCache[hash]&&(eval(\"value = \"+functionString),functionCache[hash]=value),functionCache[hash].bind(object)}function isolateEval(functionString){var value=null;return eval(\"value = \"+functionString),value}var deserializer=deserialize$1;function readIEEE754(e,t,r,n,i){var o,s,u=\"big\"===r,a=8*i-n-1,f=(1<<a)-1,c=f>>1,l=-7,h=u?0:i-1,p=u?1:-1,d=e[t+h];for(h+=p,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=p,l-=8);if(0===o)o=1-c;else{if(o===f)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)}function writeIEEE754(e,t,r,n,i,o){var s,u,a,f=\"big\"===n,c=8*o-i-1,l=(1<<c)-1,h=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=f?o-1:0,_=f?-1:1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),(t+=s+h>=1?p/a:p*Math.pow(2,1-h))*a>=2&&(s++,a/=2),s+h>=l?(u=0,s=l):s+h>=1?(u=(t*a-1)*Math.pow(2,i),s+=h):(u=t*Math.pow(2,h-1)*Math.pow(2,i),s=0)),isNaN(t)&&(u=0);i>=8;)e[r+d]=255&u,d+=_,u/=256,i-=8;for(s=s<<i|u,isNaN(t)&&(s+=8),c+=i;c>0;)e[r+d]=255&s,d+=_,s/=256,c-=8;e[r+d-_]|=128*y}var float_parser={readIEEE754:readIEEE754,writeIEEE754:writeIEEE754};function _typeof$3(e){return(_typeof$3=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var Buffer$5=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,writeIEEE754$1=float_parser.writeIEEE754,normalizedFunctionString$1=utils.normalizedFunctionString,regexp$1=/\\x00/,ignoreKeys=new Set([\"$db\",\"$ref\",\"$id\",\"$clusterTime\"]),isDate$1=function(e){return\"object\"===_typeof$3(e)&&\"[object Date]\"===Object.prototype.toString.call(e)},isRegExp$1=function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)};function serializeString(e,t,r,n,i){e[n++]=constants.BSON_DATA_STRING;var o=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\");e[(n=n+o+1)-1]=0;var s=e.write(r,n+4,\"utf8\");return e[n+3]=s+1>>24&255,e[n+2]=s+1>>16&255,e[n+1]=s+1>>8&255,e[n]=s+1&255,n=n+4+s,e[n++]=0,n}function serializeNumber(e,t,r,n,i){if(Math.floor(r)===r&&r>=constants.JS_INT_MIN&&r<=constants.JS_INT_MAX)if(r>=constants.BSON_INT32_MIN&&r<=constants.BSON_INT32_MAX)e[n++]=constants.BSON_DATA_INT,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255;else if(r>=constants.JS_INT_MIN&&r<=constants.JS_INT_MAX){e[n++]=constants.BSON_DATA_NUMBER,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,writeIEEE754$1(e,r,n,\"little\",52,8),n+=8}else{e[n++]=constants.BSON_DATA_LONG,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=long_1.fromNumber(r),s=o.getLowBits(),u=o.getHighBits();e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=255&u,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255}else e[n++]=constants.BSON_DATA_NUMBER,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,writeIEEE754$1(e,r,n,\"little\",52,8),n+=8;return n}function serializeNull(e,t,r,n,i){return e[n++]=constants.BSON_DATA_NULL,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,n}function serializeBoolean(e,t,r,n,i){return e[n++]=constants.BSON_DATA_BOOLEAN,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,e[n++]=r?1:0,n}function serializeDate(e,t,r,n,i){e[n++]=constants.BSON_DATA_DATE,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=long_1.fromNumber(r.getTime()),s=o.getLowBits(),u=o.getHighBits();return e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=255&u,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,n}function serializeRegExp(e,t,r,n,i){if(e[n++]=constants.BSON_DATA_REGEXP,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,r.source&&null!=r.source.match(regexp$1))throw Error(\"value \"+r.source+\" must not contain null bytes\");return n+=e.write(r.source,n,\"utf8\"),e[n++]=0,r.ignoreCase&&(e[n++]=105),r.global&&(e[n++]=115),r.multiline&&(e[n++]=109),e[n++]=0,n}function serializeBSONRegExp(e,t,r,n,i){if(e[n++]=constants.BSON_DATA_REGEXP,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,null!=r.pattern.match(regexp$1))throw Error(\"pattern \"+r.pattern+\" must not contain null bytes\");return n+=e.write(r.pattern,n,\"utf8\"),e[n++]=0,n+=e.write(r.options.split(\"\").sort().join(\"\"),n,\"utf8\"),e[n++]=0,n}function serializeMinMax(e,t,r,n,i){return null===r?e[n++]=constants.BSON_DATA_NULL:\"MinKey\"===r._bsontype?e[n++]=constants.BSON_DATA_MIN_KEY:e[n++]=constants.BSON_DATA_MAX_KEY,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,n}function serializeObjectId(e,t,r,n,i){if(e[n++]=constants.BSON_DATA_OID,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,\"string\"==typeof r.id)e.write(r.id,n,\"binary\");else{if(!r.id||!r.id.copy)throw new TypeError(\"object [\"+JSON.stringify(r)+\"] is not a valid ObjectId\");r.id.copy(e,n,0,12)}return n+12}function serializeBuffer(e,t,r,n,i){e[n++]=constants.BSON_DATA_BINARY,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=r.length;return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=constants.BSON_BINARY_SUBTYPE_DEFAULT,r.copy(e,n,0,o),n+=o}function serializeObject(e,t,r,n,i,o,s,u,a,f){for(var c=0;c<f.length;c++)if(f[c]===r)throw new Error(\"cyclic dependency detected\");f.push(r),e[n++]=Array.isArray(r)?constants.BSON_DATA_ARRAY:constants.BSON_DATA_OBJECT,n+=a?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var l=serializeInto(e,r,i,n,o+1,s,u,f);return f.pop(),l}function serializeDecimal128(e,t,r,n,i){return e[n++]=constants.BSON_DATA_DECIMAL128,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,r.bytes.copy(e,n,0,16),n+16}function serializeLong(e,t,r,n,i){e[n++]=\"Long\"===r._bsontype?constants.BSON_DATA_LONG:constants.BSON_DATA_TIMESTAMP,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=r.getLowBits(),s=r.getHighBits();return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,n}function serializeInt32(e,t,r,n,i){return e[n++]=constants.BSON_DATA_INT,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255,n}function serializeDouble(e,t,r,n,i){return e[n++]=constants.BSON_DATA_NUMBER,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,writeIEEE754$1(e,r.value,n,\"little\",52,8),n+=8}function serializeFunction(e,t,r,n,i,o,s){e[n++]=constants.BSON_DATA_CODE,n+=s?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var u=normalizedFunctionString$1(r),a=e.write(u,n+4,\"utf8\")+1;return e[n]=255&a,e[n+1]=a>>8&255,e[n+2]=a>>16&255,e[n+3]=a>>24&255,n=n+4+a-1,e[n++]=0,n}function serializeCode(e,t,r,n,i,o,s,u,a){if(r.scope&&\"object\"===_typeof$3(r.scope)){e[n++]=constants.BSON_DATA_CODE_W_SCOPE,n+=a?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var f=n,c=\"string\"==typeof r.code?r.code:r.code.toString();n+=4;var l=e.write(c,n+4,\"utf8\")+1;e[n]=255&l,e[n+1]=l>>8&255,e[n+2]=l>>16&255,e[n+3]=l>>24&255,e[n+4+l-1]=0,n=n+l+4;var h=serializeInto(e,r.scope,i,n,o+1,s,u);n=h-1;var p=h-f;e[f++]=255&p,e[f++]=p>>8&255,e[f++]=p>>16&255,e[f++]=p>>24&255,e[n++]=0}else{e[n++]=constants.BSON_DATA_CODE,n+=a?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var d=r.code.toString(),_=e.write(d,n+4,\"utf8\")+1;e[n]=255&_,e[n+1]=_>>8&255,e[n+2]=_>>16&255,e[n+3]=_>>24&255,n=n+4+_-1,e[n++]=0}return n}function serializeBinary(e,t,r,n,i){e[n++]=constants.BSON_DATA_BINARY,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=r.value(!0),s=r.position;return r.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(s+=4),e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=r.sub_type,r.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(s-=4,e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255),o.copy(e,n,0,r.position),n+=r.position}function serializeSymbol(e,t,r,n,i){e[n++]=constants.BSON_DATA_SYMBOL,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=e.write(r.value,n+4,\"utf8\")+1;return e[n]=255&o,e[n+1]=o>>8&255,e[n+2]=o>>16&255,e[n+3]=o>>24&255,n=n+4+o-1,e[n++]=0,n}function serializeDBRef(e,t,r,n,i,o,s){e[n++]=constants.BSON_DATA_OBJECT,n+=s?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var u,a=n,f={$ref:r.collection||r.namespace,$id:r.oid};null!=r.db&&(f.$db=r.db);var c=(u=serializeInto(e,f=Object.assign(f,r.fields),!1,n,i+1,o))-a;return e[a++]=255&c,e[a++]=c>>8&255,e[a++]=c>>16&255,e[a++]=c>>24&255,u}function serializeInto(e,t,r,n,i,o,s,u){n=n||0,(u=u||[]).push(t);var a=n+4;if(Array.isArray(t))for(var f=0;f<t.length;f++){var c=\"\"+f,l=t[f];if(l&&l.toBSON){if(\"function\"!=typeof l.toBSON)throw new TypeError(\"toBSON is not a function\");l=l.toBSON()}var h=_typeof$3(l);if(\"string\"===h)a=serializeString(e,c,l,a,!0);else if(\"number\"===h)a=serializeNumber(e,c,l,a,!0);else if(\"boolean\"===h)a=serializeBoolean(e,c,l,a,!0);else if(l instanceof Date||isDate$1(l))a=serializeDate(e,c,l,a,!0);else if(void 0===l)a=serializeNull(e,c,l,a,!0);else if(null===l)a=serializeNull(e,c,l,a,!0);else if(\"ObjectId\"===l._bsontype||\"ObjectID\"===l._bsontype)a=serializeObjectId(e,c,l,a,!0);else if(Buffer$5.isBuffer(l))a=serializeBuffer(e,c,l,a,!0);else if(l instanceof RegExp||isRegExp$1(l))a=serializeRegExp(e,c,l,a,!0);else if(\"object\"===h&&null==l._bsontype)a=serializeObject(e,c,l,a,r,i,o,s,!0,u);else if(\"object\"===h&&\"Decimal128\"===l._bsontype)a=serializeDecimal128(e,c,l,a,!0);else if(\"Long\"===l._bsontype||\"Timestamp\"===l._bsontype)a=serializeLong(e,c,l,a,!0);else if(\"Double\"===l._bsontype)a=serializeDouble(e,c,l,a,!0);else if(\"function\"==typeof l&&o)a=serializeFunction(e,c,l,a,r,i,o,!0);else if(\"Code\"===l._bsontype)a=serializeCode(e,c,l,a,r,i,o,s,!0);else if(\"Binary\"===l._bsontype)a=serializeBinary(e,c,l,a,!0);else if(\"Symbol\"===l._bsontype)a=serializeSymbol(e,c,l,a,!0);else if(\"DBRef\"===l._bsontype)a=serializeDBRef(e,c,l,a,i,o,!0);else if(\"BSONRegExp\"===l._bsontype)a=serializeBSONRegExp(e,c,l,a,!0);else if(\"Int32\"===l._bsontype)a=serializeInt32(e,c,l,a,!0);else if(\"MinKey\"===l._bsontype||\"MaxKey\"===l._bsontype)a=serializeMinMax(e,c,l,a,!0);else if(void 0!==l._bsontype)throw new TypeError(\"Unrecognized or invalid _bsontype: \"+l._bsontype)}else if(t instanceof map)for(var p=t.entries(),d=!1;!d;){var _=p.next();if(!(d=_.done)){var y=_.value[0],g=_.value[1],b=_typeof$3(g);if(\"string\"==typeof y&&!ignoreKeys.has(y)){if(null!=y.match(regexp$1))throw Error(\"key \"+y+\" must not contain null bytes\");if(r){if(\"$\"===y[0])throw Error(\"key \"+y+\" must not start with '$'\");if(~y.indexOf(\".\"))throw Error(\"key \"+y+\" must not contain '.'\")}}if(\"string\"===b)a=serializeString(e,y,g,a);else if(\"number\"===b)a=serializeNumber(e,y,g,a);else if(\"boolean\"===b)a=serializeBoolean(e,y,g,a);else if(g instanceof Date||isDate$1(g))a=serializeDate(e,y,g,a);else if(null===g||void 0===g&&!1===s)a=serializeNull(e,y,g,a);else if(\"ObjectId\"===g._bsontype||\"ObjectID\"===g._bsontype)a=serializeObjectId(e,y,g,a);else if(Buffer$5.isBuffer(g))a=serializeBuffer(e,y,g,a);else if(g instanceof RegExp||isRegExp$1(g))a=serializeRegExp(e,y,g,a);else if(\"object\"===b&&null==g._bsontype)a=serializeObject(e,y,g,a,r,i,o,s,!1,u);else if(\"object\"===b&&\"Decimal128\"===g._bsontype)a=serializeDecimal128(e,y,g,a);else if(\"Long\"===g._bsontype||\"Timestamp\"===g._bsontype)a=serializeLong(e,y,g,a);else if(\"Double\"===g._bsontype)a=serializeDouble(e,y,g,a);else if(\"Code\"===g._bsontype)a=serializeCode(e,y,g,a,r,i,o,s);else if(\"function\"==typeof g&&o)a=serializeFunction(e,y,g,a,r,i,o);else if(\"Binary\"===g._bsontype)a=serializeBinary(e,y,g,a);else if(\"Symbol\"===g._bsontype)a=serializeSymbol(e,y,g,a);else if(\"DBRef\"===g._bsontype)a=serializeDBRef(e,y,g,a,i,o);else if(\"BSONRegExp\"===g._bsontype)a=serializeBSONRegExp(e,y,g,a);else if(\"Int32\"===g._bsontype)a=serializeInt32(e,y,g,a);else if(\"MinKey\"===g._bsontype||\"MaxKey\"===g._bsontype)a=serializeMinMax(e,y,g,a);else if(void 0!==g._bsontype)throw new TypeError(\"Unrecognized or invalid _bsontype: \"+g._bsontype)}}else{if(t.toBSON){if(\"function\"!=typeof t.toBSON)throw new TypeError(\"toBSON is not a function\");if(null!=(t=t.toBSON())&&\"object\"!==_typeof$3(t))throw new TypeError(\"toBSON function did not return an object\")}for(var v in t){var m=t[v];if(m&&m.toBSON){if(\"function\"!=typeof m.toBSON)throw new TypeError(\"toBSON is not a function\");m=m.toBSON()}var E=_typeof$3(m);if(\"string\"==typeof v&&!ignoreKeys.has(v)){if(null!=v.match(regexp$1))throw Error(\"key \"+v+\" must not contain null bytes\");if(r){if(\"$\"===v[0])throw Error(\"key \"+v+\" must not start with '$'\");if(~v.indexOf(\".\"))throw Error(\"key \"+v+\" must not contain '.'\")}}if(\"string\"===E)a=serializeString(e,v,m,a);else if(\"number\"===E)a=serializeNumber(e,v,m,a);else if(\"boolean\"===E)a=serializeBoolean(e,v,m,a);else if(m instanceof Date||isDate$1(m))a=serializeDate(e,v,m,a);else if(void 0===m)!1===s&&(a=serializeNull(e,v,m,a));else if(null===m)a=serializeNull(e,v,m,a);else if(\"ObjectId\"===m._bsontype||\"ObjectID\"===m._bsontype)a=serializeObjectId(e,v,m,a);else if(Buffer$5.isBuffer(m))a=serializeBuffer(e,v,m,a);else if(m instanceof RegExp||isRegExp$1(m))a=serializeRegExp(e,v,m,a);else if(\"object\"===E&&null==m._bsontype)a=serializeObject(e,v,m,a,r,i,o,s,!1,u);else if(\"object\"===E&&\"Decimal128\"===m._bsontype)a=serializeDecimal128(e,v,m,a);else if(\"Long\"===m._bsontype||\"Timestamp\"===m._bsontype)a=serializeLong(e,v,m,a);else if(\"Double\"===m._bsontype)a=serializeDouble(e,v,m,a);else if(\"Code\"===m._bsontype)a=serializeCode(e,v,m,a,r,i,o,s);else if(\"function\"==typeof m&&o)a=serializeFunction(e,v,m,a,r,i,o);else if(\"Binary\"===m._bsontype)a=serializeBinary(e,v,m,a);else if(\"Symbol\"===m._bsontype)a=serializeSymbol(e,v,m,a);else if(\"DBRef\"===m._bsontype)a=serializeDBRef(e,v,m,a,i,o);else if(\"BSONRegExp\"===m._bsontype)a=serializeBSONRegExp(e,v,m,a);else if(\"Int32\"===m._bsontype)a=serializeInt32(e,v,m,a);else if(\"MinKey\"===m._bsontype||\"MaxKey\"===m._bsontype)a=serializeMinMax(e,v,m,a);else if(void 0!==m._bsontype)throw new TypeError(\"Unrecognized or invalid _bsontype: \"+m._bsontype)}}u.pop(),e[a++]=0;var A=a-n;return e[n++]=255&A,e[n++]=A>>8&255,e[n++]=A>>16&255,e[n++]=A>>24&255,a}var serializer=serializeInto;function _typeof$4(e){return(_typeof$4=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var Buffer$6=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,normalizedFunctionString$2=utils.normalizedFunctionString;function isDate$2(e){return\"object\"===_typeof$4(e)&&\"[object Date]\"===Object.prototype.toString.call(e)}function calculateObjectSize(e,t,r){var n=5;if(Array.isArray(e))for(var i=0;i<e.length;i++)n+=calculateElement(i.toString(),e[i],t,!0,r);else for(var o in e.toBSON&&(e=e.toBSON()),e)n+=calculateElement(o,e[o],t,!1,r);return n}function calculateElement(e,t,r,n,i){switch(t&&t.toBSON&&(t=t.toBSON()),_typeof$4(t)){case\"string\":return 1+Buffer$6.byteLength(e,\"utf8\")+1+4+Buffer$6.byteLength(t,\"utf8\")+1;case\"number\":return Math.floor(t)===t&&t>=constants.JS_INT_MIN&&t<=constants.JS_INT_MAX&&t>=constants.BSON_INT32_MIN&&t<=constants.BSON_INT32_MAX?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+5:(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+9;case\"undefined\":return n||!i?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1:0;case\"boolean\":return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+2;case\"object\":if(null==t||\"MinKey\"===t._bsontype||\"MaxKey\"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1;if(\"ObjectId\"===t._bsontype||\"ObjectID\"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+13;if(t instanceof Date||isDate$2(t))return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+9;if(void 0!==Buffer$6&&Buffer$6.isBuffer(t))return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+6+t.length;if(\"Long\"===t._bsontype||\"Double\"===t._bsontype||\"Timestamp\"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+9;if(\"Decimal128\"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+17;if(\"Code\"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+4+4+Buffer$6.byteLength(t.code.toString(),\"utf8\")+1+calculateObjectSize(t.scope,r,i):(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+4+Buffer$6.byteLength(t.code.toString(),\"utf8\")+1;if(\"Binary\"===t._bsontype)return t.sub_type===binary.SUBTYPE_BYTE_ARRAY?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+(t.position+1+4+1+4):(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+(t.position+1+4+1);if(\"Symbol\"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+Buffer$6.byteLength(t.value,\"utf8\")+4+1+1;if(\"DBRef\"===t._bsontype){var o=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(o.$db=t.db),(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+calculateObjectSize(o,r,i)}return t instanceof RegExp||\"[object RegExp]\"===Object.prototype.toString.call(t)?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+Buffer$6.byteLength(t.source,\"utf8\")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:\"BSONRegExp\"===t._bsontype?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+Buffer$6.byteLength(t.pattern,\"utf8\")+1+Buffer$6.byteLength(t.options,\"utf8\")+1:(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+calculateObjectSize(t,r,i)+1;case\"function\":if(t instanceof RegExp||\"[object RegExp]\"===Object.prototype.toString.call(t)||\"[object RegExp]\"===String.call(t))return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+Buffer$6.byteLength(t.source,\"utf8\")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(r&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+4+4+Buffer$6.byteLength(normalizedFunctionString$2(t),\"utf8\")+1+calculateObjectSize(t.scope,r,i);if(r)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+4+Buffer$6.byteLength(normalizedFunctionString$2(t),\"utf8\")+1}return 0}var calculate_size=calculateObjectSize,Buffer$7=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,ensure_buffer=function(e){if(e instanceof Buffer$7)return e;if(e instanceof Uint8Array)return Buffer$7.from(e.buffer);throw new TypeError(\"Must use either Buffer or Uint8Array\")},Buffer$8=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,MAXSIZE=17825792,buffer$1=Buffer$8.alloc(MAXSIZE);function setInternalBufferSize(e){buffer$1.length<e&&(buffer$1=Buffer$8.alloc(e))}function serialize$1(e,t){var r=\"boolean\"==typeof(t=t||{}).checkKeys&&t.checkKeys,n=\"boolean\"==typeof t.serializeFunctions&&t.serializeFunctions,i=\"boolean\"!=typeof t.ignoreUndefined||t.ignoreUndefined,o=\"number\"==typeof t.minInternalBufferSize?t.minInternalBufferSize:MAXSIZE;buffer$1.length<o&&(buffer$1=Buffer$8.alloc(o));var s=serializer(buffer$1,e,r,0,0,n,i,[]),u=Buffer$8.alloc(s);return buffer$1.copy(u,0,0,u.length),u}function serializeWithBufferAndIndex(e,t,r){var n=\"boolean\"==typeof(r=r||{}).checkKeys&&r.checkKeys,i=\"boolean\"==typeof r.serializeFunctions&&r.serializeFunctions,o=\"boolean\"!=typeof r.ignoreUndefined||r.ignoreUndefined,s=\"number\"==typeof r.index?r.index:0,u=serializer(buffer$1,e,n,0,0,i,o);return buffer$1.copy(t,s,0,u),s+u-1}function deserialize$2(e,t){return e=ensure_buffer(e),deserializer(e,t)}function calculateObjectSize$1(e,t){var r=\"boolean\"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,n=\"boolean\"!=typeof t.ignoreUndefined||t.ignoreUndefined;return calculate_size(e,r,n)}function deserializeStream(e,t,r,n,i,o){o=Object.assign({allowObjectSmallerThanBufferSize:!0},o),e=ensure_buffer(e);for(var s=t,u=0;u<r;u++){var a=e[s]|e[s+1]<<8|e[s+2]<<16|e[s+3]<<24;o.index=s,n[i+u]=deserializer(e,o),s+=a}return s}var bson={BSON_INT32_MAX:constants.BSON_INT32_MAX,BSON_INT32_MIN:constants.BSON_INT32_MIN,BSON_INT64_MAX:constants.BSON_INT64_MAX,BSON_INT64_MIN:constants.BSON_INT64_MIN,JS_INT_MAX:constants.JS_INT_MAX,JS_INT_MIN:constants.JS_INT_MIN,BSON_DATA_NUMBER:constants.BSON_DATA_NUMBER,BSON_DATA_STRING:constants.BSON_DATA_STRING,BSON_DATA_OBJECT:constants.BSON_DATA_OBJECT,BSON_DATA_ARRAY:constants.BSON_DATA_ARRAY,BSON_DATA_BINARY:constants.BSON_DATA_BINARY,BSON_DATA_UNDEFINED:constants.BSON_DATA_UNDEFINED,BSON_DATA_OID:constants.BSON_DATA_OID,BSON_DATA_BOOLEAN:constants.BSON_DATA_BOOLEAN,BSON_DATA_DATE:constants.BSON_DATA_DATE,BSON_DATA_NULL:constants.BSON_DATA_NULL,BSON_DATA_REGEXP:constants.BSON_DATA_REGEXP,BSON_DATA_DBPOINTER:constants.BSON_DATA_DBPOINTER,BSON_DATA_CODE:constants.BSON_DATA_CODE,BSON_DATA_SYMBOL:constants.BSON_DATA_SYMBOL,BSON_DATA_CODE_W_SCOPE:constants.BSON_DATA_CODE_W_SCOPE,BSON_DATA_INT:constants.BSON_DATA_INT,BSON_DATA_TIMESTAMP:constants.BSON_DATA_TIMESTAMP,BSON_DATA_LONG:constants.BSON_DATA_LONG,BSON_DATA_DECIMAL128:constants.BSON_DATA_DECIMAL128,BSON_DATA_MIN_KEY:constants.BSON_DATA_MIN_KEY,BSON_DATA_MAX_KEY:constants.BSON_DATA_MAX_KEY,BSON_BINARY_SUBTYPE_DEFAULT:constants.BSON_BINARY_SUBTYPE_DEFAULT,BSON_BINARY_SUBTYPE_FUNCTION:constants.BSON_BINARY_SUBTYPE_FUNCTION,BSON_BINARY_SUBTYPE_BYTE_ARRAY:constants.BSON_BINARY_SUBTYPE_BYTE_ARRAY,BSON_BINARY_SUBTYPE_UUID:constants.BSON_BINARY_SUBTYPE_UUID,BSON_BINARY_SUBTYPE_MD5:constants.BSON_BINARY_SUBTYPE_MD5,BSON_BINARY_SUBTYPE_USER_DEFINED:constants.BSON_BINARY_SUBTYPE_USER_DEFINED,Code:code,Map:map,BSONSymbol:symbol,DBRef:db_ref,Binary:binary,ObjectId:objectid,Long:long_1,Timestamp:timestamp,Double:double_1,Int32:int_32,MinKey:min_key,MaxKey:max_key,BSONRegExp:regexp,Decimal128:decimal128,serialize:serialize$1,serializeWithBufferAndIndex:serializeWithBufferAndIndex,deserialize:deserialize$2,calculateObjectSize:calculateObjectSize$1,deserializeStream:deserializeStream,setInternalBufferSize:setInternalBufferSize,ObjectID:objectid,EJSON:extended_json},bson_1=bson.BSON_INT32_MAX,bson_2=bson.BSON_INT32_MIN,bson_3=bson.BSON_INT64_MAX,bson_4=bson.BSON_INT64_MIN,bson_5=bson.JS_INT_MAX,bson_6=bson.JS_INT_MIN,bson_7=bson.BSON_DATA_NUMBER,bson_8=bson.BSON_DATA_STRING,bson_9=bson.BSON_DATA_OBJECT,bson_10=bson.BSON_DATA_ARRAY,bson_11=bson.BSON_DATA_BINARY,bson_12=bson.BSON_DATA_UNDEFINED,bson_13=bson.BSON_DATA_OID,bson_14=bson.BSON_DATA_BOOLEAN,bson_15=bson.BSON_DATA_DATE,bson_16=bson.BSON_DATA_NULL,bson_17=bson.BSON_DATA_REGEXP,bson_18=bson.BSON_DATA_DBPOINTER,bson_19=bson.BSON_DATA_CODE,bson_20=bson.BSON_DATA_SYMBOL,bson_21=bson.BSON_DATA_CODE_W_SCOPE,bson_22=bson.BSON_DATA_INT,bson_23=bson.BSON_DATA_TIMESTAMP,bson_24=bson.BSON_DATA_LONG,bson_25=bson.BSON_DATA_DECIMAL128,bson_26=bson.BSON_DATA_MIN_KEY,bson_27=bson.BSON_DATA_MAX_KEY,bson_28=bson.BSON_BINARY_SUBTYPE_DEFAULT,bson_29=bson.BSON_BINARY_SUBTYPE_FUNCTION,bson_30=bson.BSON_BINARY_SUBTYPE_BYTE_ARRAY,bson_31=bson.BSON_BINARY_SUBTYPE_UUID,bson_32=bson.BSON_BINARY_SUBTYPE_MD5,bson_33=bson.BSON_BINARY_SUBTYPE_USER_DEFINED,bson_34=bson.Code,bson_35=bson.BSONSymbol,bson_36=bson.DBRef,bson_37=bson.Binary,bson_38=bson.ObjectId,bson_39=bson.Long,bson_40=bson.Timestamp,bson_41=bson.Double,bson_42=bson.Int32,bson_43=bson.MinKey,bson_44=bson.MaxKey,bson_45=bson.BSONRegExp,bson_46=bson.Decimal128,bson_47=bson.serialize,bson_48=bson.serializeWithBufferAndIndex,bson_49=bson.deserialize,bson_50=bson.calculateObjectSize,bson_51=bson.deserializeStream,bson_52=bson.setInternalBufferSize,bson_53=bson.ObjectID,bson_54=bson.EJSON;__webpack_exports__.b=bson}).call(this,__webpack_require__(4),__webpack_require__(0).Buffer)},function(e,t){e.exports=n;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function i(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,\"__isLong__\",{value:!0}),n.isLong=i;var o={},s={};function u(e,t){var r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(r=f(e,(0|e)<0?-1:0,!0),i&&(s[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(r=f(e,e<0?-1:0,!1),i&&(o[e]=r),r)}function a(e,t){if(isNaN(e))return t?b:g;if(t){if(e<0)return b;if(e>=d)return w}else{if(e<=-_)return N;if(e+1>=_)return A}return e<0?a(-e,t).neg():f(e%p|0,e/p|0,t)}function f(e,t,r){return new n(e,t,r)}n.fromInt=u,n.fromNumber=a,n.fromBits=f;var c=Math.pow;function l(e,t,r){if(0===e.length)throw Error(\"empty string\");if(\"NaN\"===e||\"Infinity\"===e||\"+Infinity\"===e||\"-Infinity\"===e)return g;if(\"number\"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError(\"radix\");var n;if((n=e.indexOf(\"-\"))>0)throw Error(\"interior hyphen\");if(0===n)return l(e.substring(1),t,r).neg();for(var i=a(c(r,8)),o=g,s=0;s<e.length;s+=8){var u=Math.min(8,e.length-s),f=parseInt(e.substring(s,s+u),r);if(u<8){var h=a(c(r,u));o=o.mul(h).add(a(f))}else o=(o=o.mul(i)).add(a(f))}return o.unsigned=t,o}function h(e,t){return\"number\"==typeof e?a(e,t):\"string\"==typeof e?l(e,t):f(e.low,e.high,\"boolean\"==typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=h;var p=4294967296,d=p*p,_=d/2,y=u(1<<24),g=u(0);n.ZERO=g;var b=u(0,!0);n.UZERO=b;var v=u(1);n.ONE=v;var m=u(1,!0);n.UONE=m;var E=u(-1);n.NEG_ONE=E;var A=f(-1,2147483647,!1);n.MAX_VALUE=A;var w=f(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var N=f(0,-2147483648,!1);n.MIN_VALUE=N;var O=n.prototype;O.toInt=function(){return this.unsigned?this.low>>>0:this.low},O.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},O.toString=function(e){if((e=e||10)<2||36<e)throw RangeError(\"radix\");if(this.isZero())return\"0\";if(this.isNegative()){if(this.eq(N)){var t=a(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return\"-\"+this.neg().toString(e)}for(var i=a(c(e,6),this.unsigned),o=this,s=\"\";;){var u=o.div(i),f=(o.sub(u.mul(i)).toInt()>>>0).toString(e);if((o=u).isZero())return f+s;for(;f.length<6;)f=\"0\"+f;s=\"\"+f+s}},O.getHighBits=function(){return this.high},O.getHighBitsUnsigned=function(){return this.high>>>0},O.getLowBits=function(){return this.low},O.getLowBitsUnsigned=function(){return this.low>>>0},O.getNumBitsAbs=function(){if(this.isNegative())return this.eq(N)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},O.isZero=function(){return 0===this.high&&0===this.low},O.eqz=O.isZero,O.isNegative=function(){return!this.unsigned&&this.high<0},O.isPositive=function(){return this.unsigned||this.high>=0},O.isOdd=function(){return 1==(1&this.low)},O.isEven=function(){return 0==(1&this.low)},O.equals=function(e){return i(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},O.eq=O.equals,O.notEquals=function(e){return!this.eq(e)},O.neq=O.notEquals,O.ne=O.notEquals,O.lessThan=function(e){return this.comp(e)<0},O.lt=O.lessThan,O.lessThanOrEqual=function(e){return this.comp(e)<=0},O.lte=O.lessThanOrEqual,O.le=O.lessThanOrEqual,O.greaterThan=function(e){return this.comp(e)>0},O.gt=O.greaterThan,O.greaterThanOrEqual=function(e){return this.comp(e)>=0},O.gte=O.greaterThanOrEqual,O.ge=O.greaterThanOrEqual,O.compare=function(e){if(i(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},O.comp=O.compare,O.negate=function(){return!this.unsigned&&this.eq(N)?N:this.not().add(v)},O.neg=O.negate,O.add=function(e){i(e)||(e=h(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,s=e.high>>>16,u=65535&e.high,a=e.low>>>16,c=0,l=0,p=0,d=0;return p+=(d+=o+(65535&e.low))>>>16,l+=(p+=n+a)>>>16,c+=(l+=r+u)>>>16,c+=t+s,f((p&=65535)<<16|(d&=65535),(c&=65535)<<16|(l&=65535),this.unsigned)},O.subtract=function(e){return i(e)||(e=h(e)),this.add(e.neg())},O.sub=O.subtract,O.multiply=function(e){if(this.isZero())return g;if(i(e)||(e=h(e)),r)return f(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(N))return e.isOdd()?N:g;if(e.eq(N))return this.isOdd()?N:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return a(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,o=this.low>>>16,s=65535&this.low,u=e.high>>>16,c=65535&e.high,l=e.low>>>16,p=65535&e.low,d=0,_=0,b=0,v=0;return b+=(v+=s*p)>>>16,_+=(b+=o*p)>>>16,b&=65535,_+=(b+=s*l)>>>16,d+=(_+=n*p)>>>16,_&=65535,d+=(_+=o*l)>>>16,_&=65535,d+=(_+=s*c)>>>16,d+=t*p+n*l+o*c+s*u,f((b&=65535)<<16|(v&=65535),(d&=65535)<<16|(_&=65535),this.unsigned)},O.mul=O.multiply,O.divide=function(e){if(i(e)||(e=h(e)),e.isZero())throw Error(\"division by zero\");var t,n,o;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?f((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return m;o=b}else{if(this.eq(N))return e.eq(v)||e.eq(E)?N:e.eq(N)?v:(t=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:E:(n=this.sub(e.mul(t)),o=t.add(n.div(e)));if(e.eq(N))return this.unsigned?b:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),u=s<=48?1:c(2,s-48),l=a(t),p=l.mul(e);p.isNegative()||p.gt(n);)p=(l=a(t-=u,this.unsigned)).mul(e);l.isZero()&&(l=v),o=o.add(l),n=n.sub(p)}return o},O.div=O.divide,O.modulo=function(e){return i(e)||(e=h(e)),r?f((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},O.mod=O.modulo,O.rem=O.modulo,O.not=function(){return f(~this.low,~this.high,this.unsigned)},O.and=function(e){return i(e)||(e=h(e)),f(this.low&e.low,this.high&e.high,this.unsigned)},O.or=function(e){return i(e)||(e=h(e)),f(this.low|e.low,this.high|e.high,this.unsigned)},O.xor=function(e){return i(e)||(e=h(e)),f(this.low^e.low,this.high^e.high,this.unsigned)},O.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?f(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):f(0,this.low<<e-32,this.unsigned)},O.shl=O.shiftLeft,O.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?f(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):f(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},O.shr=O.shiftRight,O.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?f(this.low>>>e|t<<32-e,t>>>e,this.unsigned):f(32===e?t:t>>>e-32,0,this.unsigned)},O.shru=O.shiftRightUnsigned,O.shr_u=O.shiftRightUnsigned,O.toSigned=function(){return this.unsigned?f(this.low,this.high,!1):this},O.toUnsigned=function(){return this.unsigned?this:f(this.low,this.high,!0)},O.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},O.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},O.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,r){\"use strict\";t.byteLength=function(e){var t=f(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=f(e),s=n[0],u=n[1],a=new o(function(e,t,r){return 3*(t+r)/4-r}(0,s,u)),c=0,l=u>0?s-4:s;for(r=0;r<l;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;2===u&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,a[c++]=255&t);1===u&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t);return a},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,u=r-i;s<u;s+=16383)o.push(c(e,s,s+16383>u?u:s+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+\"==\")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+\"=\"));return o.join(\"\")};for(var n=[],i=[],o=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,s=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",u=0,a=s.length;u<a;++u)n[u]=s[u],i[s.charCodeAt(u)]=u;function f(e){var t=e.length;if(t%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var r=e.indexOf(\"=\");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var i,o,s=[],u=t;u<r;u+=3)i=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join(\"\")}i[\"-\".charCodeAt(0)]=62,i[\"_\".charCodeAt(0)]=63},function(e,t){var r;r=function(){return this}();try{r=r||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(r=window)}e.exports=r},function(e,t,r){(function(t){function r(e){var t=o([[\"iOS\",/iP(hone|od|ad)/],[\"Android OS\",/Android/],[\"BlackBerry OS\",/BlackBerry|BB10/],[\"Windows Mobile\",/IEMobile/],[\"Amazon OS\",/Kindle/],[\"Windows 3.11\",/Win16/],[\"Windows 95\",/(Windows 95)|(Win95)|(Windows_95)/],[\"Windows 98\",/(Windows 98)|(Win98)/],[\"Windows 2000\",/(Windows NT 5.0)|(Windows 2000)/],[\"Windows XP\",/(Windows NT 5.1)|(Windows XP)/],[\"Windows Server 2003\",/(Windows NT 5.2)/],[\"Windows Vista\",/(Windows NT 6.0)/],[\"Windows 7\",/(Windows NT 6.1)/],[\"Windows 8\",/(Windows NT 6.2)/],[\"Windows 8.1\",/(Windows NT 6.3)/],[\"Windows 10\",/(Windows NT 10.0)/],[\"Windows ME\",/Windows ME/],[\"Open BSD\",/OpenBSD/],[\"Sun OS\",/SunOS/],[\"Linux\",/(Linux)|(X11)/],[\"Mac OS\",/(Mac_PowerPC)|(Macintosh)/],[\"QNX\",/QNX/],[\"BeOS\",/BeOS/],[\"OS/2\",/OS\\/2/],[\"Search Bot\",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\\/Teoma)|(ia_archiver)/]]).filter((function(t){return t.rule&&t.rule.test(e)}))[0];return t?t.name:null}function n(){return void 0!==t&&t.version&&{name:\"node\",version:t.version.slice(1),os:t.platform}}function i(e){var t=o([[\"aol\",/AOLShield\\/([0-9\\._]+)/],[\"edge\",/Edge\\/([0-9\\._]+)/],[\"yandexbrowser\",/YaBrowser\\/([0-9\\._]+)/],[\"vivaldi\",/Vivaldi\\/([0-9\\.]+)/],[\"kakaotalk\",/KAKAOTALK\\s([0-9\\.]+)/],[\"samsung\",/SamsungBrowser\\/([0-9\\.]+)/],[\"chrome\",/(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/],[\"phantomjs\",/PhantomJS\\/([0-9\\.]+)(:?\\s|$)/],[\"crios\",/CriOS\\/([0-9\\.]+)(:?\\s|$)/],[\"firefox\",/Firefox\\/([0-9\\.]+)(?:\\s|$)/],[\"fxios\",/FxiOS\\/([0-9\\.]+)/],[\"opera\",/Opera\\/([0-9\\.]+)(?:\\s|$)/],[\"opera\",/OPR\\/([0-9\\.]+)(:?\\s|$)$/],[\"ie\",/Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/],[\"ie\",/MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/],[\"ie\",/MSIE\\s(7\\.0)/],[\"bb10\",/BB10;\\sTouch.*Version\\/([0-9\\.]+)/],[\"android\",/Android\\s([0-9\\.]+)/],[\"ios\",/Version\\/([0-9\\._]+).*Mobile.*Safari.*/],[\"safari\",/Version\\/([0-9\\._]+).*Safari/],[\"facebook\",/FBAV\\/([0-9\\.]+)/],[\"instagram\",/Instagram\\s([0-9\\.]+)/],[\"ios-webview\",/AppleWebKit\\/([0-9\\.]+).*Mobile/]]);if(!e)return null;var n=t.map((function(t){var r=t.rule.exec(e),n=r&&r[1].split(/[._]/).slice(0,3);return n&&n.length<3&&(n=n.concat(1==n.length?[0,0]:[0])),r&&{name:t.name,version:n.join(\".\")}})).filter(Boolean)[0]||null;return n&&(n.os=r(e)),/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/i.test(e)&&((n=n||{}).bot=!0),n}function o(e){return e.map((function(e){return{name:e[0],rule:e[1]}}))}e.exports={detect:function(){return\"undefined\"!=typeof navigator?i(navigator.userAgent):n()},detectOS:r,getNodeVersion:n,parseUserAgent:i}}).call(this,r(9))},function(module,__webpack_exports__,__webpack_require__){\"use strict\";(function(global,Buffer){var long__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),long__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(long__WEBPACK_IMPORTED_MODULE_0__),buffer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),buffer__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(buffer__WEBPACK_IMPORTED_MODULE_1__),commonjsGlobal=\"undefined\"!=typeof window?window:void 0!==global?global:\"undefined\"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var map=createCommonjsModule((function(e){if(void 0!==commonjsGlobal.Map)e.exports=commonjsGlobal.Map,e.exports.Map=commonjsGlobal.Map;else{var t=function(e){this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(null!=e[t]){var r=e[t],n=r[0],i=r[1];this._keys.push(n),this._values[n]={v:i,i:this._keys.length-1}}};t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(e){var t=this._values[e];return null!=t&&(delete this._values[e],this._keys.splice(t.i,1),!0)},t.prototype.entries=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?[r,e._values[r].v]:void 0,done:void 0===r}}}},t.prototype.forEach=function(e,t){t=t||this;for(var r=0;r<this._keys.length;r++){var n=this._keys[r];e.call(t,this._values[n].v,n,t)}},t.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},t.prototype.has=function(e){return null!=this._values[e]},t.prototype.keys=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?r:void 0,done:void 0===r}}}},t.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},t.prototype.values=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?e._values[r].v:void 0,done:void 0===r}}}},Object.defineProperty(t.prototype,\"size\",{enumerable:!0,get:function(){return this._keys.length}}),e.exports=t}})),map_1=map.Map;long__WEBPACK_IMPORTED_MODULE_0___default.a.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},long__WEBPACK_IMPORTED_MODULE_0___default.a.fromExtendedJSON=function(e,t){var r=long__WEBPACK_IMPORTED_MODULE_0___default.a.fromString(e.$numberLong);return t&&t.relaxed?r.toNumber():r},Object.defineProperty(long__WEBPACK_IMPORTED_MODULE_0___default.a.prototype,\"_bsontype\",{value:\"Long\"});var long_1=long__WEBPACK_IMPORTED_MODULE_0___default.a;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var Double=function(){function e(t){_classCallCheck(this,e),this.value=t}return _createClass(e,[{key:\"valueOf\",value:function(){return this.value}},{key:\"toJSON\",value:function(){return this.value}},{key:\"toExtendedJSON\",value:function(e){return e&&e.relaxed&&isFinite(this.value)?this.value:{$numberDouble:this.value.toString()}}}],[{key:\"fromExtendedJSON\",value:function(t,r){return r&&r.relaxed?parseFloat(t.$numberDouble):new e(parseFloat(t.$numberDouble))}}]),e}();Object.defineProperty(Double.prototype,\"_bsontype\",{value:\"Double\"});var double_1=Double;function _typeof(e){return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$1(e,t,r){return t&&_defineProperties$1(e.prototype,t),r&&_defineProperties$1(e,r),e}function _possibleConstructorReturn(e,t){return!t||\"object\"!==_typeof(t)&&\"function\"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Timestamp=function(e){function t(e,r){var n;return _classCallCheck$1(this,t),n=long_1.isLong(e)?_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e.low,e.high)):_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r)),_possibleConstructorReturn(n)}return _inherits(t,e),_createClass$1(t,[{key:\"toJSON\",value:function(){return{$timestamp:this.toString()}}},{key:\"toExtendedJSON\",value:function(){return{$timestamp:{t:this.high,i:this.low}}}}],[{key:\"fromInt\",value:function(e){return new t(long_1.fromInt(e))}},{key:\"fromNumber\",value:function(e){return new t(long_1.fromNumber(e))}},{key:\"fromBits\",value:function(e,r){return new t(e,r)}},{key:\"fromString\",value:function(e,r){return new t(long_1.fromString(e,r))}},{key:\"fromExtendedJSON\",value:function(e){return new t(e.$timestamp.i,e.$timestamp.t)}}]),t}(long_1);Object.defineProperty(Timestamp.prototype,\"_bsontype\",{value:\"Timestamp\"});var timestamp=Timestamp,require$$0={};function normalizedFunctionString(e){return e.toString().replace(\"function(\",\"function (\")}function insecureRandomBytes(e){for(var t=new Uint8Array(e),r=0;r<e;++r)t[r]=Math.floor(256*Math.random());return t}var randomBytes=insecureRandomBytes;if(\"undefined\"!=typeof window&&window.crypto&&window.crypto.getRandomValues)randomBytes=function(e){return window.crypto.getRandomValues(new Uint8Array(e))};else{try{randomBytes=require$$0.randomBytes}catch(e){}null==randomBytes&&(randomBytes=insecureRandomBytes)}var utils={normalizedFunctionString:normalizedFunctionString,randomBytes:randomBytes};function defaultSetTimout(){throw new Error(\"setTimeout has not been defined\")}function defaultClearTimeout(){throw new Error(\"clearTimeout has not been defined\")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}\"function\"==typeof global.setTimeout&&(cachedSetTimeout=setTimeout),\"function\"==typeof global.clearTimeout&&(cachedClearTimeout=clearTimeout);var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title=\"browser\",platform=\"browser\",browser=!0,env={},argv=[],version=\"\",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding(e){throw new Error(\"process.binding is not supported\")}function cwd(){return\"/\"}function chdir(e){throw new Error(\"process.chdir is not supported\")}function umask(){return 0}var performance=global.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function hrtime(e){var t=.001*performanceNow.call(performance),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]}var startTime=new Date;function uptime(){return(new Date-startTime)/1e3}var process={nextTick:nextTick,title:title,browser:browser,env:env,argv:argv,version:version,versions:versions,on:on,addListener:addListener,once:once,off:off,removeListener:removeListener,removeAllListeners:removeAllListeners,emit:emit,binding:binding,cwd:cwd,chdir:chdir,umask:umask,hrtime:hrtime,platform:platform,release:release,config:config,uptime:uptime},inherits;inherits=\"function\"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e};var inherits$1=inherits;function _typeof$1(e){return(_typeof$1=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var formatRegExp=/%[sdj%]/g;function format(e){if(!isString(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(inspect(arguments[r]));return t.join(\" \")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(formatRegExp,(function(e){if(\"%%\"===e)return\"%\";if(r>=i)return e;switch(e){case\"%s\":return String(n[r++]);case\"%d\":return Number(n[r++]);case\"%j\":try{return JSON.stringify(n[r++])}catch(e){return\"[Circular]\"}default:return e}})),s=n[r];r<i;s=n[++r])isNull(s)||!isObject(s)?o+=\" \"+s:o+=\" \"+inspect(s);return o}function deprecate(e,t){if(isUndefined(global.process))return function(){return deprecate(e,t).apply(this,arguments)};var r=!1;return function(){return r||(console.error(t),r=!0),e.apply(this,arguments)}}var debugs={},debugEnviron;function debuglog(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||\"\"),e=e.toUpperCase(),!debugs[e])if(new RegExp(\"\\\\b\"+e+\"\\\\b\",\"i\").test(debugEnviron)){debugs[e]=function(){var t=format.apply(null,arguments);console.error(\"%s %d: %s\",e,0,t)}}else debugs[e]=function(){};return debugs[e]}function inspect(e,t){var r={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),isBoolean(t)?r.showHidden=t:t&&_extend(r,t),isUndefined(r.showHidden)&&(r.showHidden=!1),isUndefined(r.depth)&&(r.depth=2),isUndefined(r.colors)&&(r.colors=!1),isUndefined(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=stylizeWithColor),formatValue(r,e,r.depth)}function stylizeWithColor(e,t){var r=inspect.styles[t];return r?\"\u001b[\"+inspect.colors[r][0]+\"m\"+e+\"\u001b[\"+inspect.colors[r][1]+\"m\":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}function formatValue(e,t,r){if(e.customInspect&&t&&isFunction(t.inspect)&&t.inspect!==inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return isString(n)||(n=formatValue(e,n,r)),n}var i=formatPrimitive(e,t);if(i)return i;var o=Object.keys(t),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),isError(t)&&(o.indexOf(\"message\")>=0||o.indexOf(\"description\")>=0))return formatError(t);if(0===o.length){if(isFunction(t)){var u=t.name?\": \"+t.name:\"\";return e.stylize(\"[Function\"+u+\"]\",\"special\")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),\"regexp\");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),\"date\");if(isError(t))return formatError(t)}var a,f=\"\",c=!1,l=[\"{\",\"}\"];(isArray(t)&&(c=!0,l=[\"[\",\"]\"]),isFunction(t))&&(f=\" [Function\"+(t.name?\": \"+t.name:\"\")+\"]\");return isRegExp(t)&&(f=\" \"+RegExp.prototype.toString.call(t)),isDate(t)&&(f=\" \"+Date.prototype.toUTCString.call(t)),isError(t)&&(f=\" \"+formatError(t)),0!==o.length||c&&0!=t.length?r<0?isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),\"regexp\"):e.stylize(\"[Object]\",\"special\"):(e.seen.push(t),a=c?formatArray(e,t,r,s,o):o.map((function(n){return formatProperty(e,t,r,s,n,c)})),e.seen.pop(),reduceToSingleString(a,f,l)):l[0]+f+l[1]}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize(\"undefined\",\"undefined\");if(isString(t)){var r=\"'\"+JSON.stringify(t).replace(/^\"|\"$/g,\"\").replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"')+\"'\";return e.stylize(r,\"string\")}return isNumber(t)?e.stylize(\"\"+t,\"number\"):isBoolean(t)?e.stylize(\"\"+t,\"boolean\"):isNull(t)?e.stylize(\"null\",\"null\"):void 0}function formatError(e){return\"[\"+Error.prototype.toString.call(e)+\"]\"}function formatArray(e,t,r,n,i){for(var o=[],s=0,u=t.length;s<u;++s)hasOwnProperty(t,String(s))?o.push(formatProperty(e,t,r,n,String(s),!0)):o.push(\"\");return i.forEach((function(i){i.match(/^\\d+$/)||o.push(formatProperty(e,t,r,n,i,!0))})),o}function formatProperty(e,t,r,n,i,o){var s,u,a;if((a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=a.set?e.stylize(\"[Getter/Setter]\",\"special\"):e.stylize(\"[Getter]\",\"special\"):a.set&&(u=e.stylize(\"[Setter]\",\"special\")),hasOwnProperty(n,i)||(s=\"[\"+i+\"]\"),u||(e.seen.indexOf(a.value)<0?(u=isNull(r)?formatValue(e,a.value,null):formatValue(e,a.value,r-1)).indexOf(\"\\n\")>-1&&(u=o?u.split(\"\\n\").map((function(e){return\"  \"+e})).join(\"\\n\").substr(2):\"\\n\"+u.split(\"\\n\").map((function(e){return\"   \"+e})).join(\"\\n\")):u=e.stylize(\"[Circular]\",\"special\")),isUndefined(s)){if(o&&i.match(/^\\d+$/))return u;(s=JSON.stringify(\"\"+i)).match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,\"name\")):(s=s.replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"').replace(/(^\"|\"$)/g,\"'\"),s=e.stylize(s,\"string\"))}return s+\": \"+u}function reduceToSingleString(e,t,r){return e.reduce((function(e,t){return t.indexOf(\"\\n\"),e+t.replace(/\\u001b\\[\\d\\d?m/g,\"\").length+1}),0)>60?r[0]+(\"\"===t?\"\":t+\"\\n \")+\" \"+e.join(\",\\n  \")+\" \"+r[1]:r[0]+t+\" \"+e.join(\", \")+\" \"+r[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return\"boolean\"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return\"number\"==typeof e}function isString(e){return\"string\"==typeof e}function isSymbol(e){return\"symbol\"===_typeof$1(e)}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&\"[object RegExp]\"===objectToString(e)}function isObject(e){return\"object\"===_typeof$1(e)&&null!==e}function isDate(e){return isObject(e)&&\"[object Date]\"===objectToString(e)}function isError(e){return isObject(e)&&(\"[object Error]\"===objectToString(e)||e instanceof Error)}function isFunction(e){return\"function\"==typeof e}function isPrimitive(e){return null===e||\"boolean\"==typeof e||\"number\"==typeof e||\"string\"==typeof e||\"symbol\"===_typeof$1(e)||void 0===e}function isBuffer(e){return Buffer.isBuffer(e)}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?\"0\"+e.toString(10):e.toString(10)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:\"cyan\",number:\"yellow\",boolean:\"yellow\",undefined:\"grey\",null:\"bold\",string:\"green\",date:\"magenta\",regexp:\"red\"};var months=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];function timestamp$1(){var e=new Date,t=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(\":\");return[e.getDate(),months[e.getMonth()],t].join(\" \")}function log(){console.log(\"%s - %s\",timestamp$1(),format.apply(null,arguments))}function _extend(e,t){if(!t||!isObject(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var util={inherits:inherits$1,_extend:_extend,log:log,isBuffer:isBuffer,isPrimitive:isPrimitive,isFunction:isFunction,isError:isError,isDate:isDate,isObject:isObject,isRegExp:isRegExp,isUndefined:isUndefined,isSymbol:isSymbol,isString:isString,isNumber:isNumber,isNullOrUndefined:isNullOrUndefined,isNull:isNull,isBoolean:isBoolean,isArray:isArray,inspect:inspect,deprecate:deprecate,format:format,debuglog:debuglog};function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$2(e,t,r){return t&&_defineProperties$2(e.prototype,t),r&&_defineProperties$2(e,r),e}var Buffer$1=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,randomBytes$1=utils.randomBytes,deprecate$1=util.deprecate,PROCESS_UNIQUE=randomBytes$1(5),checkForHexRegExp=new RegExp(\"^[0-9a-fA-F]{24}$\"),hasBufferType=!1;try{Buffer$1&&Buffer$1.from&&(hasBufferType=!0)}catch(e){hasBufferType=!1}for(var hexTable=[],_i=0;_i<256;_i++)hexTable[_i]=(_i<=15?\"0\":\"\")+_i.toString(16);for(var decodeLookup=[],i=0;i<10;)decodeLookup[48+i]=i++;for(;i<16;)decodeLookup[55+i]=decodeLookup[87+i]=i++;var _Buffer=Buffer$1;function convertToHex(e){return e.toString(\"hex\")}function makeObjectIdError(e,t){var r=e[t];return new TypeError('ObjectId string \"'.concat(e,'\" contains invalid character \"').concat(r,'\" with character code (').concat(e.charCodeAt(t),\"). All character codes for a non-hex string must be less than 256.\"))}var ObjectId=function(){function e(t){if(_classCallCheck$2(this,e),t instanceof e)return t;if(null==t||\"number\"==typeof t)return this.id=e.generate(t),void(e.cacheHexString&&(this.__id=this.toString(\"hex\")));var r=e.isValid(t);if(!r&&null!=t)throw new TypeError(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\");if(r&&\"string\"==typeof t&&24===t.length&&hasBufferType)return new e(Buffer$1.from(t,\"hex\"));if(r&&\"string\"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return e.createFromHexString(t.toHexString());throw new TypeError(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\")}this.id=t,e.cacheHexString&&(this.__id=this.toString(\"hex\"))}return _createClass$2(e,[{key:\"toHexString\",value:function(){if(e.cacheHexString&&this.__id)return this.__id;var t=\"\";if(!this.id||!this.id.length)throw new TypeError(\"invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is [\"+JSON.stringify(this.id)+\"]\");if(this.id instanceof _Buffer)return t=convertToHex(this.id),e.cacheHexString&&(this.__id=t),t;for(var r=0;r<this.id.length;r++){var n=hexTable[this.id.charCodeAt(r)];if(\"string\"!=typeof n)throw makeObjectIdError(this.id,r);t+=n}return e.cacheHexString&&(this.__id=t),t}},{key:\"toString\",value:function(e){return this.id&&this.id.copy?this.id.toString(\"string\"==typeof e?e:\"hex\"):this.toHexString()}},{key:\"toJSON\",value:function(){return this.toHexString()}},{key:\"equals\",value:function(t){return t instanceof e?this.toString()===t.toString():\"string\"==typeof t&&e.isValid(t)&&12===t.length&&this.id instanceof _Buffer?t===this.id.toString(\"binary\"):\"string\"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():\"string\"==typeof t&&e.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof e||t.toHexString))&&t.toHexString()===this.toHexString()}},{key:\"getTimestamp\",value:function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e}},{key:\"toExtendedJSON\",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString(\"hex\")}}}],[{key:\"getInc\",value:function(){return e.index=(e.index+1)%16777215}},{key:\"generate\",value:function(t){\"number\"!=typeof t&&(t=~~(Date.now()/1e3));var r=e.getInc(),n=Buffer$1.alloc(12);return n[3]=255&t,n[2]=t>>8&255,n[1]=t>>16&255,n[0]=t>>24&255,n[4]=PROCESS_UNIQUE[0],n[5]=PROCESS_UNIQUE[1],n[6]=PROCESS_UNIQUE[2],n[7]=PROCESS_UNIQUE[3],n[8]=PROCESS_UNIQUE[4],n[11]=255&r,n[10]=r>>8&255,n[9]=r>>16&255,n}},{key:\"createPk\",value:function(){return new e}},{key:\"createFromTime\",value:function(t){var r=Buffer$1.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,new e(r)}},{key:\"createFromHexString\",value:function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\");if(hasBufferType)return new e(Buffer$1.from(t,\"hex\"));for(var r=new _Buffer(12),n=0,i=0;i<24;)r[n++]=decodeLookup[t.charCodeAt(i++)]<<4|decodeLookup[t.charCodeAt(i++)];return new e(r)}},{key:\"isValid\",value:function(t){return null!=t&&(\"number\"==typeof t||(\"string\"==typeof t?12===t.length||24===t.length&&checkForHexRegExp.test(t):t instanceof e||(t instanceof _Buffer&&12===t.length||!!t.toHexString&&(12===t.id.length||24===t.id.length&&checkForHexRegExp.test(t.id)))))}},{key:\"fromExtendedJSON\",value:function(t){return new e(t.$oid)}}]),e}();ObjectId.get_inc=deprecate$1((function(){return ObjectId.getInc()}),\"Please use the static `ObjectId.getInc()` instead\"),ObjectId.prototype.get_inc=deprecate$1((function(){return ObjectId.getInc()}),\"Please use the static `ObjectId.getInc()` instead\"),ObjectId.prototype.getInc=deprecate$1((function(){return ObjectId.getInc()}),\"Please use the static `ObjectId.getInc()` instead\"),ObjectId.prototype.generate=deprecate$1((function(e){return ObjectId.generate(e)}),\"Please use the static `ObjectId.generate(time)` instead\"),Object.defineProperty(ObjectId.prototype,\"generationTime\",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),ObjectId.prototype[util.inspect.custom||\"inspect\"]=ObjectId.prototype.toString,ObjectId.index=~~(16777215*Math.random()),Object.defineProperty(ObjectId.prototype,\"_bsontype\",{value:\"ObjectID\"});var objectid=ObjectId;function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$3(e,t,r){return t&&_defineProperties$3(e.prototype,t),r&&_defineProperties$3(e,r),e}function alphabetize(e){return e.split(\"\").sort().join(\"\")}var BSONRegExp=function(){function e(t,r){_classCallCheck$3(this,e),this.pattern=t||\"\",this.options=r?alphabetize(r):\"\";for(var n=0;n<this.options.length;n++)if(\"i\"!==this.options[n]&&\"m\"!==this.options[n]&&\"x\"!==this.options[n]&&\"l\"!==this.options[n]&&\"s\"!==this.options[n]&&\"u\"!==this.options[n])throw new Error(\"The regular expression option [\".concat(this.options[n],\"] is not supported\"))}return _createClass$3(e,[{key:\"toExtendedJSON\",value:function(){return{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:\"fromExtendedJSON\",value:function(t){return new e(t.$regularExpression.pattern,t.$regularExpression.options.split(\"\").sort().join(\"\"))}}]),e}();Object.defineProperty(BSONRegExp.prototype,\"_bsontype\",{value:\"BSONRegExp\"});var regexp=BSONRegExp;function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$4(e,t,r){return t&&_defineProperties$4(e.prototype,t),r&&_defineProperties$4(e,r),e}var BSONSymbol=function(){function e(t){_classCallCheck$4(this,e),this.value=t}return _createClass$4(e,[{key:\"valueOf\",value:function(){return this.value}},{key:\"toString\",value:function(){return this.value}},{key:\"inspect\",value:function(){return this.value}},{key:\"toJSON\",value:function(){return this.value}},{key:\"toExtendedJSON\",value:function(){return{$symbol:this.value}}}],[{key:\"fromExtendedJSON\",value:function(t){return new e(t.$symbol)}}]),e}();Object.defineProperty(BSONSymbol.prototype,\"_bsontype\",{value:\"Symbol\"});var symbol=BSONSymbol;function _classCallCheck$5(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$5(e,t,r){return t&&_defineProperties$5(e.prototype,t),r&&_defineProperties$5(e,r),e}var Int32=function(){function e(t){_classCallCheck$5(this,e),this.value=t}return _createClass$5(e,[{key:\"valueOf\",value:function(){return this.value}},{key:\"toJSON\",value:function(){return this.value}},{key:\"toExtendedJSON\",value:function(e){return e&&e.relaxed?this.value:{$numberInt:this.value.toString()}}}],[{key:\"fromExtendedJSON\",value:function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)}}]),e}();Object.defineProperty(Int32.prototype,\"_bsontype\",{value:\"Int32\"});var int_32=Int32;function _classCallCheck$6(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$6(e,t,r){return t&&_defineProperties$6(e.prototype,t),r&&_defineProperties$6(e,r),e}var Code=function(){function e(t,r){_classCallCheck$6(this,e),this.code=t,this.scope=r}return _createClass$6(e,[{key:\"toJSON\",value:function(){return{scope:this.scope,code:this.code}}},{key:\"toExtendedJSON\",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:\"fromExtendedJSON\",value:function(t){return new e(t.$code,t.$scope)}}]),e}();Object.defineProperty(Code.prototype,\"_bsontype\",{value:\"Code\"});var code=Code,Buffer$2=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,PARSE_STRING_REGEXP=/^(\\+|-)?(\\d+|(\\d*\\.\\d*))?(E|e)?([-+])?(\\d+)?$/,PARSE_INF_REGEXP=/^(\\+|-)?(Infinity|inf)$/i,PARSE_NAN_REGEXP=/^(\\+|-)?NaN$/i,EXPONENT_MAX=6111,EXPONENT_MIN=-6176,EXPONENT_BIAS=6176,MAX_DIGITS=34,NAN_BUFFER=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_NEGATIVE_BUFFER=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_POSITIVE_BUFFER=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),EXPONENT_REGEX=/^([-+])?(\\d+)?$/;function isDigit(e){return!isNaN(parseInt(e,10))}function divideu128(e){var t=long_1.fromNumber(1e9),r=long_1.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new long_1(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function multiply64x2(e,t){if(!e&&!t)return{high:long_1.fromNumber(0),low:long_1.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new long_1(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new long_1(t.getLowBits(),0),s=r.multiply(i),u=r.multiply(o),a=n.multiply(i),f=n.multiply(o);return s=s.add(u.shiftRightUnsigned(32)),u=new long_1(u.getLowBits(),0).add(a).add(f.shiftRightUnsigned(32)),{high:s=s.add(u.shiftRightUnsigned(32)),low:f=u.shiftLeft(32).add(new long_1(f.getLowBits(),0))}}function lessThan(e,t){var r=e.high>>>0,n=t.high>>>0;return r<n||r===n&&e.low>>>0<t.low>>>0}function invalidErr(e,t){throw new TypeError('\"'.concat(e,'\" is not a valid Decimal128 string - ').concat(t))}function Decimal128(e){this.bytes=e}Decimal128.fromString=function(e){var t,r=!1,n=!1,i=!1,o=0,s=0,u=0,a=0,f=0,c=[0],l=0,h=0,p=0,d=0,_=0,y=0,g=[0,0],b=[0,0],v=0;if(e.length>=7e3)throw new TypeError(e+\" not a valid Decimal128 string\");var m=e.match(PARSE_STRING_REGEXP),E=e.match(PARSE_INF_REGEXP),A=e.match(PARSE_NAN_REGEXP);if(!m&&!E&&!A||0===e.length)throw new TypeError(e+\" not a valid Decimal128 string\");if(m){var w=m[2],N=m[4],O=m[5],S=m[6];N&&void 0===S&&invalidErr(e,\"missing exponent power\"),N&&void 0===w&&invalidErr(e,\"missing exponent base\"),void 0===N&&(O||S)&&invalidErr(e,\"missing e before exponent\")}if(\"+\"!==e[v]&&\"-\"!==e[v]||(r=\"-\"===e[v++]),!isDigit(e[v])&&\".\"!==e[v]){if(\"i\"===e[v]||\"I\"===e[v])return new Decimal128(Buffer$2.from(r?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));if(\"N\"===e[v])return new Decimal128(Buffer$2.from(NAN_BUFFER))}for(;isDigit(e[v])||\".\"===e[v];)\".\"!==e[v]?(l<34&&(\"0\"!==e[v]||i)&&(i||(f=s),i=!0,c[h++]=parseInt(e[v],10),l+=1),i&&(u+=1),n&&(a+=1),s+=1,v+=1):(n&&invalidErr(e,\"contains multiple periods\"),n=!0,v+=1);if(n&&!s)throw new TypeError(e+\" not a valid Decimal128 string\");if(\"e\"===e[v]||\"E\"===e[v]){var T=e.substr(++v).match(EXPONENT_REGEX);if(!T||!T[2])return new Decimal128(Buffer$2.from(NAN_BUFFER));_=parseInt(T[0],10),v+=T[0].length}if(e[v])return new Decimal128(Buffer$2.from(NAN_BUFFER));if(p=0,l){if(d=l-1,1!==(o=u))for(;\"0\"===e[f+o-1];)o-=1}else p=0,d=0,c[0]=0,u=1,l=1,o=0;for(_<=a&&a-_>16384?_=EXPONENT_MIN:_-=a;_>EXPONENT_MAX;){if((d+=1)-p>MAX_DIGITS){if(c.join(\"\").match(/^0+$/)){_=EXPONENT_MAX;break}invalidErr(e,\"overflow\")}_-=1}for(;_<EXPONENT_MIN||l<u;){if(0===d&&o<l){_=EXPONENT_MIN,o=0;break}if(l<u?u-=1:d-=1,_<EXPONENT_MAX)_+=1;else{if(c.join(\"\").match(/^0+$/)){_=EXPONENT_MAX;break}invalidErr(e,\"overflow\")}}if(d-p+1<o){var B=s;n&&(f+=1,B+=1),r&&(f+=1,B+=1);var I=parseInt(e[f+d+1],10),R=0;if(I>=5&&(R=1,5===I))for(R=c[d]%2==1,y=f+d+2;y<B;y++)if(parseInt(e[y],10)){R=1;break}if(R)for(var D=d;D>=0;D--)if(++c[D]>9&&(c[D]=0,0===D)){if(!(_<EXPONENT_MAX))return new Decimal128(Buffer$2.from(r?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));_+=1,c[D]=1}}if(g=long_1.fromNumber(0),b=long_1.fromNumber(0),0===o)g=long_1.fromNumber(0),b=long_1.fromNumber(0);else if(d-p<17){var P=p;for(b=long_1.fromNumber(c[P++]),g=new long_1(0,0);P<=d;P++)b=(b=b.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[P]))}else{var U=p;for(g=long_1.fromNumber(c[U++]);U<=d-17;U++)g=(g=g.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[U]));for(b=long_1.fromNumber(c[U++]);U<=d;U++)b=(b=b.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[U]))}var C=multiply64x2(g,long_1.fromString(\"100000000000000000\"));C.low=C.low.add(b),lessThan(C.low,b)&&(C.high=C.high.add(long_1.fromNumber(1))),t=_+EXPONENT_BIAS;var $={low:long_1.fromNumber(0),high:long_1.fromNumber(0)};C.high.shiftRightUnsigned(49).and(long_1.fromNumber(1)).equals(long_1.fromNumber(1))?($.high=$.high.or(long_1.fromNumber(3).shiftLeft(61)),$.high=$.high.or(long_1.fromNumber(t).and(long_1.fromNumber(16383).shiftLeft(47))),$.high=$.high.or(C.high.and(long_1.fromNumber(0x7fffffffffff)))):($.high=$.high.or(long_1.fromNumber(16383&t).shiftLeft(49)),$.high=$.high.or(C.high.and(long_1.fromNumber(562949953421311)))),$.low=C.low,r&&($.high=$.high.or(long_1.fromString(\"9223372036854775808\")));var x=Buffer$2.alloc(16);return v=0,x[v++]=255&$.low.low,x[v++]=$.low.low>>8&255,x[v++]=$.low.low>>16&255,x[v++]=$.low.low>>24&255,x[v++]=255&$.low.high,x[v++]=$.low.high>>8&255,x[v++]=$.low.high>>16&255,x[v++]=$.low.high>>24&255,x[v++]=255&$.high.low,x[v++]=$.high.low>>8&255,x[v++]=$.high.low>>16&255,x[v++]=$.high.low>>24&255,x[v++]=255&$.high.high,x[v++]=$.high.high>>8&255,x[v++]=$.high.high>>16&255,x[v++]=$.high.high>>24&255,new Decimal128(x)};var COMBINATION_MASK=31,EXPONENT_MASK=16383,COMBINATION_INFINITY=30,COMBINATION_NAN=31;Decimal128.prototype.toString=function(){for(var e,t,r,n,i,o,s=0,u=new Array(36),a=0;a<u.length;a++)u[a]=0;var f,c,l,h,p,d=0,_=!1,y={parts:new Array(4)},g=[];d=0;var b=this.bytes;if(n=b[d++]|b[d++]<<8|b[d++]<<16|b[d++]<<24,r=b[d++]|b[d++]<<8|b[d++]<<16|b[d++]<<24,t=b[d++]|b[d++]<<8|b[d++]<<16|b[d++]<<24,e=b[d++]|b[d++]<<8|b[d++]<<16|b[d++]<<24,d=0,{low:new long_1(n,r),high:new long_1(t,e)}.high.lessThan(long_1.ZERO)&&g.push(\"-\"),(i=e>>26&COMBINATION_MASK)>>3==3){if(i===COMBINATION_INFINITY)return g.join(\"\")+\"Infinity\";if(i===COMBINATION_NAN)return\"NaN\";o=e>>15&EXPONENT_MASK,l=8+(e>>14&1)}else l=e>>14&7,o=e>>17&EXPONENT_MASK;if(f=o-EXPONENT_BIAS,y.parts[0]=(16383&e)+((15&l)<<14),y.parts[1]=t,y.parts[2]=r,y.parts[3]=n,0===y.parts[0]&&0===y.parts[1]&&0===y.parts[2]&&0===y.parts[3])_=!0;else for(p=3;p>=0;p--){var v=0,m=divideu128(y);if(y=m.quotient,v=m.rem.low)for(h=8;h>=0;h--)u[9*p+h]=v%10,v=Math.floor(v/10)}if(_)s=1,u[d]=0;else for(s=36;!u[d];)s-=1,d+=1;if((c=s-1+f)>=34||c<=-7||f>0){if(s>34)return g.push(0),f>0?g.push(\"E+\"+f):f<0&&g.push(\"E\"+f),g.join(\"\");g.push(u[d++]),(s-=1)&&g.push(\".\");for(var E=0;E<s;E++)g.push(u[d++]);g.push(\"E\"),c>0?g.push(\"+\"+c):g.push(c)}else if(f>=0)for(var A=0;A<s;A++)g.push(u[d++]);else{var w=s+f;if(w>0)for(var N=0;N<w;N++)g.push(u[d++]);else g.push(\"0\");for(g.push(\".\");w++<0;)g.push(\"0\");for(var O=0;O<s-Math.max(w-1,0);O++)g.push(u[d++])}return g.join(\"\")},Decimal128.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.fromExtendedJSON=function(e){return Decimal128.fromString(e.$numberDecimal)},Object.defineProperty(Decimal128.prototype,\"_bsontype\",{value:\"Decimal128\"});var decimal128=Decimal128;function _classCallCheck$7(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$7(e,t,r){return t&&_defineProperties$7(e.prototype,t),r&&_defineProperties$7(e,r),e}var MinKey=function(){function e(){_classCallCheck$7(this,e)}return _createClass$7(e,[{key:\"toExtendedJSON\",value:function(){return{$minKey:1}}}],[{key:\"fromExtendedJSON\",value:function(){return new e}}]),e}();Object.defineProperty(MinKey.prototype,\"_bsontype\",{value:\"MinKey\"});var min_key=MinKey;function _classCallCheck$8(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$8(e,t,r){return t&&_defineProperties$8(e.prototype,t),r&&_defineProperties$8(e,r),e}var MaxKey=function(){function e(){_classCallCheck$8(this,e)}return _createClass$8(e,[{key:\"toExtendedJSON\",value:function(){return{$maxKey:1}}}],[{key:\"fromExtendedJSON\",value:function(){return new e}}]),e}();Object.defineProperty(MaxKey.prototype,\"_bsontype\",{value:\"MaxKey\"});var max_key=MaxKey;function _classCallCheck$9(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$9(e,t,r){return t&&_defineProperties$9(e.prototype,t),r&&_defineProperties$9(e,r),e}var DBRef=function(){function e(t,r,n,i){_classCallCheck$9(this,e);var o=t.split(\".\");2===o.length&&(n=o.shift(),t=o.shift()),this.collection=t,this.oid=r,this.db=n,this.fields=i||{}}return _createClass$9(e,[{key:\"toJSON\",value:function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}},{key:\"toExtendedJSON\",value:function(){var e={$ref:this.collection,$id:this.oid};return this.db&&(e.$db=this.db),e=Object.assign(e,this.fields)}}],[{key:\"fromExtendedJSON\",value:function(t){var r=Object.assign({},t);return[\"$ref\",\"$id\",\"$db\"].forEach((function(e){return delete r[e]})),new e(t.$ref,t.$id,t.$db,r)}}]),e}();Object.defineProperty(DBRef.prototype,\"_bsontype\",{value:\"DBRef\"}),Object.defineProperty(DBRef.prototype,\"namespace\",{get:function(){return this.collection},set:function(e){this.collection=e},configurable:!1});var db_ref=DBRef;function _classCallCheck$a(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties$a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$a(e,t,r){return t&&_defineProperties$a(e.prototype,t),r&&_defineProperties$a(e,r),e}var Buffer$3=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,Binary=function(){function e(t,r){if(_classCallCheck$a(this,e),!(null==t||\"string\"==typeof t||Buffer$3.isBuffer(t)||t instanceof Uint8Array||Array.isArray(t)))throw new TypeError(\"only String, Buffer, Uint8Array or Array accepted\");if(this.sub_type=null==r?BSON_BINARY_SUBTYPE_DEFAULT:r,this.position=0,null==t||t instanceof Number)void 0!==Buffer$3?this.buffer=Buffer$3.alloc(e.BUFFER_SIZE):\"undefined\"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE)):this.buffer=new Array(e.BUFFER_SIZE);else{if(\"string\"==typeof t)if(void 0!==Buffer$3)this.buffer=Buffer$3.from(t);else{if(\"undefined\"==typeof Uint8Array&&!Array.isArray(t))throw new TypeError(\"only String, Buffer, Uint8Array or Array accepted\");this.buffer=writeStringToArray(t)}else this.buffer=t;this.position=t.length}}return _createClass$a(e,[{key:\"put\",value:function(t){if(null!=t.length&&\"number\"!=typeof t&&1!==t.length)throw new TypeError(\"only accepts single character String, Uint8Array or Array\");if(\"number\"!=typeof t&&t<0||t>255)throw new TypeError(\"only accepts number in a valid unsigned byte range 0-255\");var r=null;if(r=\"string\"==typeof t?t.charCodeAt(0):null!=t.length?t[0]:t,this.buffer.length>this.position)this.buffer[this.position++]=r;else if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer)){var n=Buffer$3.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}else{var i=null;i=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE+this.buffer.length)):new Array(e.BUFFER_SIZE+this.buffer.length);for(var o=0;o<this.buffer.length;o++)i[o]=this.buffer[o];this.buffer=i,this.buffer[this.position++]=r}}},{key:\"write\",value:function(e,t){if(t=\"number\"==typeof t?t:this.position,this.buffer.length<t+e.length){var r=null;if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer))r=Buffer$3.alloc(this.buffer.length+e.length),this.buffer.copy(r,0,0,this.buffer.length);else if(isUint8Array(this.buffer)){r=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var n=0;n<this.position;n++)r[n]=this.buffer[n]}this.buffer=r}if(void 0!==Buffer$3&&Buffer$3.isBuffer(e)&&Buffer$3.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==Buffer$3&&\"string\"==typeof e&&Buffer$3.isBuffer(this.buffer))this.buffer.write(e,t,\"binary\"),this.position=t+e.length>this.position?t+e.length:this.position;else if(isUint8Array(e)||Array.isArray(e)&&\"string\"!=typeof e){for(var i=0;i<e.length;i++)this.buffer[t++]=e[i];this.position=t>this.position?t:this.position}else if(\"string\"==typeof e){for(var o=0;o<e.length;o++)this.buffer[t++]=e.charCodeAt(o);this.position=t>this.position?t:this.position}}},{key:\"read\",value:function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var r=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),n=0;n<t;n++)r[n]=this.buffer[e++];return r}},{key:\"value\",value:function(e){if((e=null!=e&&e)&&void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString(\"binary\",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),r=0;r<this.position;r++)t[r]=this.buffer[r];return t}return convertArraytoUtf8BinaryString(this.buffer,0,this.position)}},{key:\"length\",value:function(){return this.position}},{key:\"toJSON\",value:function(){return null!=this.buffer?this.buffer.toString(\"base64\"):\"\"}},{key:\"toString\",value:function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):\"\"}},{key:\"toExtendedJSON\",value:function(){var e=Buffer$3.isBuffer(this.buffer)?this.buffer.toString(\"base64\"):Buffer$3.from(this.buffer).toString(\"base64\"),t=Number(this.sub_type).toString(16);return{$binary:{base64:e,subType:1===t.length?\"0\"+t:t}}}}],[{key:\"fromExtendedJSON\",value:function(t){var r=t.$binary.subType?parseInt(t.$binary.subType,16):0;return new e(Buffer$3.from(t.$binary.base64,\"base64\"),r)}}]),e}(),BSON_BINARY_SUBTYPE_DEFAULT=0;function isUint8Array(e){return\"[object Uint8Array]\"===Object.prototype.toString.call(e)}function writeStringToArray(e){for(var t=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function convertArraytoUtf8BinaryString(e,t,r){for(var n=\"\",i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n}Binary.BUFFER_SIZE=256,Binary.SUBTYPE_DEFAULT=0,Binary.SUBTYPE_FUNCTION=1,Binary.SUBTYPE_BYTE_ARRAY=2,Binary.SUBTYPE_UUID_OLD=3,Binary.SUBTYPE_UUID=4,Binary.SUBTYPE_MD5=5,Binary.SUBTYPE_USER_DEFINED=128,Object.defineProperty(Binary.prototype,\"_bsontype\",{value:\"Binary\"});var binary=Binary,constants={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,BSON_INT64_MAX:Math.pow(2,63)-1,BSON_INT64_MIN:-Math.pow(2,63),JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992,BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_DBPOINTER:12,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128};function _typeof$2(e){return(_typeof$2=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var keysToCodecs={$oid:objectid,$binary:binary,$symbol:symbol,$numberInt:int_32,$numberDecimal:decimal128,$numberDouble:double_1,$numberLong:long_1,$minKey:min_key,$maxKey:max_key,$regularExpression:regexp,$timestamp:timestamp};function deserializeValue(e,t,r,n){if(\"number\"==typeof r){if(n.relaxed)return r;if(Math.floor(r)===r){if(r>=BSON_INT32_MIN&&r<=BSON_INT32_MAX)return new int_32(r);if(r>=BSON_INT64_MIN&&r<=BSON_INT64_MAX)return new long_1.fromNumber(r)}return new double_1(r)}if(null==r||\"object\"!==_typeof$2(r))return r;if(r.$undefined)return null;for(var i=Object.keys(r).filter((function(e){return e.startsWith(\"$\")&&null!=r[e]})),o=0;o<i.length;o++){var s=keysToCodecs[i[o]];if(s)return s.fromExtendedJSON(r,n)}if(null!=r.$date){var u=r.$date,a=new Date;return\"string\"==typeof u?a.setTime(Date.parse(u)):long_1.isLong(u)?a.setTime(u.toNumber()):\"number\"==typeof u&&n.relaxed&&a.setTime(u),a}if(null!=r.$code){var f=Object.assign({},r);return r.$scope&&(f.$scope=deserializeValue(e,null,r.$scope)),code.fromExtendedJSON(r)}if(null!=r.$ref||null!=r.$dbPointer){var c=r.$ref?r:r.$dbPointer;if(c instanceof db_ref)return c;var l=Object.keys(c).filter((function(e){return e.startsWith(\"$\")})),h=!0;if(l.forEach((function(e){-1===[\"$ref\",\"$id\",\"$db\"].indexOf(e)&&(h=!1)})),h)return db_ref.fromExtendedJSON(c)}return r}function parse(e,t){var r=this;return\"boolean\"==typeof(t=Object.assign({},{relaxed:!0},t)).relaxed&&(t.strict=!t.relaxed),\"boolean\"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,(function(e,n){return deserializeValue(r,e,n,t)}))}var BSON_INT32_MAX=2147483647,BSON_INT32_MIN=-2147483648,BSON_INT64_MAX=0x8000000000000000,BSON_INT64_MIN=-0x8000000000000000;function stringify(e,t,r,n){null!=r&&\"object\"===_typeof$2(r)&&(n=r,r=0),null==t||\"object\"!==_typeof$2(t)||Array.isArray(t)||(n=t,t=null,r=0),n=Object.assign({},{relaxed:!0},n);var i=Array.isArray(e)?serializeArray(e,n):serializeDocument(e,n);return JSON.stringify(i,t,r)}function serialize(e,t){return t=t||{},JSON.parse(stringify(e,t))}function deserialize(e,t){return t=t||{},parse(JSON.stringify(e),t)}function serializeArray(e,t){return e.map((function(e){return serializeValue(e,t)}))}function getISOString(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+\"Z\"}function serializeValue(e,t){if(Array.isArray(e))return serializeArray(e,t);if(void 0===e)return null;if(e instanceof Date){var r=e.getTime(),n=r>-1&&r<2534023188e5;return t.relaxed&&n?{$date:getISOString(e)}:{$date:{$numberLong:e.getTime().toString()}}}if(\"number\"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var i=e>=BSON_INT64_MIN&&e<=BSON_INT64_MAX;if(e>=BSON_INT32_MIN&&e<=BSON_INT32_MAX)return{$numberInt:e.toString()};if(i)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var o=e.flags;return void 0===o&&(o=e.toString().match(/[gimuy]*$/)[0]),new regexp(e.source,o).toExtendedJSON()}return null!=e&&\"object\"===_typeof$2(e)?serializeDocument(e,t):e}var BSON_TYPE_MAPPINGS={Binary:function(e){return new binary(e.value(),e.subtype)},Code:function(e){return new code(e.code,e.scope)},DBRef:function(e){return new db_ref(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new decimal128(e.bytes)},Double:function(e){return new double_1(e.value)},Int32:function(e){return new int_32(e.value)},Long:function(e){return long_1.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new max_key},MinKey:function(){return new min_key},ObjectID:function(e){return new objectid(e)},ObjectId:function(e){return new objectid(e)},BSONRegExp:function(e){return new regexp(e.pattern,e.options)},Symbol:function(e){return new symbol(e.value)},Timestamp:function(e){return timestamp.fromBits(e.low,e.high)}};function serializeDocument(e,t){if(null==e||\"object\"!==_typeof$2(e))throw new Error(\"not an object instance\");var r=e._bsontype;if(void 0===r){var n={};for(var i in e)n[i]=serializeValue(e[i],t);return n}if(\"string\"==typeof r){var o=e;if(\"function\"!=typeof o.toExtendedJSON){var s=BSON_TYPE_MAPPINGS[r];if(!s)throw new TypeError(\"Unrecognized or invalid _bsontype: \"+r);o=s(o)}return\"Code\"===r&&o.scope?o=new code(o.code,serializeValue(o.scope,t)):\"DBRef\"===r&&o.oid&&(o=new db_ref(o.collection,serializeValue(o.oid,t),o.db,o.fields)),o.toExtendedJSON(t)}throw new Error(\"_bsontype must be a string, but was: \"+_typeof$2(r))}var extended_json={parse:parse,deserialize:deserialize,serialize:serialize,stringify:stringify},FIRST_BIT=128,FIRST_TWO_BITS=192,FIRST_THREE_BITS=224,FIRST_FOUR_BITS=240,FIRST_FIVE_BITS=248,TWO_BIT_CHAR=192,THREE_BIT_CHAR=224,FOUR_BIT_CHAR=240,CONTINUING_CHAR=128;function validateUtf8(e,t,r){for(var n=0,i=t;i<r;i+=1){var o=e[i];if(n){if((o&FIRST_TWO_BITS)!==CONTINUING_CHAR)return!1;n-=1}else if(o&FIRST_BIT)if((o&FIRST_THREE_BITS)===TWO_BIT_CHAR)n=1;else if((o&FIRST_FOUR_BITS)===THREE_BIT_CHAR)n=2;else{if((o&FIRST_FIVE_BITS)!==FOUR_BIT_CHAR)return!1;n=3}}return!n}var validateUtf8_1=validateUtf8,validate_utf8={validateUtf8:validateUtf8_1},Buffer$4=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,validateUtf8$1=validate_utf8.validateUtf8,JS_INT_MAX_LONG=long_1.fromNumber(constants.JS_INT_MAX),JS_INT_MIN_LONG=long_1.fromNumber(constants.JS_INT_MIN),functionCache={};function deserialize$1(e,t,r){var n=(t=null==t?{}:t)&&t.index?t.index:0,i=e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24;if(i<5)throw new Error(\"bson size must be >= 5, is \".concat(i));if(t.allowObjectSmallerThanBufferSize&&e.length<i)throw new Error(\"buffer length \".concat(e.length,\" must be >= bson size \").concat(i));if(!t.allowObjectSmallerThanBufferSize&&e.length!==i)throw new Error(\"buffer length \".concat(e.length,\" must === bson size \").concat(i));if(i+n>e.length)throw new Error(\"(bson size \".concat(i,\" + options.index \").concat(n,\" must be <= buffer length \").concat(Buffer$4.byteLength(e),\")\"));if(0!==e[n+i-1])throw new Error(\"One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00\");return deserializeObject(e,n,t,r)}function deserializeObject(e,t,r,n){var i=null!=r.evalFunctions&&r.evalFunctions,o=null!=r.cacheFunctions&&r.cacheFunctions,s=null!=r.cacheFunctionsCrc32&&r.cacheFunctionsCrc32;if(!s)var u=null;var a=null==r.fieldsAsRaw?null:r.fieldsAsRaw,f=null!=r.raw&&r.raw,c=\"boolean\"==typeof r.bsonRegExp&&r.bsonRegExp,l=null!=r.promoteBuffers&&r.promoteBuffers,h=null==r.promoteLongs||r.promoteLongs,p=null==r.promoteValues||r.promoteValues,d=t;if(e.length<5)throw new Error(\"corrupt bson message < 5 bytes long\");var _=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(_<5||_>e.length)throw new Error(\"corrupt bson message\");for(var y=n?[]:{},g=0;;){var b=e[t++];if(0===b)break;for(var v=t;0!==e[v]&&v<e.length;)v++;if(v>=Buffer$4.byteLength(e))throw new Error(\"Bad BSON Document: illegal CString\");var m=n?g++:e.toString(\"utf8\",t,v);if(t=v+1,b===constants.BSON_DATA_STRING){var E=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(E<=0||E>e.length-t||0!==e[t+E-1])throw new Error(\"bad string length in bson\");if(!validateUtf8$1(e,t,t+E-1))throw new Error(\"Invalid UTF-8 string in BSON document\");var A=e.toString(\"utf8\",t,t+E-1);y[m]=A,t+=E}else if(b===constants.BSON_DATA_OID){var w=Buffer$4.alloc(12);e.copy(w,0,t,t+12),y[m]=new objectid(w),t+=12}else if(b===constants.BSON_DATA_INT&&!1===p)y[m]=new int_32(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(b===constants.BSON_DATA_INT)y[m]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(b===constants.BSON_DATA_NUMBER&&!1===p)y[m]=new double_1(e.readDoubleLE(t)),t+=8;else if(b===constants.BSON_DATA_NUMBER)y[m]=e.readDoubleLE(t),t+=8;else if(b===constants.BSON_DATA_DATE){var N=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,O=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;y[m]=new Date(new long_1(N,O).toNumber())}else if(b===constants.BSON_DATA_BOOLEAN){if(0!==e[t]&&1!==e[t])throw new Error(\"illegal boolean type value\");y[m]=1===e[t++]}else if(b===constants.BSON_DATA_OBJECT){var S=t,T=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(T<=0||T>e.length-t)throw new Error(\"bad embedded document length in bson\");y[m]=f?e.slice(t,t+T):deserializeObject(e,S,r,!1),t+=T}else if(b===constants.BSON_DATA_ARRAY){var B=t,I=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,R=r,D=t+I;if(a&&a[m]){for(var P in R={},r)R[P]=r[P];R.raw=!0}if(y[m]=deserializeObject(e,B,R,!0),0!==e[(t+=I)-1])throw new Error(\"invalid array terminator byte\");if(t!==D)throw new Error(\"corrupted array bson\")}else if(b===constants.BSON_DATA_UNDEFINED)y[m]=void 0;else if(b===constants.BSON_DATA_NULL)y[m]=null;else if(b===constants.BSON_DATA_LONG){var U=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,C=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,$=new long_1(U,C);y[m]=h&&!0===p&&$.lessThanOrEqual(JS_INT_MAX_LONG)&&$.greaterThanOrEqual(JS_INT_MIN_LONG)?$.toNumber():$}else if(b===constants.BSON_DATA_DECIMAL128){var x=Buffer$4.alloc(16);e.copy(x,0,t,t+16),t+=16;var M=new decimal128(x);y[m]=M.toObject?M.toObject():M}else if(b===constants.BSON_DATA_BINARY){var k=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,L=k,j=e[t++];if(k<0)throw new Error(\"Negative binary type element size found\");if(k>Buffer$4.byteLength(e))throw new Error(\"Binary type size larger than document size\");if(null!=e.slice){if(j===binary.SUBTYPE_BYTE_ARRAY){if((k=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error(\"Negative binary type element size found for subtype 0x02\");if(k>L-4)throw new Error(\"Binary type with subtype 0x02 contains to long binary size\");if(k<L-4)throw new Error(\"Binary type with subtype 0x02 contains to short binary size\")}y[m]=l&&p?e.slice(t,t+k):new binary(e.slice(t,t+k),j)}else{var F=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(k)):new Array(k);if(j===binary.SUBTYPE_BYTE_ARRAY){if((k=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error(\"Negative binary type element size found for subtype 0x02\");if(k>L-4)throw new Error(\"Binary type with subtype 0x02 contains to long binary size\");if(k<L-4)throw new Error(\"Binary type with subtype 0x02 contains to short binary size\")}for(v=0;v<k;v++)F[v]=e[t+v];y[m]=l&&p?F:new binary(F,j)}t+=k}else if(b===constants.BSON_DATA_REGEXP&&!1===c){for(v=t;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var z=e.toString(\"utf8\",t,v);for(v=t=v+1;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var Y=e.toString(\"utf8\",t,v);t=v+1;var K=new Array(Y.length);for(v=0;v<Y.length;v++)switch(Y[v]){case\"m\":K[v]=\"m\";break;case\"s\":K[v]=\"g\";break;case\"i\":K[v]=\"i\"}y[m]=new RegExp(z,K.join(\"\"))}else if(b===constants.BSON_DATA_REGEXP&&!0===c){for(v=t;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var J=e.toString(\"utf8\",t,v);for(v=t=v+1;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var W=e.toString(\"utf8\",t,v);t=v+1,y[m]=new regexp(J,W)}else if(b===constants.BSON_DATA_SYMBOL){var q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(q<=0||q>e.length-t||0!==e[t+q-1])throw new Error(\"bad string length in bson\");y[m]=e.toString(\"utf8\",t,t+q-1),t+=q}else if(b===constants.BSON_DATA_TIMESTAMP){var V=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,X=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;y[m]=new timestamp(V,X)}else if(b===constants.BSON_DATA_MIN_KEY)y[m]=new min_key;else if(b===constants.BSON_DATA_MAX_KEY)y[m]=new max_key;else if(b===constants.BSON_DATA_CODE){var H=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(H<=0||H>e.length-t||0!==e[t+H-1])throw new Error(\"bad string length in bson\");var G=e.toString(\"utf8\",t,t+H-1);if(i)if(o){var Z=s?u(G):G;y[m]=isolateEvalWithHash(functionCache,Z,G,y)}else y[m]=isolateEval(G);else y[m]=new code(G);t+=H}else if(b===constants.BSON_DATA_CODE_W_SCOPE){var Q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Q<13)throw new Error(\"code_w_scope total size shorter minimum expected length\");var ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ee<=0||ee>e.length-t||0!==e[t+ee-1])throw new Error(\"bad string length in bson\");var te=e.toString(\"utf8\",t,t+ee-1),re=t+=ee,ne=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,ie=deserializeObject(e,re,r,!1);if(t+=ne,Q<8+ne+ee)throw new Error(\"code_w_scope total size is to short, truncating scope\");if(Q>8+ne+ee)throw new Error(\"code_w_scope total size is to long, clips outer document\");if(i){if(o){var oe=s?u(te):te;y[m]=isolateEvalWithHash(functionCache,oe,te,y)}else y[m]=isolateEval(te);y[m].scope=ie}else y[m]=new code(te,ie)}else{if(b!==constants.BSON_DATA_DBPOINTER)throw new Error(\"Detected unknown BSON type \"+b.toString(16)+' for fieldname \"'+m+'\", are you using the latest BSON parser?');var se=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(se<=0||se>e.length-t||0!==e[t+se-1])throw new Error(\"bad string length in bson\");if(!validateUtf8$1(e,t,t+se-1))throw new Error(\"Invalid UTF-8 string in BSON document\");var ue=e.toString(\"utf8\",t,t+se-1);t+=se;var ae=Buffer$4.alloc(12);e.copy(ae,0,t,t+12);var fe=new objectid(ae);t+=12,y[m]=new db_ref(ue,fe)}}if(_!==t-d){if(n)throw new Error(\"corrupt array bson\");throw new Error(\"corrupt object bson\")}var ce=Object.keys(y).filter((function(e){return e.startsWith(\"$\")})),le=!0;if(ce.forEach((function(e){-1===[\"$ref\",\"$id\",\"$db\"].indexOf(e)&&(le=!1)})),!le)return y;if(null!=y.$id&&null!=y.$ref){var he=Object.assign({},y);return delete he.$ref,delete he.$id,delete he.$db,new db_ref(y.$ref,y.$id,y.$db||null,he)}return y}function isolateEvalWithHash(functionCache,hash,functionString,object){var value=null;return null==functionCache[hash]&&(eval(\"value = \"+functionString),functionCache[hash]=value),functionCache[hash].bind(object)}function isolateEval(functionString){var value=null;return eval(\"value = \"+functionString),value}var deserializer=deserialize$1;function readIEEE754(e,t,r,n,i){var o,s,u=\"big\"===r,a=8*i-n-1,f=(1<<a)-1,c=f>>1,l=-7,h=u?0:i-1,p=u?1:-1,d=e[t+h];for(h+=p,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=p,l-=8);if(0===o)o=1-c;else{if(o===f)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)}function writeIEEE754(e,t,r,n,i,o){var s,u,a,f=\"big\"===n,c=8*o-i-1,l=(1<<c)-1,h=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=f?o-1:0,_=f?-1:1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),(t+=s+h>=1?p/a:p*Math.pow(2,1-h))*a>=2&&(s++,a/=2),s+h>=l?(u=0,s=l):s+h>=1?(u=(t*a-1)*Math.pow(2,i),s+=h):(u=t*Math.pow(2,h-1)*Math.pow(2,i),s=0)),isNaN(t)&&(u=0);i>=8;)e[r+d]=255&u,d+=_,u/=256,i-=8;for(s=s<<i|u,isNaN(t)&&(s+=8),c+=i;c>0;)e[r+d]=255&s,d+=_,s/=256,c-=8;e[r+d-_]|=128*y}var float_parser={readIEEE754:readIEEE754,writeIEEE754:writeIEEE754};function _typeof$3(e){return(_typeof$3=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var Buffer$5=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,writeIEEE754$1=float_parser.writeIEEE754,normalizedFunctionString$1=utils.normalizedFunctionString,regexp$1=/\\x00/,ignoreKeys=new Set([\"$db\",\"$ref\",\"$id\",\"$clusterTime\"]),isDate$1=function(e){return\"object\"===_typeof$3(e)&&\"[object Date]\"===Object.prototype.toString.call(e)},isRegExp$1=function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)};function serializeString(e,t,r,n,i){e[n++]=constants.BSON_DATA_STRING;var o=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\");e[(n=n+o+1)-1]=0;var s=e.write(r,n+4,\"utf8\");return e[n+3]=s+1>>24&255,e[n+2]=s+1>>16&255,e[n+1]=s+1>>8&255,e[n]=s+1&255,n=n+4+s,e[n++]=0,n}function serializeNumber(e,t,r,n,i){if(Math.floor(r)===r&&r>=constants.JS_INT_MIN&&r<=constants.JS_INT_MAX)if(r>=constants.BSON_INT32_MIN&&r<=constants.BSON_INT32_MAX)e[n++]=constants.BSON_DATA_INT,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255;else if(r>=constants.JS_INT_MIN&&r<=constants.JS_INT_MAX){e[n++]=constants.BSON_DATA_NUMBER,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,writeIEEE754$1(e,r,n,\"little\",52,8),n+=8}else{e[n++]=constants.BSON_DATA_LONG,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=long_1.fromNumber(r),s=o.getLowBits(),u=o.getHighBits();e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=255&u,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255}else e[n++]=constants.BSON_DATA_NUMBER,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,writeIEEE754$1(e,r,n,\"little\",52,8),n+=8;return n}function serializeNull(e,t,r,n,i){return e[n++]=constants.BSON_DATA_NULL,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,n}function serializeBoolean(e,t,r,n,i){return e[n++]=constants.BSON_DATA_BOOLEAN,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,e[n++]=r?1:0,n}function serializeDate(e,t,r,n,i){e[n++]=constants.BSON_DATA_DATE,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=long_1.fromNumber(r.getTime()),s=o.getLowBits(),u=o.getHighBits();return e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=255&u,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,n}function serializeRegExp(e,t,r,n,i){if(e[n++]=constants.BSON_DATA_REGEXP,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,r.source&&null!=r.source.match(regexp$1))throw Error(\"value \"+r.source+\" must not contain null bytes\");return n+=e.write(r.source,n,\"utf8\"),e[n++]=0,r.ignoreCase&&(e[n++]=105),r.global&&(e[n++]=115),r.multiline&&(e[n++]=109),e[n++]=0,n}function serializeBSONRegExp(e,t,r,n,i){if(e[n++]=constants.BSON_DATA_REGEXP,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,null!=r.pattern.match(regexp$1))throw Error(\"pattern \"+r.pattern+\" must not contain null bytes\");return n+=e.write(r.pattern,n,\"utf8\"),e[n++]=0,n+=e.write(r.options.split(\"\").sort().join(\"\"),n,\"utf8\"),e[n++]=0,n}function serializeMinMax(e,t,r,n,i){return null===r?e[n++]=constants.BSON_DATA_NULL:\"MinKey\"===r._bsontype?e[n++]=constants.BSON_DATA_MIN_KEY:e[n++]=constants.BSON_DATA_MAX_KEY,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,n}function serializeObjectId(e,t,r,n,i){if(e[n++]=constants.BSON_DATA_OID,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,\"string\"==typeof r.id)e.write(r.id,n,\"binary\");else{if(!r.id||!r.id.copy)throw new TypeError(\"object [\"+JSON.stringify(r)+\"] is not a valid ObjectId\");r.id.copy(e,n,0,12)}return n+12}function serializeBuffer(e,t,r,n,i){e[n++]=constants.BSON_DATA_BINARY,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=r.length;return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=constants.BSON_BINARY_SUBTYPE_DEFAULT,r.copy(e,n,0,o),n+=o}function serializeObject(e,t,r,n,i,o,s,u,a,f){for(var c=0;c<f.length;c++)if(f[c]===r)throw new Error(\"cyclic dependency detected\");f.push(r),e[n++]=Array.isArray(r)?constants.BSON_DATA_ARRAY:constants.BSON_DATA_OBJECT,n+=a?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var l=serializeInto(e,r,i,n,o+1,s,u,f);return f.pop(),l}function serializeDecimal128(e,t,r,n,i){return e[n++]=constants.BSON_DATA_DECIMAL128,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,r.bytes.copy(e,n,0,16),n+16}function serializeLong(e,t,r,n,i){e[n++]=\"Long\"===r._bsontype?constants.BSON_DATA_LONG:constants.BSON_DATA_TIMESTAMP,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=r.getLowBits(),s=r.getHighBits();return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,n}function serializeInt32(e,t,r,n,i){return e[n++]=constants.BSON_DATA_INT,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255,n}function serializeDouble(e,t,r,n,i){return e[n++]=constants.BSON_DATA_NUMBER,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0,writeIEEE754$1(e,r.value,n,\"little\",52,8),n+=8}function serializeFunction(e,t,r,n,i,o,s){e[n++]=constants.BSON_DATA_CODE,n+=s?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var u=normalizedFunctionString$1(r),a=e.write(u,n+4,\"utf8\")+1;return e[n]=255&a,e[n+1]=a>>8&255,e[n+2]=a>>16&255,e[n+3]=a>>24&255,n=n+4+a-1,e[n++]=0,n}function serializeCode(e,t,r,n,i,o,s,u,a){if(r.scope&&\"object\"===_typeof$3(r.scope)){e[n++]=constants.BSON_DATA_CODE_W_SCOPE,n+=a?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var f=n,c=\"string\"==typeof r.code?r.code:r.code.toString();n+=4;var l=e.write(c,n+4,\"utf8\")+1;e[n]=255&l,e[n+1]=l>>8&255,e[n+2]=l>>16&255,e[n+3]=l>>24&255,e[n+4+l-1]=0,n=n+l+4;var h=serializeInto(e,r.scope,i,n,o+1,s,u);n=h-1;var p=h-f;e[f++]=255&p,e[f++]=p>>8&255,e[f++]=p>>16&255,e[f++]=p>>24&255,e[n++]=0}else{e[n++]=constants.BSON_DATA_CODE,n+=a?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var d=r.code.toString(),_=e.write(d,n+4,\"utf8\")+1;e[n]=255&_,e[n+1]=_>>8&255,e[n+2]=_>>16&255,e[n+3]=_>>24&255,n=n+4+_-1,e[n++]=0}return n}function serializeBinary(e,t,r,n,i){e[n++]=constants.BSON_DATA_BINARY,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=r.value(!0),s=r.position;return r.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(s+=4),e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=r.sub_type,r.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(s-=4,e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255),o.copy(e,n,0,r.position),n+=r.position}function serializeSymbol(e,t,r,n,i){e[n++]=constants.BSON_DATA_SYMBOL,n+=i?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var o=e.write(r.value,n+4,\"utf8\")+1;return e[n]=255&o,e[n+1]=o>>8&255,e[n+2]=o>>16&255,e[n+3]=o>>24&255,n=n+4+o-1,e[n++]=0,n}function serializeDBRef(e,t,r,n,i,o,s){e[n++]=constants.BSON_DATA_OBJECT,n+=s?e.write(t,n,\"ascii\"):e.write(t,n,\"utf8\"),e[n++]=0;var u,a=n,f={$ref:r.collection||r.namespace,$id:r.oid};null!=r.db&&(f.$db=r.db);var c=(u=serializeInto(e,f=Object.assign(f,r.fields),!1,n,i+1,o))-a;return e[a++]=255&c,e[a++]=c>>8&255,e[a++]=c>>16&255,e[a++]=c>>24&255,u}function serializeInto(e,t,r,n,i,o,s,u){n=n||0,(u=u||[]).push(t);var a=n+4;if(Array.isArray(t))for(var f=0;f<t.length;f++){var c=\"\"+f,l=t[f];if(l&&l.toBSON){if(\"function\"!=typeof l.toBSON)throw new TypeError(\"toBSON is not a function\");l=l.toBSON()}var h=_typeof$3(l);if(\"string\"===h)a=serializeString(e,c,l,a,!0);else if(\"number\"===h)a=serializeNumber(e,c,l,a,!0);else if(\"boolean\"===h)a=serializeBoolean(e,c,l,a,!0);else if(l instanceof Date||isDate$1(l))a=serializeDate(e,c,l,a,!0);else if(void 0===l)a=serializeNull(e,c,l,a,!0);else if(null===l)a=serializeNull(e,c,l,a,!0);else if(\"ObjectId\"===l._bsontype||\"ObjectID\"===l._bsontype)a=serializeObjectId(e,c,l,a,!0);else if(Buffer$5.isBuffer(l))a=serializeBuffer(e,c,l,a,!0);else if(l instanceof RegExp||isRegExp$1(l))a=serializeRegExp(e,c,l,a,!0);else if(\"object\"===h&&null==l._bsontype)a=serializeObject(e,c,l,a,r,i,o,s,!0,u);else if(\"object\"===h&&\"Decimal128\"===l._bsontype)a=serializeDecimal128(e,c,l,a,!0);else if(\"Long\"===l._bsontype||\"Timestamp\"===l._bsontype)a=serializeLong(e,c,l,a,!0);else if(\"Double\"===l._bsontype)a=serializeDouble(e,c,l,a,!0);else if(\"function\"==typeof l&&o)a=serializeFunction(e,c,l,a,r,i,o,!0);else if(\"Code\"===l._bsontype)a=serializeCode(e,c,l,a,r,i,o,s,!0);else if(\"Binary\"===l._bsontype)a=serializeBinary(e,c,l,a,!0);else if(\"Symbol\"===l._bsontype)a=serializeSymbol(e,c,l,a,!0);else if(\"DBRef\"===l._bsontype)a=serializeDBRef(e,c,l,a,i,o,!0);else if(\"BSONRegExp\"===l._bsontype)a=serializeBSONRegExp(e,c,l,a,!0);else if(\"Int32\"===l._bsontype)a=serializeInt32(e,c,l,a,!0);else if(\"MinKey\"===l._bsontype||\"MaxKey\"===l._bsontype)a=serializeMinMax(e,c,l,a,!0);else if(void 0!==l._bsontype)throw new TypeError(\"Unrecognized or invalid _bsontype: \"+l._bsontype)}else if(t instanceof map)for(var p=t.entries(),d=!1;!d;){var _=p.next();if(!(d=_.done)){var y=_.value[0],g=_.value[1],b=_typeof$3(g);if(\"string\"==typeof y&&!ignoreKeys.has(y)){if(null!=y.match(regexp$1))throw Error(\"key \"+y+\" must not contain null bytes\");if(r){if(\"$\"===y[0])throw Error(\"key \"+y+\" must not start with '$'\");if(~y.indexOf(\".\"))throw Error(\"key \"+y+\" must not contain '.'\")}}if(\"string\"===b)a=serializeString(e,y,g,a);else if(\"number\"===b)a=serializeNumber(e,y,g,a);else if(\"boolean\"===b)a=serializeBoolean(e,y,g,a);else if(g instanceof Date||isDate$1(g))a=serializeDate(e,y,g,a);else if(null===g||void 0===g&&!1===s)a=serializeNull(e,y,g,a);else if(\"ObjectId\"===g._bsontype||\"ObjectID\"===g._bsontype)a=serializeObjectId(e,y,g,a);else if(Buffer$5.isBuffer(g))a=serializeBuffer(e,y,g,a);else if(g instanceof RegExp||isRegExp$1(g))a=serializeRegExp(e,y,g,a);else if(\"object\"===b&&null==g._bsontype)a=serializeObject(e,y,g,a,r,i,o,s,!1,u);else if(\"object\"===b&&\"Decimal128\"===g._bsontype)a=serializeDecimal128(e,y,g,a);else if(\"Long\"===g._bsontype||\"Timestamp\"===g._bsontype)a=serializeLong(e,y,g,a);else if(\"Double\"===g._bsontype)a=serializeDouble(e,y,g,a);else if(\"Code\"===g._bsontype)a=serializeCode(e,y,g,a,r,i,o,s);else if(\"function\"==typeof g&&o)a=serializeFunction(e,y,g,a,r,i,o);else if(\"Binary\"===g._bsontype)a=serializeBinary(e,y,g,a);else if(\"Symbol\"===g._bsontype)a=serializeSymbol(e,y,g,a);else if(\"DBRef\"===g._bsontype)a=serializeDBRef(e,y,g,a,i,o);else if(\"BSONRegExp\"===g._bsontype)a=serializeBSONRegExp(e,y,g,a);else if(\"Int32\"===g._bsontype)a=serializeInt32(e,y,g,a);else if(\"MinKey\"===g._bsontype||\"MaxKey\"===g._bsontype)a=serializeMinMax(e,y,g,a);else if(void 0!==g._bsontype)throw new TypeError(\"Unrecognized or invalid _bsontype: \"+g._bsontype)}}else{if(t.toBSON){if(\"function\"!=typeof t.toBSON)throw new TypeError(\"toBSON is not a function\");if(null!=(t=t.toBSON())&&\"object\"!==_typeof$3(t))throw new TypeError(\"toBSON function did not return an object\")}for(var v in t){var m=t[v];if(m&&m.toBSON){if(\"function\"!=typeof m.toBSON)throw new TypeError(\"toBSON is not a function\");m=m.toBSON()}var E=_typeof$3(m);if(\"string\"==typeof v&&!ignoreKeys.has(v)){if(null!=v.match(regexp$1))throw Error(\"key \"+v+\" must not contain null bytes\");if(r){if(\"$\"===v[0])throw Error(\"key \"+v+\" must not start with '$'\");if(~v.indexOf(\".\"))throw Error(\"key \"+v+\" must not contain '.'\")}}if(\"string\"===E)a=serializeString(e,v,m,a);else if(\"number\"===E)a=serializeNumber(e,v,m,a);else if(\"boolean\"===E)a=serializeBoolean(e,v,m,a);else if(m instanceof Date||isDate$1(m))a=serializeDate(e,v,m,a);else if(void 0===m)!1===s&&(a=serializeNull(e,v,m,a));else if(null===m)a=serializeNull(e,v,m,a);else if(\"ObjectId\"===m._bsontype||\"ObjectID\"===m._bsontype)a=serializeObjectId(e,v,m,a);else if(Buffer$5.isBuffer(m))a=serializeBuffer(e,v,m,a);else if(m instanceof RegExp||isRegExp$1(m))a=serializeRegExp(e,v,m,a);else if(\"object\"===E&&null==m._bsontype)a=serializeObject(e,v,m,a,r,i,o,s,!1,u);else if(\"object\"===E&&\"Decimal128\"===m._bsontype)a=serializeDecimal128(e,v,m,a);else if(\"Long\"===m._bsontype||\"Timestamp\"===m._bsontype)a=serializeLong(e,v,m,a);else if(\"Double\"===m._bsontype)a=serializeDouble(e,v,m,a);else if(\"Code\"===m._bsontype)a=serializeCode(e,v,m,a,r,i,o,s);else if(\"function\"==typeof m&&o)a=serializeFunction(e,v,m,a,r,i,o);else if(\"Binary\"===m._bsontype)a=serializeBinary(e,v,m,a);else if(\"Symbol\"===m._bsontype)a=serializeSymbol(e,v,m,a);else if(\"DBRef\"===m._bsontype)a=serializeDBRef(e,v,m,a,i,o);else if(\"BSONRegExp\"===m._bsontype)a=serializeBSONRegExp(e,v,m,a);else if(\"Int32\"===m._bsontype)a=serializeInt32(e,v,m,a);else if(\"MinKey\"===m._bsontype||\"MaxKey\"===m._bsontype)a=serializeMinMax(e,v,m,a);else if(void 0!==m._bsontype)throw new TypeError(\"Unrecognized or invalid _bsontype: \"+m._bsontype)}}u.pop(),e[a++]=0;var A=a-n;return e[n++]=255&A,e[n++]=A>>8&255,e[n++]=A>>16&255,e[n++]=A>>24&255,a}var serializer=serializeInto;function _typeof$4(e){return(_typeof$4=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var Buffer$6=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,normalizedFunctionString$2=utils.normalizedFunctionString;function isDate$2(e){return\"object\"===_typeof$4(e)&&\"[object Date]\"===Object.prototype.toString.call(e)}function calculateObjectSize(e,t,r){var n=5;if(Array.isArray(e))for(var i=0;i<e.length;i++)n+=calculateElement(i.toString(),e[i],t,!0,r);else for(var o in e.toBSON&&(e=e.toBSON()),e)n+=calculateElement(o,e[o],t,!1,r);return n}function calculateElement(e,t,r,n,i){switch(t&&t.toBSON&&(t=t.toBSON()),_typeof$4(t)){case\"string\":return 1+Buffer$6.byteLength(e,\"utf8\")+1+4+Buffer$6.byteLength(t,\"utf8\")+1;case\"number\":return Math.floor(t)===t&&t>=constants.JS_INT_MIN&&t<=constants.JS_INT_MAX&&t>=constants.BSON_INT32_MIN&&t<=constants.BSON_INT32_MAX?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+5:(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+9;case\"undefined\":return n||!i?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1:0;case\"boolean\":return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+2;case\"object\":if(null==t||\"MinKey\"===t._bsontype||\"MaxKey\"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1;if(\"ObjectId\"===t._bsontype||\"ObjectID\"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+13;if(t instanceof Date||isDate$2(t))return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+9;if(void 0!==Buffer$6&&Buffer$6.isBuffer(t))return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+6+t.length;if(\"Long\"===t._bsontype||\"Double\"===t._bsontype||\"Timestamp\"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+9;if(\"Decimal128\"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+17;if(\"Code\"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+4+4+Buffer$6.byteLength(t.code.toString(),\"utf8\")+1+calculateObjectSize(t.scope,r,i):(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+4+Buffer$6.byteLength(t.code.toString(),\"utf8\")+1;if(\"Binary\"===t._bsontype)return t.sub_type===binary.SUBTYPE_BYTE_ARRAY?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+(t.position+1+4+1+4):(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+(t.position+1+4+1);if(\"Symbol\"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+Buffer$6.byteLength(t.value,\"utf8\")+4+1+1;if(\"DBRef\"===t._bsontype){var o=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(o.$db=t.db),(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+calculateObjectSize(o,r,i)}return t instanceof RegExp||\"[object RegExp]\"===Object.prototype.toString.call(t)?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+Buffer$6.byteLength(t.source,\"utf8\")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:\"BSONRegExp\"===t._bsontype?(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+Buffer$6.byteLength(t.pattern,\"utf8\")+1+Buffer$6.byteLength(t.options,\"utf8\")+1:(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+calculateObjectSize(t,r,i)+1;case\"function\":if(t instanceof RegExp||\"[object RegExp]\"===Object.prototype.toString.call(t)||\"[object RegExp]\"===String.call(t))return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+Buffer$6.byteLength(t.source,\"utf8\")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(r&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+4+4+Buffer$6.byteLength(normalizedFunctionString$2(t),\"utf8\")+1+calculateObjectSize(t.scope,r,i);if(r)return(null!=e?Buffer$6.byteLength(e,\"utf8\")+1:0)+1+4+Buffer$6.byteLength(normalizedFunctionString$2(t),\"utf8\")+1}return 0}var calculate_size=calculateObjectSize,Buffer$7=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,ensure_buffer=function(e){if(e instanceof Buffer$7)return e;if(e instanceof Uint8Array)return Buffer$7.from(e.buffer);throw new TypeError(\"Must use either Buffer or Uint8Array\")},Buffer$8=buffer__WEBPACK_IMPORTED_MODULE_1___default.a.Buffer,MAXSIZE=17825792,buffer$1=Buffer$8.alloc(MAXSIZE);function setInternalBufferSize(e){buffer$1.length<e&&(buffer$1=Buffer$8.alloc(e))}function serialize$1(e,t){var r=\"boolean\"==typeof(t=t||{}).checkKeys&&t.checkKeys,n=\"boolean\"==typeof t.serializeFunctions&&t.serializeFunctions,i=\"boolean\"!=typeof t.ignoreUndefined||t.ignoreUndefined,o=\"number\"==typeof t.minInternalBufferSize?t.minInternalBufferSize:MAXSIZE;buffer$1.length<o&&(buffer$1=Buffer$8.alloc(o));var s=serializer(buffer$1,e,r,0,0,n,i,[]),u=Buffer$8.alloc(s);return buffer$1.copy(u,0,0,u.length),u}function serializeWithBufferAndIndex(e,t,r){var n=\"boolean\"==typeof(r=r||{}).checkKeys&&r.checkKeys,i=\"boolean\"==typeof r.serializeFunctions&&r.serializeFunctions,o=\"boolean\"!=typeof r.ignoreUndefined||r.ignoreUndefined,s=\"number\"==typeof r.index?r.index:0,u=serializer(buffer$1,e,n,0,0,i,o);return buffer$1.copy(t,s,0,u),s+u-1}function deserialize$2(e,t){return e=ensure_buffer(e),deserializer(e,t)}function calculateObjectSize$1(e,t){var r=\"boolean\"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,n=\"boolean\"!=typeof t.ignoreUndefined||t.ignoreUndefined;return calculate_size(e,r,n)}function deserializeStream(e,t,r,n,i,o){o=Object.assign({allowObjectSmallerThanBufferSize:!0},o),e=ensure_buffer(e);for(var s=t,u=0;u<r;u++){var a=e[s]|e[s+1]<<8|e[s+2]<<16|e[s+3]<<24;o.index=s,n[i+u]=deserializer(e,o),s+=a}return s}var bson={BSON_INT32_MAX:constants.BSON_INT32_MAX,BSON_INT32_MIN:constants.BSON_INT32_MIN,BSON_INT64_MAX:constants.BSON_INT64_MAX,BSON_INT64_MIN:constants.BSON_INT64_MIN,JS_INT_MAX:constants.JS_INT_MAX,JS_INT_MIN:constants.JS_INT_MIN,BSON_DATA_NUMBER:constants.BSON_DATA_NUMBER,BSON_DATA_STRING:constants.BSON_DATA_STRING,BSON_DATA_OBJECT:constants.BSON_DATA_OBJECT,BSON_DATA_ARRAY:constants.BSON_DATA_ARRAY,BSON_DATA_BINARY:constants.BSON_DATA_BINARY,BSON_DATA_UNDEFINED:constants.BSON_DATA_UNDEFINED,BSON_DATA_OID:constants.BSON_DATA_OID,BSON_DATA_BOOLEAN:constants.BSON_DATA_BOOLEAN,BSON_DATA_DATE:constants.BSON_DATA_DATE,BSON_DATA_NULL:constants.BSON_DATA_NULL,BSON_DATA_REGEXP:constants.BSON_DATA_REGEXP,BSON_DATA_DBPOINTER:constants.BSON_DATA_DBPOINTER,BSON_DATA_CODE:constants.BSON_DATA_CODE,BSON_DATA_SYMBOL:constants.BSON_DATA_SYMBOL,BSON_DATA_CODE_W_SCOPE:constants.BSON_DATA_CODE_W_SCOPE,BSON_DATA_INT:constants.BSON_DATA_INT,BSON_DATA_TIMESTAMP:constants.BSON_DATA_TIMESTAMP,BSON_DATA_LONG:constants.BSON_DATA_LONG,BSON_DATA_DECIMAL128:constants.BSON_DATA_DECIMAL128,BSON_DATA_MIN_KEY:constants.BSON_DATA_MIN_KEY,BSON_DATA_MAX_KEY:constants.BSON_DATA_MAX_KEY,BSON_BINARY_SUBTYPE_DEFAULT:constants.BSON_BINARY_SUBTYPE_DEFAULT,BSON_BINARY_SUBTYPE_FUNCTION:constants.BSON_BINARY_SUBTYPE_FUNCTION,BSON_BINARY_SUBTYPE_BYTE_ARRAY:constants.BSON_BINARY_SUBTYPE_BYTE_ARRAY,BSON_BINARY_SUBTYPE_UUID:constants.BSON_BINARY_SUBTYPE_UUID,BSON_BINARY_SUBTYPE_MD5:constants.BSON_BINARY_SUBTYPE_MD5,BSON_BINARY_SUBTYPE_USER_DEFINED:constants.BSON_BINARY_SUBTYPE_USER_DEFINED,Code:code,Map:map,BSONSymbol:symbol,DBRef:db_ref,Binary:binary,ObjectId:objectid,Long:long_1,Timestamp:timestamp,Double:double_1,Int32:int_32,MinKey:min_key,MaxKey:max_key,BSONRegExp:regexp,Decimal128:decimal128,serialize:serialize$1,serializeWithBufferAndIndex:serializeWithBufferAndIndex,deserialize:deserialize$2,calculateObjectSize:calculateObjectSize$1,deserializeStream:deserializeStream,setInternalBufferSize:setInternalBufferSize,ObjectID:objectid,EJSON:extended_json},bson_1=bson.BSON_INT32_MAX,bson_2=bson.BSON_INT32_MIN,bson_3=bson.BSON_INT64_MAX,bson_4=bson.BSON_INT64_MIN,bson_5=bson.JS_INT_MAX,bson_6=bson.JS_INT_MIN,bson_7=bson.BSON_DATA_NUMBER,bson_8=bson.BSON_DATA_STRING,bson_9=bson.BSON_DATA_OBJECT,bson_10=bson.BSON_DATA_ARRAY,bson_11=bson.BSON_DATA_BINARY,bson_12=bson.BSON_DATA_UNDEFINED,bson_13=bson.BSON_DATA_OID,bson_14=bson.BSON_DATA_BOOLEAN,bson_15=bson.BSON_DATA_DATE,bson_16=bson.BSON_DATA_NULL,bson_17=bson.BSON_DATA_REGEXP,bson_18=bson.BSON_DATA_DBPOINTER,bson_19=bson.BSON_DATA_CODE,bson_20=bson.BSON_DATA_SYMBOL,bson_21=bson.BSON_DATA_CODE_W_SCOPE,bson_22=bson.BSON_DATA_INT,bson_23=bson.BSON_DATA_TIMESTAMP,bson_24=bson.BSON_DATA_LONG,bson_25=bson.BSON_DATA_DECIMAL128,bson_26=bson.BSON_DATA_MIN_KEY,bson_27=bson.BSON_DATA_MAX_KEY,bson_28=bson.BSON_BINARY_SUBTYPE_DEFAULT,bson_29=bson.BSON_BINARY_SUBTYPE_FUNCTION,bson_30=bson.BSON_BINARY_SUBTYPE_BYTE_ARRAY,bson_31=bson.BSON_BINARY_SUBTYPE_UUID,bson_32=bson.BSON_BINARY_SUBTYPE_MD5,bson_33=bson.BSON_BINARY_SUBTYPE_USER_DEFINED,bson_34=bson.Code,bson_35=bson.BSONSymbol,bson_36=bson.DBRef,bson_37=bson.Binary,bson_38=bson.ObjectId,bson_39=bson.Long,bson_40=bson.Timestamp,bson_41=bson.Double,bson_42=bson.Int32,bson_43=bson.MinKey,bson_44=bson.MaxKey,bson_45=bson.BSONRegExp,bson_46=bson.Decimal128,bson_47=bson.serialize,bson_48=bson.serializeWithBufferAndIndex,bson_49=bson.deserialize,bson_50=bson.calculateObjectSize,bson_51=bson.deserializeStream,bson_52=bson.setInternalBufferSize,bson_53=bson.ObjectID,bson_54=bson.EJSON;__webpack_exports__.a=bson}).call(this,__webpack_require__(4),__webpack_require__(0).Buffer)},function(e,t){t.read=function(e,t,r,n,i){var o,s,u=8*i-n-1,a=(1<<u)-1,f=a>>1,c=-7,l=r?i-1:0,h=r?-1:1,p=e[t+l];for(l+=h,o=p&(1<<-c)-1,p>>=-c,c+=u;c>0;o=256*o+e[t+l],l+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+l],l+=h,c-=8);if(0===o)o=1-f;else{if(o===a)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=f}return(p?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,u,a,f=8*o-i-1,c=(1<<f)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),(t+=s+l>=1?h/a:h*Math.pow(2,1-l))*a>=2&&(s++,a/=2),s+l>=c?(u=0,s=c):s+l>=1?(u=(t*a-1)*Math.pow(2,i),s+=l):(u=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&u,p+=d,u/=256,i-=8);for(s=s<<i|u,f+=i;f>0;e[r+p]=255&s,p+=d,s/=256,f-=8);e[r+p-d]|=128*_}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return\"[object Array]\"==r.call(e)}},function(e,t){var r,n,i=e.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function s(){throw new Error(\"clearTimeout has not been defined\")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r=\"function\"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n=\"function\"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a,f=[],c=!1,l=-1;function h(){c&&a&&(c=!1,a.length?f=a.concat(f):l=-1,f.length&&p())}function p(){if(!c){var e=u(h);c=!0;for(var t=f.length;t;){for(a=f,f=[];++l<t;)a&&a[l].run();l=-1,t=f.length}a=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function _(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new d(e,t)),1!==f.length||c||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title=\"browser\",i.browser=!0,i.env={},i.argv=[],i.version=\"\",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(e){return[]},i.binding=function(e){throw new Error(\"process.binding is not supported\")},i.cwd=function(){return\"/\"},i.chdir=function(e){throw new Error(\"process.chdir is not supported\")},i.umask=function(){return 0}},function(e,t,r){\"use strict\";r.r(t);var n,i=r(1);!function(e){e[e.ActiveUserChanged=0]=\"ActiveUserChanged\",e[e.ListenerRegistered=1]=\"ListenerRegistered\",e[e.UserAdded=2]=\"UserAdded\",e[e.UserLinked=3]=\"UserLinked\",e[e.UserLoggedIn=4]=\"UserLoggedIn\",e[e.UserLoggedOut=5]=\"UserLoggedOut\",e[e.UserRemoved=6]=\"UserRemoved\"}(n||(n={}));var o,s=function(){function e(e,t,r,n,i,o,s,u){this.userId=e,this.deviceId=t,this.accessToken=r,this.refreshToken=n,this.loggedInProviderType=i,this.loggedInProviderName=o,this.lastAuthActivity=s,this.userProfile=u}return e.empty=function(){return new e(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)},Object.defineProperty(e.prototype,\"hasUser\",{get:function(){return void 0!==this.userId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isEmpty\",{get:function(){return void 0===this.deviceId},enumerable:!0,configurable:!0}),e.prototype.loggedOut=function(){return new e(this.userId,this.deviceId,void 0,void 0,this.loggedInProviderType,this.loggedInProviderName,new Date,this.userProfile)},e.prototype.withClearedUser=function(){return new e(void 0,this.deviceId,void 0,void 0,void 0,void 0,void 0,void 0)},e.prototype.withAuthProvider=function(t,r){return new e(this.userId,this.deviceId,this.accessToken,this.refreshToken,t,r,new Date,this.userProfile)},e.prototype.withNewAuthActivityTime=function(){return new e(this.userId,this.deviceId,this.accessToken,this.refreshToken,this.loggedInProviderType,this.loggedInProviderName,new Date,this.userProfile)},Object.defineProperty(e.prototype,\"isLoggedIn\",{get:function(){return void 0!==this.accessToken&&void 0!==this.refreshToken},enumerable:!0,configurable:!0}),e.prototype.merge=function(t){return new e(void 0===t.userId?this.userId:t.userId,void 0===t.deviceId?this.deviceId:t.deviceId,void 0===t.accessToken?this.accessToken:t.accessToken,void 0===t.refreshToken?this.refreshToken:t.refreshToken,void 0===t.loggedInProviderType?this.loggedInProviderType:t.loggedInProviderType,void 0===t.loggedInProviderName?this.loggedInProviderName:t.loggedInProviderName,void 0===t.lastAuthActivity?this.lastAuthActivity:t.lastAuthActivity,void 0===t.userProfile?this.userProfile:t.userProfile)},e}(),u=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this),this.message=e,this.name=this.constructor.name};a.prototype=Object.create(Error.prototype);var f,c,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(a);!function(e){e[e.TRANSPORT_ERROR=0]=\"TRANSPORT_ERROR\",e[e.DECODING_ERROR=1]=\"DECODING_ERROR\",e[e.ENCODING_ERROR=2]=\"ENCODING_ERROR\"}(c||(c={}));var h,p=((f={})[c.TRANSPORT_ERROR]=\"the request transport encountered an error communicating with Stitch\",f[c.DECODING_ERROR]=\"an error occurred while decoding a response from Stitch\",f[c.ENCODING_ERROR]=\"an error occurred while encoding a request for Stitch\",f),d=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_=function(e){function t(t,r){var n=this,i=\"(\"+c[r]+\"): \"+p[r]+\": \"+t.message;return(n=e.call(this,i)||this).underlyingError=t,n.errorCode=r,n.errorCodeName=c[r],n}return d(t,e),t}(l);!function(e){e[e.MissingAuthReq=0]=\"MissingAuthReq\",e[e.InvalidSession=1]=\"InvalidSession\",e[e.UserAppDomainMismatch=2]=\"UserAppDomainMismatch\",e[e.DomainNotAllowed=3]=\"DomainNotAllowed\",e[e.ReadSizeLimitExceeded=4]=\"ReadSizeLimitExceeded\",e[e.InvalidParameter=5]=\"InvalidParameter\",e[e.MissingParameter=6]=\"MissingParameter\",e[e.TwilioError=7]=\"TwilioError\",e[e.GCMError=8]=\"GCMError\",e[e.HTTPError=9]=\"HTTPError\",e[e.AWSError=10]=\"AWSError\",e[e.MongoDBError=11]=\"MongoDBError\",e[e.ArgumentsNotAllowed=12]=\"ArgumentsNotAllowed\",e[e.FunctionExecutionError=13]=\"FunctionExecutionError\",e[e.NoMatchingRuleFound=14]=\"NoMatchingRuleFound\",e[e.InternalServerError=15]=\"InternalServerError\",e[e.AuthProviderNotFound=16]=\"AuthProviderNotFound\",e[e.AuthProviderAlreadyExists=17]=\"AuthProviderAlreadyExists\",e[e.ServiceNotFound=18]=\"ServiceNotFound\",e[e.ServiceTypeNotFound=19]=\"ServiceTypeNotFound\",e[e.ServiceAlreadyExists=20]=\"ServiceAlreadyExists\",e[e.ServiceCommandNotFound=21]=\"ServiceCommandNotFound\",e[e.ValueNotFound=22]=\"ValueNotFound\",e[e.ValueAlreadyExists=23]=\"ValueAlreadyExists\",e[e.ValueDuplicateName=24]=\"ValueDuplicateName\",e[e.FunctionNotFound=25]=\"FunctionNotFound\",e[e.FunctionAlreadyExists=26]=\"FunctionAlreadyExists\",e[e.FunctionDuplicateName=27]=\"FunctionDuplicateName\",e[e.FunctionSyntaxError=28]=\"FunctionSyntaxError\",e[e.FunctionInvalid=29]=\"FunctionInvalid\",e[e.IncomingWebhookNotFound=30]=\"IncomingWebhookNotFound\",e[e.IncomingWebhookAlreadyExists=31]=\"IncomingWebhookAlreadyExists\",e[e.IncomingWebhookDuplicateName=32]=\"IncomingWebhookDuplicateName\",e[e.RuleNotFound=33]=\"RuleNotFound\",e[e.ApiKeyNotFound=34]=\"ApiKeyNotFound\",e[e.RuleAlreadyExists=35]=\"RuleAlreadyExists\",e[e.RuleDuplicateName=36]=\"RuleDuplicateName\",e[e.AuthProviderDuplicateName=37]=\"AuthProviderDuplicateName\",e[e.RestrictedHost=38]=\"RestrictedHost\",e[e.ApiKeyAlreadyExists=39]=\"ApiKeyAlreadyExists\",e[e.IncomingWebhookAuthFailed=40]=\"IncomingWebhookAuthFailed\",e[e.ExecutionTimeLimitExceeded=41]=\"ExecutionTimeLimitExceeded\",e[e.FunctionNotCallable=42]=\"FunctionNotCallable\",e[e.UserAlreadyConfirmed=43]=\"UserAlreadyConfirmed\",e[e.UserNotFound=44]=\"UserNotFound\",e[e.UserDisabled=45]=\"UserDisabled\",e[e.Unknown=46]=\"Unknown\"}(h||(h={}));var y={APIKeyAlreadyExists:h.ApiKeyAlreadyExists,APIKeyNotFound:h.ApiKeyNotFound,AWSError:h.AWSError,ArgumentsNotAllowed:h.ArgumentsNotAllowed,AuthProviderAlreadyExists:h.AuthProviderAlreadyExists,AuthProviderDuplicateName:h.AuthProviderDuplicateName,AuthProviderNotFound:h.AuthProviderNotFound,DomainNotAllowed:h.DomainNotAllowed,ExecutionTimeLimitExceeded:h.ExecutionTimeLimitExceeded,FunctionAlreadyExists:h.FunctionAlreadyExists,FunctionDuplicateName:h.FunctionDuplicateName,FunctionExecutionError:h.FunctionExecutionError,FunctionInvalid:h.FunctionInvalid,FunctionNotCallable:h.FunctionNotCallable,FunctionNotFound:h.FunctionNotFound,FunctionSyntaxError:h.FunctionSyntaxError,GCMError:h.GCMError,HTTPError:h.HTTPError,IncomingWebhookAlreadyExists:h.IncomingWebhookAlreadyExists,IncomingWebhookAuthFailed:h.IncomingWebhookAuthFailed,IncomingWebhookDuplicateName:h.IncomingWebhookDuplicateName,IncomingWebhookNotFound:h.IncomingWebhookNotFound,InternalServerError:h.InternalServerError,InvalidParameter:h.InvalidParameter,InvalidSession:h.InvalidSession,MissingAuthReq:h.MissingAuthReq,MissingParameter:h.MissingParameter,MongoDBError:h.MongoDBError,NoMatchingRuleFound:h.NoMatchingRuleFound,ReadSizeLimitExceeded:h.ReadSizeLimitExceeded,RestrictedHost:h.RestrictedHost,RuleAlreadyExists:h.RuleAlreadyExists,RuleDuplicateName:h.RuleDuplicateName,RuleNotFound:h.RuleNotFound,ServiceAlreadyExists:h.ServiceAlreadyExists,ServiceCommandNotFound:h.ServiceCommandNotFound,ServiceNotFound:h.ServiceNotFound,ServiceTypeNotFound:h.ServiceTypeNotFound,TwilioError:h.TwilioError,UserAlreadyConfirmed:h.UserAlreadyConfirmed,UserAppDomainMismatch:h.UserAppDomainMismatch,UserDisabled:h.UserDisabled,UserNotFound:h.UserNotFound,ValueAlreadyExists:h.ValueAlreadyExists,ValueDuplicateName:h.ValueDuplicateName,ValueNotFound:h.ValueNotFound};function g(e){return e in y?y[e]:h.Unknown}var b,v,m=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),E=function(e){function t(t,r){void 0===r&&(r=h.Unknown);var n=e.call(this,t)||this;return n.message=t,n.errorCode=r,n.errorCodeName=h[r],n}return m(t,e),t}(l),A=function(){function e(){}return e.APPLICATION_JSON=\"application/json\",e.TEXT_EVENT_STREAM=\"text/event-stream\",e}(),w=function(){function e(){}return e.getAuthorizationBearer=function(t){return e.AUTHORIZATION_BEARER+\" \"+t},e.CONTENT_TYPE_CANON=\"Content-Type\",e.CONTENT_TYPE=e.CONTENT_TYPE_CANON.toLocaleLowerCase(),e.AUTHORIZATION_CANON=\"Authorization\",e.AUTHORIZATION=e.AUTHORIZATION_CANON.toLocaleLowerCase(),e.ACCEPT_CANON=\"Accept\",e.ACCEPT=e.ACCEPT_CANON.toLocaleLowerCase(),e.AUTHORIZATION_BEARER=\"Bearer\",e}();function N(e){return e instanceof l?e:new _(e,c.DECODING_ERROR)}function O(e){if(void 0===e.body)throw new E(\"received unexpected status code \"+e.statusCode,h.Unknown);var t;try{t=e.body}catch(t){throw new E(\"received unexpected status code \"+e.statusCode,h.Unknown)}var r=function(e,t){if(void 0===e.headers[w.CONTENT_TYPE]||void 0!==e.headers[w.CONTENT_TYPE]&&e.headers[w.CONTENT_TYPE]!==A.APPLICATION_JSON)return t;var r=JSON.parse(t);if(!(r instanceof Object))return t;var n=r;if(void 0===n[b.ERROR])return t;var i=n[b.ERROR];if(void 0===n[b.ERROR_CODE])return i;var o=n[b.ERROR_CODE];throw new E(i,g(o))}(e,t);throw new E(r,h.Unknown)}!function(e){e.ERROR=\"error\",e.ERROR_CODE=\"error_code\"}(b||(b={})),function(e){e.GET=\"GET\",e.POST=\"POST\",e.PUT=\"PUT\",e.DELETE=\"DELETE\",e.HEAD=\"HEAD\",e.OPTIONS=\"OPTIONS\",e.TRACE=\"TRACE\",e.PATCH=\"PATCH\"}(v||(v={}));var S=v,T=function(){function e(e,t,r,n,i){this.method=e,this.path=t,this.headers=r,this.body=i,this.startedAt=n}return Object.defineProperty(e.prototype,\"builder\",{get:function(){return new e.Builder(this)},enumerable:!0,configurable:!0}),e}();!function(e){var t=function(){function t(e){void 0!==e&&(this.method=e.method,this.path=e.path,this.headers=e.headers,this.body=e.body,this.startedAt=e.startedAt)}return t.prototype.withMethod=function(e){return this.method=e,this},t.prototype.withPath=function(e){return this.path=e,this},t.prototype.withHeaders=function(e){return this.headers=e,this},t.prototype.withBody=function(e){return this.body=e,this},t.prototype.build=function(){if(void 0===this.method)throw Error(\"must set method\");if(void 0===this.path)throw Error(\"must set non-empty path\");return void 0===this.startedAt&&(this.startedAt=Date.now()/1e3),new e(this.method,this.path,void 0===this.headers?{}:this.headers,this.startedAt,this.body)},t}();e.Builder=t}(T||(T={}));var B,I,R=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),D=function(e){function t(t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!0);var i=e.call(this,t.method,t.path,t.headers,t.startedAt,t.body)||this;return i.useRefreshToken=r,i.shouldRefreshOnFailure=n,i}return R(t,e),Object.defineProperty(t.prototype,\"builder\",{get:function(){return new t.Builder(this)},enumerable:!0,configurable:!0}),t}(T);B=D||(D={}),I=function(e){function t(t){return e.call(this,t)||this}return R(t,e),t.prototype.withAccessToken=function(){return this.useRefreshToken=!1,this},t.prototype.withRefreshToken=function(){return this.useRefreshToken=!0,this},t.prototype.withShouldRefreshOnFailure=function(e){return this.shouldRefreshOnFailure=e,this},t.prototype.build=function(){return this.useRefreshToken&&(this.shouldRefreshOnFailure=!1),new B(e.prototype.build.call(this),this.useRefreshToken,this.shouldRefreshOnFailure)},t}(T.Builder),B.Builder=I;var P=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),U=function(e){function t(t,r){var n=this;return(n=t instanceof D?e.call(this,t,t.useRefreshToken,t.shouldRefreshOnFailure)||this:e.call(this,t)||this).document=r,n}return P(t,e),Object.defineProperty(t.prototype,\"builder\",{get:function(){return new t.Builder(this)},enumerable:!0,configurable:!0}),t}(D);!function(e){var t=function(t){function r(e){var r=t.call(this,e)||this;return void 0!==e&&(r.document=e.document,r.useRefreshToken=e.useRefreshToken),r}return P(r,t),r.prototype.withDocument=function(e){return this.document=e,this},r.prototype.withAccessToken=function(){return this.useRefreshToken=!1,this},r.prototype.build=function(){if(void 0===this.document||!(this.document instanceof Object))throw new Error(\"document must be set: \"+this.document);return void 0===this.headers&&this.withHeaders({}),this.headers[w.CONTENT_TYPE]=A.APPLICATION_JSON,this.withBody(i.a.stringify(this.document,{relaxed:!1})),new e(t.prototype.build.call(this),this.document)},r}(D.Builder);e.Builder=t}(U||(U={}));var C,x,M=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=function(e){function t(t,r){var n=e.call(this,t.method,t.path,t.headers,t.startedAt,t.body)||this;return n.document=r,n}return M(t,e),Object.defineProperty(t.prototype,\"builder\",{get:function(){return new t.Builder(this)},enumerable:!0,configurable:!0}),t}(T);!function(e){var t=function(t){function r(e){var r=t.call(this,e)||this;return void 0!==e&&(r.document=e.document),r}return M(r,t),r.prototype.withDocument=function(e){return this.document=e,this},r.prototype.build=function(){if(void 0===this.document||!(this.document instanceof Object))throw new Error(\"document must be set\");return void 0===this.headers&&this.withHeaders({}),this.headers[w.CONTENT_TYPE]=A.APPLICATION_JSON,this.withBody(i.a.stringify(this.document,{relaxed:!1})),new e(t.prototype.build.call(this),this.document)},r}(T.Builder);e.Builder=t}(k||(k={})),function(e){e[e.LoggedOutDuringRequest=0]=\"LoggedOutDuringRequest\",e[e.MustAuthenticateFirst=1]=\"MustAuthenticateFirst\",e[e.UserNoLongerValid=2]=\"UserNoLongerValid\",e[e.UserNotFound=3]=\"UserNotFound\",e[e.UserNotLoggedIn=4]=\"UserNotLoggedIn\",e[e.CouldNotLoadPersistedAuthInfo=5]=\"CouldNotLoadPersistedAuthInfo\",e[e.CouldNotPersistAuthInfo=6]=\"CouldNotPersistAuthInfo\",e[e.StreamingNotSupported=7]=\"StreamingNotSupported\",e[e.StreamClosed=8]=\"StreamClosed\",e[e.UnexpectedArguments=9]=\"UnexpectedArguments\"}(x||(x={}));var L,j=((C={})[x.LoggedOutDuringRequest]=\"logged out while making a request to Stitch\",C[x.MustAuthenticateFirst]=\"method called requires being authenticated\",C[x.UserNoLongerValid]=\"user instance being accessed is no longer valid; please get a new user with auth.getUser()\",C[x.UserNotFound]=\"user not found in list of users\",C[x.UserNotLoggedIn]=\"cannot make the active user a logged out user; please use loginWithCredential() to switch to this user\",C[x.CouldNotLoadPersistedAuthInfo]=\"failed to load stored auth information for Stitch\",C[x.CouldNotPersistAuthInfo]=\"failed to save auth information for Stitch\",C[x.StreamingNotSupported]=\"streaming not supported in this SDK\",C[x.StreamClosed]=\"stream is closed\",C[x.UnexpectedArguments]=\"function does not accept arguments\",C),F=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),z=function(e){function t(t){var r=this,n=\"(\"+x[t]+\"): \"+j[t];return(r=e.call(this,n)||this).errorCode=t,r.errorCodeName=x[t],r}return F(t,e),t}(l),Y=function(){function e(e,t){this.eventName=e,this.data=t}return e.MESSAGE_EVENT=\"message\",e}(),K=function(){function e(t,r,n){this.eventName=t,r=r||\"\";for(var o=[],s=0;s<r.length;s++){var u=r[s];switch(u){case\"%\":if(s+2>=r.length)break;var a=void 0;switch(r.substring(s+1,s+3)){case\"25\":a=!0,o.push(\"%\");break;case\"0A\":a=!0,o.push(\"\\n\");break;case\"0D\":a=!0,o.push(\"\\r\");break;default:a=!1}if(a){s+=2;continue}}o.push(u)}var f=o.join(\"\");switch(this.eventName){case e.ERROR_EVENT_NAME:var c=void 0,l=void 0;try{var p=i.a.parse(f,{strict:!1});c=p[L.Error],l=g(p[L.ErrorCode])}catch(e){c=f,l=h.Unknown}this.error=new E(c,l);break;case Y.MESSAGE_EVENT:this.data=i.a.parse(f,{strict:!1}),n&&(this.data=n.decode(this.data))}}return e.fromEvent=function(t,r){return new e(t.eventName,t.data,r)},e.ERROR_EVENT_NAME=\"error\",e}();!function(e){e.Error=\"error\",e.ErrorCode=\"error_code\"}(L||(L={}));var J=function(){function e(e,t){this.eventStream=e,this.decoder=t,this.listeners=[]}return e.prototype.next=function(){var e=this;return this.eventStream.nextEvent().then((function(t){var r=K.fromEvent(t,e.decoder);if(r.eventName===K.ERROR_EVENT_NAME)throw r.error;return r.eventName===Y.MESSAGE_EVENT?r.data:e.next()}))},e.prototype.onNext=function(e){var t=this,r={onEvent:function(r){var n=K.fromEvent(r,t.decoder);n.eventName===Y.MESSAGE_EVENT&&e(n.data)}};this.eventStream.addListener(r)},e.prototype.onError=function(e){var t=this,r={onEvent:function(r){var n=K.fromEvent(r,t.decoder);n.eventName===K.ERROR_EVENT_NAME&&e(n.error)}};this.eventStream.addListener(r)},e.prototype.addListener=function(e){var t=this,r={onEvent:function(r){var n=K.fromEvent(r,t.decoder);n.eventName===K.ERROR_EVENT_NAME?e.onError&&e.onError(n.error):e.onNext&&e.onNext(n.data)}};this.listeners.push([e,r]),this.eventStream.addListener(r)},e.prototype.removeListener=function(e){for(var t=-1,r=0;r<this.listeners.length;r++)if(this.listeners[r][0]===e){t=r;break}if(-1!==t){var n=this.listeners[t][1];this.listeners.splice(t,1),this.eventStream.removeListener(n)}},e.prototype.isOpen=function(){return this.eventStream.isOpen()},e.prototype.close=function(){this.eventStream.close()},e}(),W=function(){function e(e,t,r){void 0===t&&(t={}),void 0===r&&(r=[]),this.userType=e,this.data=t,this.identities=r}return e.empty=function(){return new e},Object.defineProperty(e.prototype,\"name\",{get:function(){return this.data.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"email\",{get:function(){return this.data.email},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"pictureUrl\",{get:function(){return this.data.picture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"firstName\",{get:function(){return this.data.first_name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"lastName\",{get:function(){return this.data.last_name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"gender\",{get:function(){return this.data.gender},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"birthday\",{get:function(){return this.data.birthday},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"minAge\",{get:function(){var e=this.data.min_age;if(void 0!==e)return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"maxAge\",{get:function(){var e=this.data.max_age;if(void 0!==e)return e},enumerable:!0,configurable:!0}),e}(),q=function(){function e(e,t,r,n,i,o,s){this.id=e,this.loggedInProviderType=t,this.loggedInProviderName=r,this.profile=void 0===o?W.empty():o,this.isLoggedIn=n,this.lastAuthActivity=i,this.customData=void 0===s?{}:s}return Object.defineProperty(e.prototype,\"userType\",{get:function(){return this.profile.userType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"identities\",{get:function(){return this.profile.identities},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){return this.id===e.id&&JSON.stringify(this.identities)===JSON.stringify(e.identities)&&this.isLoggedIn===e.isLoggedIn&&this.loggedInProviderName===e.loggedInProviderName&&this.loggedInProviderType===e.loggedInProviderType&&JSON.stringify(this.profile)===JSON.stringify(e.profile)},e}(),V=function(){function e(){}return e.TYPE=\"anon-user\",e.DEFAULT_NAME=\"anon-user\",e}(),X=function(e,t,r,n){this.authInfo=e,this.providerType=t,this.providerName=r,this.asLink=n},H=r(3);function G(e){var t,r=e.length%4;0!=r?t=e+\"=\".repeat(4-r):t=e;var n=Object(H.toByteArray)(t);return function(e,t,r){var n=\"\",i=\"\";r=Math.min(e.length,r||1/0);for(var o=t=t||0;o<r;o++)e[o]<=127?(n+=ee(i)+String.fromCharCode(e[o]),i=\"\"):i+=\"%\"+e[o].toString(16);return n+ee(i)}(n,0,n.length)}function Z(e){var t;return\"undefined\"==typeof Uint8Array&&(t=Q(e)),t=new Uint8Array(Q(e)),Object(H.fromByteArray)(t)}function Q(e){for(var t,r=1/0,n=e.length,i=null,o=[],s=0;s<n;s++){if((t=e.charCodeAt(s))>55295&&t<57344){if(!i){if(t>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(r-=3)>-1&&o.push(239,191,189),i=t;continue}t=i-55296<<10|t-56320|65536,i=null}else i&&((r-=3)>-1&&o.push(239,191,189),i=null);if(t<128){if((r-=1)<0)break;o.push(t)}else if(t<2048){if((r-=2)<0)break;o.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;o.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<2097152))throw new Error(\"Invalid code point\");if((r-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return o}function ee(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}var te,re=function(){function e(e,t,r){this.expires=e,this.issuedAt=t,this.userData=r}return e.fromEncoded=function(t){var r=e.splitToken(t),n=JSON.parse(G(r[1]));return new e(n.exp,n.iat,n.user_data)},e.splitToken=function(e){var t=e.split(\".\");if(3!==t.length)throw new Error(\"Malformed JWT token. The string \"+e+\" should have 3 parts.\");return t},e}(),ne=function(){function e(e){this.auth=e}return e.prototype.shouldRefresh=function(){var e=this.auth;if(void 0===e)return!1;if(!e.isLoggedIn)return!1;var t,r=e.authInfo;if(void 0===r)return!1;if(!r.isLoggedIn)return!1;try{t=re.fromEncoded(r.accessToken)}catch(e){return console.log(e),!1}return!(Date.now()/1e3<t.expires-300)},e.prototype.run=function(){var e=this;this.shouldRefresh()?this.auth.refreshAccessToken().then((function(){e.nextTimeout=setTimeout((function(){return e.run()}),6e4)})).catch((function(){e.nextTimeout=setTimeout((function(){return e.run()}),6e4)})):this.nextTimeout=setTimeout((function(){return e.run()}),6e4)},e.prototype.stop=function(){clearTimeout(this.nextTimeout)},e}(),ie=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.USER_ID=\"user_id\",e.DEVICE_ID=\"device_id\",e.ACCESS_TOKEN=\"access_token\",e.REFRESH_TOKEN=\"refresh_token\"}(te||(te={}));var oe,se=function(e){function t(t,r,n,i){return e.call(this,t,r,n,i)||this}return ie(t,e),t.fromJSON=function(e){return new t(e[te.USER_ID],e[te.DEVICE_ID],e[te.ACCESS_TOKEN],e[te.REFRESH_TOKEN])},t.prototype.toJSON=function(){var e;return(e={})[te.USER_ID]=this.userId,e[te.DEVICE_ID]=this.deviceId,e[te.ACCESS_TOKEN]=this.accessToken,e[te.REFRESH_TOKEN]=this.refreshToken,e},t}(s),ue=function(){function e(){}return e.keyPresent=function(e,t){if(void 0===t[e])throw new Error(\"expected \"+e+\" to be present\")},e}(),ae=function(e,t){this.id=e,this.providerType=t},fe=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.ID=\"id\",e.PROVIDER_TYPE=\"provider_type\"}(oe||(oe={}));var ce,le=function(e){function t(t,r){return e.call(this,t,r)||this}return fe(t,e),t.fromJSON=function(e){return new t(e[oe.ID],e[oe.PROVIDER_TYPE])},t.prototype.toJSON=function(){var e;return(e={})[oe.ID]=this.id,e[oe.PROVIDER_TYPE]=this.providerType,e},t}(ae),he=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.DATA=\"data\",e.USER_TYPE=\"type\",e.IDENTITIES=\"identities\"}(ce||(ce={}));var pe,de=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return he(t,e),t.fromJSON=function(e){return ue.keyPresent(ce.USER_TYPE,e),ue.keyPresent(ce.DATA,e),ue.keyPresent(ce.IDENTITIES,e),new t(e[ce.USER_TYPE],e[ce.DATA],e[ce.IDENTITIES].map(le.fromJSON))},t.prototype.toJSON=function(){var e;return(e={})[ce.DATA]=this.data,e[ce.USER_TYPE]=this.userType,e[ce.IDENTITIES]=this.identities,e},t}(W),_e=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.ID=\"id\",e.PROVIDER_TYPE=\"provider_type\"}(pe||(pe={}));var ye,ge=function(e){function t(t,r){return e.call(this,t,r)||this}return _e(t,e),t.decode=function(e){return new t(e[pe.ID],e[pe.PROVIDER_TYPE])},t.prototype.encode=function(){var e;return(e={})[pe.ID]=this.id,e[pe.PROVIDER_TYPE]=this.providerType,e},t}(ae),be=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.DATA=\"data\",e.USER_TYPE=\"type\",e.IDENTITIES=\"identities\"}(ye||(ye={}));var ve,me=function(e){function t(t,r,n){var i=e.call(this,t,r,n)||this;return i.userType=t,i.data=r,i.identities=n,i}return be(t,e),t.decode=function(e){return e?new t(e[ye.USER_TYPE],e[ye.DATA],e[ye.IDENTITIES].map((function(e){return ge.decode(e)}))):void 0},t.prototype.encode=function(){var e;return(e={})[ye.DATA]=this.data,e[ye.USER_TYPE]=this.userType,e[ye.IDENTITIES]=this.identities.map((function(e){return e.encode()})),e},t}(W),Ee=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ae(e,t){if(e.isEmpty)t.remove(Oe.ACTIVE_USER_STORAGE_NAME);else{var r=new Oe(e.userId,e.deviceId,e.accessToken,e.refreshToken,e.loggedInProviderType,e.loggedInProviderName,e.lastAuthActivity,e.userProfile?new me(e.userProfile.userType,e.userProfile.data,e.userProfile.identities.map((function(e){return new ge(e.id,e.providerType)}))):void 0);t.set(Oe.ACTIVE_USER_STORAGE_NAME,JSON.stringify(r.encode()))}}function we(e,t){var r=[];e.forEach((function(e,t){var n=new Oe(t,e.deviceId,e.accessToken,e.refreshToken,e.loggedInProviderType,e.loggedInProviderName,e.lastAuthActivity,e.userProfile?new me(e.userProfile.userType,e.userProfile.data,e.userProfile.identities.map((function(e){return new ge(e.id,e.providerType)}))):void 0);r.push(n.encode())})),t.set(Oe.ALL_USERS_STORAGE_NAME,JSON.stringify(r))}!function(e){e.USER_ID=\"user_id\",e.DEVICE_ID=\"device_id\",e.ACCESS_TOKEN=\"access_token\",e.REFRESH_TOKEN=\"refresh_token\",e.LAST_AUTH_ACTIVITY=\"last_auth_activity\",e.LOGGED_IN_PROVIDER_TYPE=\"logged_in_provider_type\",e.LOGGED_IN_PROVIDER_NAME=\"logged_in_provider_name\",e.USER_PROFILE=\"user_profile\"}(ve||(ve={}));var Ne,Oe=function(e){function t(t,r,n,i,o,s,u,a){var f=e.call(this,t,r,n,i,o,s,u,a)||this;return f.userProfile=a,f}return Ee(t,e),t.decode=function(e){var r=e[ve.USER_ID],n=e[ve.DEVICE_ID],i=e[ve.ACCESS_TOKEN],o=e[ve.REFRESH_TOKEN],s=e[ve.LOGGED_IN_PROVIDER_TYPE],u=e[ve.LOGGED_IN_PROVIDER_NAME],a=e[ve.USER_PROFILE],f=e[ve.LAST_AUTH_ACTIVITY];return new t(r,n,i,o,s,u,new Date(f),me.decode(a))},t.prototype.encode=function(){var e={};return e[ve.USER_ID]=this.userId,e[ve.ACCESS_TOKEN]=this.accessToken,e[ve.REFRESH_TOKEN]=this.refreshToken,e[ve.DEVICE_ID]=this.deviceId,e[ve.LOGGED_IN_PROVIDER_NAME]=this.loggedInProviderName,e[ve.LOGGED_IN_PROVIDER_TYPE]=this.loggedInProviderType,e[ve.LAST_AUTH_ACTIVITY]=this.lastAuthActivity?this.lastAuthActivity.getTime():void 0,e[ve.USER_PROFILE]=this.userProfile?this.userProfile.encode():void 0,e},t.ACTIVE_USER_STORAGE_NAME=\"auth_info\",t.ALL_USERS_STORAGE_NAME=\"all_auth_infos\",t}(s),Se=function(e){var t=\"function\"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},Te=function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},Be=function(){function e(e,t,r,n){var i,o;void 0===n&&(n=!0),this.requestClient=e,this.authRoutes=t,this.storage=r;try{i=function(e){var t=e.get(Oe.ALL_USERS_STORAGE_NAME);if(!t)return new Map;var r=JSON.parse(t);if(!Array.isArray(r))throw new z(x.CouldNotLoadPersistedAuthInfo);var n=new Map;return r.forEach((function(e){var t=Oe.decode(e);n.set(t.userId,t)})),n}(r)}catch(e){throw new z(x.CouldNotLoadPersistedAuthInfo)}this.allUsersAuthInfo=i;try{o=function(e){var t=e.get(Oe.ACTIVE_USER_STORAGE_NAME);if(t)return Oe.decode(JSON.parse(t))}(r)}catch(e){throw new z(x.CouldNotLoadPersistedAuthInfo)}this.activeUserAuthInfo=void 0===o?s.empty():o,this.activeUserAuthInfo.hasUser&&(this.currentUser=this.prepUser(this.activeUserAuthInfo)),n&&(this.accessTokenRefresher=new ne(this),this.accessTokenRefresher.run())}return Object.defineProperty(e.prototype,\"authInfo\",{get:function(){return this.activeUserAuthInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isLoggedIn\",{get:function(){return void 0!==this.currentUser&&this.currentUser.isLoggedIn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"user\",{get:function(){return this.currentUser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"hasDeviceId\",{get:function(){return void 0!==this.activeUserAuthInfo.deviceId&&\"\"!==this.activeUserAuthInfo.deviceId&&\"000000000000000000000000\"!==this.activeUserAuthInfo.deviceId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"deviceId\",{get:function(){if(this.hasDeviceId)return this.activeUserAuthInfo.deviceId},enumerable:!0,configurable:!0}),e.prototype.listUsers=function(){var e=this,t=[];return this.allUsersAuthInfo.forEach((function(r){t.push(e.prepUser(r))})),t},e.prototype.doAuthenticatedRequest=function(e,t){var r=this;try{return this.requestClient.doRequest(this.prepareAuthRequest(e,t||this.activeUserAuthInfo)).catch((function(t){return r.handleAuthFailure(t,e)}))}catch(e){return Promise.reject(e)}},e.prototype.doAuthenticatedRequestWithDecoder=function(e,t){return this.doAuthenticatedRequest(e).then((function(e){var r=i.a.parse(e.body,{strict:!1});return t?t.decode(r):r})).catch((function(e){throw N(e)}))},e.prototype.openAuthenticatedEventStream=function(e,t){var r=this;if(void 0===t&&(t=!0),!this.isLoggedIn)throw new z(x.MustAuthenticateFirst);var n=e.useRefreshToken?this.activeUserAuthInfo.refreshToken:this.activeUserAuthInfo.accessToken;return this.requestClient.doStreamRequest(e.builder.withPath(e.path+\"&stitch_at=\"+n).build(),t,(function(){return r.openAuthenticatedEventStream(e,!1)})).catch((function(n){return r.handleAuthFailureForEventStream(n,e,t)}))},e.prototype.openAuthenticatedStreamWithDecoder=function(e,t){return this.openAuthenticatedEventStream(e).then((function(e){return new J(e,t)}))},e.prototype.refreshAccessToken=function(){var e=this,t=(new D.Builder).withRefreshToken().withPath(this.authRoutes.sessionRoute).withMethod(S.POST);return this.doAuthenticatedRequest(t.build()).then((function(t){try{var r=se.fromJSON(JSON.parse(t.body));if(e.activeUserAuthInfo=e.activeUserAuthInfo.merge(r),r.accessToken&&e.user instanceof q){var n=re.fromEncoded(r.accessToken).userData;e.user.customData=void 0===n?{}:n}}catch(e){throw new _(e,c.DECODING_ERROR)}try{Ae(e.activeUserAuthInfo,e.storage),e.allUsersAuthInfo.set(e.activeUserAuthInfo.userId,e.activeUserAuthInfo),we(e.allUsersAuthInfo,e.storage)}catch(e){throw new z(x.CouldNotPersistAuthInfo)}}))},e.prototype.switchToUserWithId=function(e){var t=this.allUsersAuthInfo.get(e);if(void 0===t)throw new z(x.UserNotFound);if(!t.isLoggedIn)throw new z(x.UserNotLoggedIn);this.activeUserAuthInfo.hasUser&&this.allUsersAuthInfo.set(this.activeUserAuthInfo.userId,this.activeUserAuthInfo.withNewAuthActivityTime());var r=t.withNewAuthActivityTime();this.allUsersAuthInfo.set(e,r),Ae(r,this.storage),this.activeUserAuthInfo=r;var i=this.currentUser;return this.currentUser=this.prepUser(r),this.onAuthEvent(),this.dispatchAuthEvent({currentActiveUser:this.currentUser,kind:n.ActiveUserChanged,previousActiveUser:i}),this.currentUser},e.prototype.loginWithCredentialInternal=function(e){var t,r,i=this;if(e instanceof X)return this.processLogin(e,e.authInfo,e.asLink).then((function(e){return i.dispatchAuthEvent({kind:n.UserLoggedIn,loggedInUser:e}),e}));if(e.providerCapabilities.reusesExistingSession)try{for(var o=Se(this.allUsersAuthInfo),s=o.next();!s.done;s=o.next()){var u=Te(s.value,2),a=u[0],f=u[1];if(f.loggedInProviderType===e.providerType){if(f.isLoggedIn)try{return Promise.resolve(this.switchToUserWithId(a))}catch(e){return Promise.reject(e)}void 0!==f.userId&&this.removeUserWithIdInternal(f.userId)}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return this.doLogin(e,!1)},e.prototype.linkUserWithCredentialInternal=function(e,t){return void 0!==this.currentUser&&e.id!==this.currentUser.id?Promise.reject(new z(x.UserNoLongerValid)):this.doLogin(t,!0)},e.prototype.logoutInternal=function(){return this.isLoggedIn&&this.currentUser?this.logoutUserWithIdInternal(this.currentUser.id):Promise.resolve()},e.prototype.logoutUserWithIdInternal=function(e){var t=this,r=this.allUsersAuthInfo.get(e);if(void 0===r)return Promise.reject(new z(x.UserNotFound));if(!r.isLoggedIn)return Promise.resolve();var n=function(){t.clearUserAuthTokens(r.userId),r.loggedInProviderType===V.TYPE&&t.removeUserWithIdInternal(r.userId)};return this.doLogout(r).then((function(){n()})).catch((function(){n()}))},e.prototype.removeUserInternal=function(){return this.isLoggedIn&&void 0!==this.currentUser?this.removeUserWithIdInternal(this.currentUser.id):Promise.resolve()},e.prototype.removeUserWithIdInternal=function(e){var t=this,r=this.allUsersAuthInfo.get(e);if(void 0===r)return Promise.reject(new z(x.UserNotFound));var i=function(){t.clearUserAuthTokens(r.userId),t.allUsersAuthInfo.delete(e),we(t.allUsersAuthInfo,t.storage);var i=t.prepUser(r.loggedOut());t.onAuthEvent(),t.dispatchAuthEvent({kind:n.UserRemoved,removedUser:i})};return r.isLoggedIn?this.doLogout(r).then((function(){i()})).catch((function(e){i()})):(i(),Promise.resolve())},e.prototype.close=function(){this.accessTokenRefresher&&this.accessTokenRefresher.stop()},e.prototype.prepareAuthRequest=function(e,t){if(!t.isLoggedIn)throw new z(x.MustAuthenticateFirst);var r=e.builder,n=r.headers||{};return e.useRefreshToken?n[w.AUTHORIZATION]=w.getAuthorizationBearer(t.refreshToken):n[w.AUTHORIZATION]=w.getAuthorizationBearer(t.accessToken),r.withHeaders(n),r.build()},e.prototype.handleAuthFailureForEventStream=function(e,t,r){var n=this;if(void 0===r&&(r=!0),!(e instanceof E)||e.errorCode!==h.InvalidSession)throw e;if(t.useRefreshToken||!t.shouldRefreshOnFailure)throw this.clearActiveUserAuth(),e;return this.tryRefreshAccessToken(t.startedAt).then((function(){return n.openAuthenticatedEventStream(t.builder.withShouldRefreshOnFailure(!1).build(),r)}))},e.prototype.handleAuthFailure=function(e,t){var r=this;if(!(e instanceof E)||e.errorCode!==h.InvalidSession)throw e;if(t.useRefreshToken||!t.shouldRefreshOnFailure)throw this.clearActiveUserAuth(),e;return this.tryRefreshAccessToken(t.startedAt).then((function(){return r.doAuthenticatedRequest(t.builder.withShouldRefreshOnFailure(!1).build())}))},e.prototype.tryRefreshAccessToken=function(e){if(!this.isLoggedIn)throw new z(x.LoggedOutDuringRequest);try{if(re.fromEncoded(this.activeUserAuthInfo.accessToken).issuedAt>=e)return Promise.resolve()}catch(e){}return this.refreshAccessToken()},e.prototype.prepUser=function(e){return this.userFactory.makeUser(e.userId,e.loggedInProviderType,e.loggedInProviderName,e.isLoggedIn,e.lastAuthActivity,e.userProfile)},e.prototype.attachAuthOptions=function(e){var t={};t.device=this.deviceInfo,e.options=t},e.prototype.doLogin=function(e,t){var r=this,i=this.currentUser;return this.doLoginRequest(e,t).then((function(n){return r.processLoginResponse(e,n,t)})).then((function(e){return r.onAuthEvent(),t?r.dispatchAuthEvent({kind:n.UserLinked,linkedUser:e}):(r.dispatchAuthEvent({kind:n.UserLoggedIn,loggedInUser:e}),r.dispatchAuthEvent({currentActiveUser:e,kind:n.ActiveUserChanged,previousActiveUser:i})),e}))},e.prototype.doLoginRequest=function(e,t){var r=new k.Builder;r.withMethod(S.POST),t?r.withPath(this.authRoutes.getAuthProviderLinkRoute(e.providerName)):r.withPath(this.authRoutes.getAuthProviderLoginRoute(e.providerName));var n=e.material;if(this.attachAuthOptions(n),r.withDocument(n),!t)return this.requestClient.doRequest(r.build());var i=new U(r.build(),r.document);return this.doAuthenticatedRequest(i)},e.prototype.processLogin=function(e,t,r){var i=this,o=this.activeUserAuthInfo,u=this.currentUser;return t=this.activeUserAuthInfo.merge(new s(t.userId,t.deviceId,t.accessToken,t.refreshToken,e.providerType,e.providerName,void 0,void 0)),this.activeUserAuthInfo=t,this.currentUser=this.userFactory.makeUser(this.activeUserAuthInfo.userId,e.providerType,e.providerName,this.activeUserAuthInfo.isLoggedIn,new Date,void 0,re.fromEncoded(t.accessToken).userData),this.doGetUserProfile().then((function(r){o.hasUser&&i.allUsersAuthInfo.set(o.userId,o.withNewAuthActivityTime()),t=t.merge(new s(t.userId,t.deviceId,t.accessToken,t.refreshToken,e.providerType,e.providerName,new Date,r));var a=!i.allUsersAuthInfo.has(t.userId);try{Ae(t,i.storage),i.allUsersAuthInfo.set(t.userId,t),we(i.allUsersAuthInfo,i.storage)}catch(e){throw i.activeUserAuthInfo=o,i.currentUser=u,t.userId!==o.userId&&t.userId&&i.allUsersAuthInfo.delete(t.userId),new z(x.CouldNotPersistAuthInfo)}return i.activeUserAuthInfo=t,i.currentUser=i.userFactory.makeUser(i.activeUserAuthInfo.userId,e.providerType,e.providerName,i.activeUserAuthInfo.isLoggedIn,i.activeUserAuthInfo.lastAuthActivity,r,re.fromEncoded(t.accessToken).userData),a&&(i.onAuthEvent(),i.dispatchAuthEvent({addedUser:i.currentUser,kind:n.UserAdded})),i.currentUser})).catch((function(e){if(e instanceof z)throw e;if(r||o.hasUser){var t=i.activeUserAuthInfo;i.activeUserAuthInfo=o,i.currentUser=u,r&&(i.activeUserAuthInfo=i.activeUserAuthInfo.withAuthProvider(t.loggedInProviderType,t.loggedInProviderName))}else i.clearActiveUserAuth();throw e}))},e.prototype.processLoginResponse=function(e,t,r){try{if(!t)throw new E(\"the login response could not be processed for credential: \"+e+\";response was undefined\");if(!t.body)throw new E(\"response with status code \"+t.statusCode+\" has empty body\");return this.processLogin(e,se.fromJSON(JSON.parse(t.body)),r)}catch(e){throw new _(e,c.DECODING_ERROR)}},e.prototype.doGetUserProfile=function(){var e=new D.Builder;return e.withMethod(S.GET).withPath(this.authRoutes.profileRoute),this.doAuthenticatedRequest(e.build()).then((function(e){return de.fromJSON(JSON.parse(e.body))})).catch((function(e){throw e instanceof l?e:new _(e,c.DECODING_ERROR)}))},e.prototype.doLogout=function(e){var t=new D.Builder;return t.withRefreshToken().withPath(this.authRoutes.sessionRoute).withMethod(S.DELETE),this.doAuthenticatedRequest(t.build(),e).then((function(){}))},e.prototype.clearActiveUserAuth=function(){this.isLoggedIn&&this.clearUserAuthTokens(this.activeUserAuthInfo.userId)},e.prototype.clearUserAuthTokens=function(e){var t=this.allUsersAuthInfo.get(e);if(void 0===t){if(this.activeUserAuthInfo.userId!==e)throw new z(x.UserNotFound)}else if(!t.isLoggedIn)return;try{var r=void 0;if(t){var i=t.loggedOut();this.allUsersAuthInfo.set(e,i),we(this.allUsersAuthInfo,this.storage),r=this.userFactory.makeUser(i.userId,i.loggedInProviderType,i.loggedInProviderName,i.isLoggedIn,i.lastAuthActivity,i.userProfile)}var o=!1;this.activeUserAuthInfo.hasUser&&this.activeUserAuthInfo.userId===e&&(o=!0,this.activeUserAuthInfo=this.activeUserAuthInfo.withClearedUser(),this.currentUser=void 0,Ae(this.activeUserAuthInfo,this.storage)),r&&(this.onAuthEvent(),this.dispatchAuthEvent({kind:n.UserLoggedOut,loggedOutUser:r}),o&&this.dispatchAuthEvent({currentActiveUser:void 0,kind:n.ActiveUserChanged,previousActiveUser:r}))}catch(e){throw new z(x.CouldNotPersistAuthInfo)}},e}();!function(e){e.DEVICE_ID=\"deviceId\",e.APP_ID=\"appId\",e.APP_VERSION=\"appVersion\",e.PLATFORM=\"platform\",e.PLATFORM_VERSION=\"platformVersion\",e.SDK_VERSION=\"sdkVersion\"}(Ne||(Ne={}));var Ie,Re=Ne,De=function(e){void 0===e&&(e=!1),this.reusesExistingSession=e},Pe=function(e){void 0===e&&(e=V.DEFAULT_NAME),this.providerType=V.TYPE,this.material={},this.providerCapabilities=new De(!0),this.providerName=e};!function(){function e(){}e.TYPE=\"custom-token\",e.DEFAULT_NAME=\"custom-token\"}();!function(e){e.TOKEN=\"token\"}(Ie||(Ie={}));var Ue,Ce=function(){function e(){}return e.TYPE=\"oauth2-facebook\",e.DEFAULT_NAME=\"oauth2-facebook\",e}();!function(e){e.ACCESS_TOKEN=\"accessToken\"}(Ue||(Ue={}));!function(){function e(e,t){var r;void 0===t&&(t=Ce.DEFAULT_NAME),this.providerType=Ce.TYPE,this.providerName=t,this.accessToken=e,this.material=((r={})[Ue.ACCESS_TOKEN]=this.accessToken,r)}Object.defineProperty(e.prototype,\"providerCapabilities\",{get:function(){return new De(!1)},enumerable:!0,configurable:!0})}();var $e,xe=function(){function e(){}return e.TYPE=\"custom-function\",e.DEFAULT_NAME=\"custom-function\",e}();(function(){function e(e,t){void 0===t&&(t=xe.DEFAULT_NAME),this.providerType=xe.TYPE,this.providerName=t,this.material=e}Object.defineProperty(e.prototype,\"providerCapabilities\",{get:function(){return new De(!1)},enumerable:!0,configurable:!0})})(),function(){function e(){}e.TYPE=\"oauth2-google\",e.DEFAULT_NAME=\"oauth2-google\"}();!function(e){e.AUTH_CODE=\"authCode\"}($e||($e={}));var Me;!function(){function e(){}e.TYPE=\"api-key\",e.DEFAULT_NAME=\"api-key\"}();!function(e){e.KEY=\"key\"}(Me||(Me={}));var ke,Le=function(e,t,r){this.providerName=e,this.requestClient=t,this.baseRoute=r};!function(e){e.ID=\"_id\",e.KEY=\"key\",e.NAME=\"name\",e.DISABLED=\"disabled\"}(ke||(ke={}));var je,Fe=function(){function e(e,t,r,n){this.id=i.b.ObjectID.createFromHexString(e),this.key=t,this.name=r,this.disabled=n}return e.readFromApi=function(t){var r=\"string\"==typeof t?JSON.parse(t):t;return ue.keyPresent(ke.ID,r),ue.keyPresent(ke.NAME,r),ue.keyPresent(ke.DISABLED,r),new e(r[ke.ID],r[ke.KEY],r[ke.NAME],r[ke.DISABLED])},e.prototype.toJSON=function(){var e;return(e={})[ke.ID]=this.id,e[ke.KEY]=this.key,e[ke.NAME]=this.name,e[ke.DISABLED]=this.disabled,e},e}(),ze=function(){function e(){}return e.TYPE=\"api-key\",e.DEFAULT_NAME=\"api-key\",e}(),Ye=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.NAME=\"name\"}(je||(je={}));var Ke,Je=function(e){function t(t,r){var n=r.baseAuthRoute+\"/api_keys\",i=ze.DEFAULT_NAME;return e.call(this,i,t,n)||this}return Ye(t,e),t.prototype.createApiKey=function(e){var t,r=new U.Builder;return r.withMethod(S.POST).withPath(this.baseRoute).withDocument((t={},t[je.NAME]=e,t)).withRefreshToken(),this.requestClient.doAuthenticatedRequest(r.build()).then((function(e){return Fe.readFromApi(e.body)})).catch((function(e){throw N(e)}))},t.prototype.fetchApiKey=function(e){var t=new D.Builder;return t.withMethod(S.GET).withPath(this.getApiKeyRoute(e.toHexString())),t.withRefreshToken(),this.requestClient.doAuthenticatedRequest(t.build()).then((function(e){return Fe.readFromApi(e.body)})).catch((function(e){throw N(e)}))},t.prototype.fetchApiKeys=function(){var e=new D.Builder;return e.withMethod(S.GET).withPath(this.baseRoute),e.withRefreshToken(),this.requestClient.doAuthenticatedRequest(e.build()).then((function(e){var t=JSON.parse(e.body);if(Array.isArray(t))return t.map((function(e){return Fe.readFromApi(e)}));throw new _(new Error(\"unexpected non-array response from server\"),c.DECODING_ERROR)})).catch((function(e){throw N(e)}))},t.prototype.deleteApiKey=function(e){var t=new D.Builder;return t.withMethod(S.DELETE).withPath(this.getApiKeyRoute(e.toHexString())),t.withRefreshToken(),this.requestClient.doAuthenticatedRequest(t.build()).then((function(){}))},t.prototype.enableApiKey=function(e){var t=new D.Builder;return t.withMethod(S.PUT).withPath(this.getApiKeyEnableRoute(e.toHexString())),t.withRefreshToken(),this.requestClient.doAuthenticatedRequest(t.build()).then((function(){}))},t.prototype.disableApiKey=function(e){var t=new D.Builder;return t.withMethod(S.PUT).withPath(this.getApiKeyDisableRoute(e.toHexString())),t.withRefreshToken(),this.requestClient.doAuthenticatedRequest(t.build()).then((function(){}))},t.prototype.getApiKeyRoute=function(e){return this.baseRoute+\"/\"+e},t.prototype.getApiKeyEnableRoute=function(e){return this.getApiKeyRoute(e)+\"/enable\"},t.prototype.getApiKeyDisableRoute=function(e){return this.getApiKeyRoute(e)+\"/disable\"},t}(Le);!function(e){e.KEY=\"key\"}(Ke||(Ke={}));var We,qe,Ve=function(){function e(){}return e.TYPE=\"local-userpass\",e.DEFAULT_NAME=\"local-userpass\",e}(),Xe=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.EMAIL=\"email\",e.PASSWORD=\"password\"}(We||(We={})),function(e){e.EMAIL=\"email\",e.PASSWORD=\"password\",e.TOKEN=\"token\",e.TOKEN_ID=\"tokenId\",e.ARGS=\"arguments\"}(qe||(qe={}));var He,Ge=function(e){function t(t,r,n){void 0===t&&(t=Ve.DEFAULT_NAME);var i=n.getAuthProviderRoute(t);return e.call(this,t,r,i)||this}return Xe(t,e),t.prototype.registerWithEmailInternal=function(e,t){var r,n=new k.Builder;return n.withMethod(S.POST).withPath(this.getRegisterWithEmailRoute()),n.withDocument(((r={})[We.EMAIL]=e,r[We.PASSWORD]=t,r)),this.requestClient.doRequest(n.build()).then((function(){}))},t.prototype.confirmUserInternal=function(e,t){var r,n=new k.Builder;return n.withMethod(S.POST).withPath(this.getConfirmUserRoute()),n.withDocument(((r={})[qe.TOKEN]=e,r[qe.TOKEN_ID]=t,r)),this.requestClient.doRequest(n.build()).then((function(){}))},t.prototype.resendConfirmationEmailInternal=function(e){var t,r=new k.Builder;return r.withMethod(S.POST).withPath(this.getResendConfirmationEmailRoute()),r.withDocument(((t={})[qe.EMAIL]=e,t)),this.requestClient.doRequest(r.build()).then((function(){}))},t.prototype.resetPasswordInternal=function(e,t,r){var n,i=new k.Builder;return i.withMethod(S.POST).withPath(this.getResetPasswordRoute()),i.withDocument(((n={})[qe.TOKEN]=e,n[qe.TOKEN_ID]=t,n[qe.PASSWORD]=r,n)),this.requestClient.doRequest(i.build()).then((function(){}))},t.prototype.sendResetPasswordEmailInternal=function(e){var t,r=new k.Builder;return r.withMethod(S.POST).withPath(this.getSendResetPasswordEmailRoute()),r.withDocument(((t={})[qe.EMAIL]=e,t)),this.requestClient.doRequest(r.build()).then((function(){}))},t.prototype.callResetPasswordFunctionInternal=function(e,t,r){var n,i=new k.Builder;return i.withMethod(S.POST).withPath(this.getCallResetPasswordFunctionRoute()),i.withDocument(((n={})[qe.EMAIL]=e,n[qe.PASSWORD]=t,n[qe.ARGS]=r,n)),this.requestClient.doRequest(i.build()).then((function(){}))},t.prototype.getRegisterWithEmailRoute=function(){return this.getExtensionRoute(\"register\")},t.prototype.getConfirmUserRoute=function(){return this.getExtensionRoute(\"confirm\")},t.prototype.getResendConfirmationEmailRoute=function(){return this.getExtensionRoute(\"confirm/send\")},t.prototype.getResetPasswordRoute=function(){return this.getExtensionRoute(\"reset\")},t.prototype.getSendResetPasswordEmailRoute=function(){return this.getExtensionRoute(\"reset/send\")},t.prototype.getCallResetPasswordFunctionRoute=function(){return this.getExtensionRoute(\"reset/call\")},t.prototype.getExtensionRoute=function(e){return this.baseRoute+\"/\"+e},t}(Le);!function(e){e.USERNAME=\"username\",e.PASSWORD=\"password\"}(He||(He={}));var Ze;!function(e){e.Normal=\"normal\",e.Server=\"server\",e.Unknown=\"unknown\"}(Ze||(Ze={}));!function(){function e(e){this.suiteName=e,this.storage={}}e.prototype.get=function(e){return this.storage[this.suiteName+\".\"+e]},e.prototype.set=function(e,t){this.storage[this.suiteName+\".\"+e]=t},e.prototype.remove=function(e){delete this.storage[this.suiteName+\".\"+e]}}();var Qe,et=function(){};!function(e){e[e.AUTH_EVENT=0]=\"AUTH_EVENT\"}(Qe||(Qe={}));var tt=function(){function e(e,t,r){this.serviceField=\"service\",this.argumentsField=\"arguments\",this.requestClient=e,this.serviceRoutes=t,this.serviceName=r,this.serviceBinders=[],this.allocatedStreams=[]}return e.prototype.callFunction=function(e,t,r){return this.requestClient.doAuthenticatedRequestWithDecoder(this.getCallServiceFunctionRequest(e,t),r)},e.prototype.streamFunction=function(e,t,r){var n=this;return this.requestClient.openAuthenticatedStreamWithDecoder(this.getStreamServiceFunctionRequest(e,t),r).then((function(e){return n.allocatedStreams.push(e),e}))},e.prototype.bind=function(e){this.serviceBinders.push(e)},e.prototype.onRebindEvent=function(e){switch(e.type){case Qe.AUTH_EVENT:e.event.kind===n.ActiveUserChanged&&this.closeAllocatedStreams()}this.serviceBinders.forEach((function(t){t.onRebindEvent(e)}))},e.prototype.getStreamServiceFunctionRequest=function(e,t){var r={name:e};void 0!==this.serviceName&&(r[this.serviceField]=this.serviceName),r[this.argumentsField]=t;var n=new D.Builder;return n.withMethod(S.GET).withPath(this.serviceRoutes.functionCallRoute+\"?stitch_request=\"+encodeURIComponent(Z(i.a.stringify(r)))),n.build()},e.prototype.getCallServiceFunctionRequest=function(e,t){var r={name:e};void 0!==this.serviceName&&(r[this.serviceField]=this.serviceName),r[this.argumentsField]=t;var n=new U.Builder;return n.withMethod(S.POST).withPath(this.serviceRoutes.functionCallRoute),n.withDocument(r),n.build()},e.prototype.closeAllocatedStreams=function(){this.allocatedStreams.forEach((function(e){e.isOpen()&&e.close()})),this.allocatedStreams=[]},e}(),rt=function(){function e(e,t){this.functionService=new tt(e,t.serviceRoutes)}return e.prototype.callFunction=function(e,t,r){return this.functionService.callFunction(e,t,r)},e}(),nt=function(e){var t=\"function\"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},it=function(){function e(e){this.reconnecter=e,this.closed=!1,this.events=[],this.listeners=[],this.lastErr=void 0}return e.prototype.isOpen=function(){return!this.closed},e.prototype.addListener=function(e){var t=this;this.closed?setTimeout((function(){return e.onEvent(new Y(K.ERROR_EVENT_NAME,\"stream closed\"))}),0):void 0===this.lastErr?(this.listeners.push(e),this.poll()):setTimeout((function(){return e.onEvent(new Y(K.ERROR_EVENT_NAME,t.lastErr))}),0)},e.prototype.removeListener=function(e){var t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)},e.prototype.nextEvent=function(){var e=this;return this.closed?Promise.reject(new Y(K.ERROR_EVENT_NAME,\"stream closed\")):void 0!==this.lastErr?Promise.reject(new Y(K.ERROR_EVENT_NAME,this.lastErr)):new Promise((function(t,r){e.listenOnce({onEvent:function(e){t(e)}})}))},e.prototype.close=function(){this.closed||(this.closed=!0,this.afterClose())},e.prototype.reconnect=function(t){var r=this;this.reconnecter?this.reconnecter().then((function(e){r.onReconnect(e)})).catch((function(n){if(!(n instanceof l&&n instanceof _))return r.closed=!0,r.events.push(new Y(K.ERROR_EVENT_NAME,\"stream closed: \"+t)),void r.poll();setTimeout((function(){return r.reconnect(n)}),e.RETRY_TIMEOUT_MILLIS)})):this.closed||(this.closed=!0,this.events.push(new Y(K.ERROR_EVENT_NAME,\"stream closed: \"+t)),this.poll())},e.prototype.poll=function(){for(var e,t;0!==this.events.length;){var r=this.events.pop();try{for(var n=nt(this.listeners),i=n.next();!i.done;i=n.next()){var o=i.value;o.onEvent&&o.onEvent(r)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}}},e.prototype.listenOnce=function(e){var t=this;if(this.closed)setTimeout((function(){return e.onEvent(new Y(K.ERROR_EVENT_NAME,\"stream closed\"))}),0);else if(void 0===this.lastErr){var r={onEvent:function(n){t.removeListener(r),e.onEvent(n)}};this.addListener(r)}else setTimeout((function(){return e.onEvent(new Y(K.ERROR_EVENT_NAME,t.lastErr))}),0)},e.RETRY_TIMEOUT_MILLIS=5e3,e}(),ot=function(e,t,r,n){this.method=e,this.url=t,this.headers=r,this.body=n};!function(e){var t=function(){function t(e){e&&(this.method=e.method,this.url=e.url,this.headers=e.headers,this.body=e.body)}return t.prototype.withMethod=function(e){return this.method=e,this},t.prototype.withUrl=function(e){return this.url=e,this},t.prototype.withHeaders=function(e){return this.headers=e,this},t.prototype.withBody=function(e){return this.body=e,this},t.prototype.build=function(){if(void 0===this.method)throw new Error(\"must set method\");if(void 0===this.url)throw new Error(\"must set non-empty url\");return new e(this.method,this.url,void 0===this.headers?{}:this.headers,this.body)},t}();e.Builder=t}(ot||(ot={}));var st=function(e,t,r){var n=this;this.statusCode=t,this.body=r,this.headers={},Object.keys(e).map((function(t,r){n.headers[t.toLocaleLowerCase()]=e[t]}))};function ut(e){return\"/api/client/v2.0/app/\"+e}function at(e){return ut(e)+\"/functions/call\"}function ft(e,t){return ut(e)+\"/auth/providers/\"+t}function ct(e,t){return ft(e,t)+\"/login\"}var lt,ht=function(){function e(e){var t=this;this.baseAuthRoute=\"/api/client/v2.0/auth\",this.sessionRoute=t.baseAuthRoute+\"/session\",this.profileRoute=t.baseAuthRoute+\"/profile\",this.clientAppId=e}return e.prototype.getAuthProviderRoute=function(e){return ft(this.clientAppId,e)},e.prototype.getAuthProviderLoginRoute=function(e){return ct(this.clientAppId,e)},e.prototype.getAuthProviderLinkRoute=function(e){return function(e,t){return ct(e,t)+\"?link=true\"}(this.clientAppId,e)},e.prototype.getAuthProviderExtensionRoute=function(e,t){return this.getAuthProviderRoute(e)+\"/\"+t},e}();!function(e){e.DEPLOYMENT_MODEL=\"deployment_model\",e.LOCATION=\"location\",e.HOSTNAME=\"hostname\"}(lt||(lt={}));var pt=function(){function e(e,t,r){this.deploymentModel=e,this.location=t,this.hostname=r}return e.fromJSON=function(t){return new e(t[lt.DEPLOYMENT_MODEL],t[lt.LOCATION],t[lt.HOSTNAME])},e.prototype.toJSON=function(){var e;return(e={})[lt.DEPLOYMENT_MODEL]=this.deploymentModel,e[lt.LOCATION]=this.location,e[lt.HOSTNAME]=this.hostname,e},e}();var dt=function(){function e(e,t){this.baseUrl=e,this.transport=t}return e.prototype.doRequestToURL=function(e,t){return this.transport.roundTrip(this.buildRequest(e,t)).catch((function(e){throw new _(e,c.TRANSPORT_ERROR)})).then((function(e){return(t=e).statusCode>=200&&t.statusCode<300?t:O(t);var t}))},e.prototype.doStreamRequestToURL=function(e,t,r,n){return void 0===r&&(r=!0),this.transport.stream(this.buildRequest(e,t),r,n).catch((function(e){if(e instanceof l)throw e;throw new _(e,c.TRANSPORT_ERROR)}))},e.prototype.buildRequest=function(e,t){return(new ot.Builder).withMethod(e.method).withUrl(\"\"+t+e.path).withHeaders(e.headers).withBody(e.body).build()},e}(),_t=function(e){this.clientAppId=e,this.functionCallRoute=at(e)},yt=function(e){this.clientAppId=e,this.authRoutes=new ht(e),this.serviceRoutes=new _t(e),this.appMetadataRoute=function(e){return ut(e)+\"/location\"}(e),this.functionCallRoute=at(e)},gt=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function u(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,u)}a((n=n.apply(e,t||[])).next())}))},vt=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},mt=function(e){function t(t,r,n){var i=e.call(this,r,n)||this;return i.clientAppId=t,i.routes=new yt(t),i}return gt(t,e),t.prototype.doRequest=function(t){var r=this;return this.initAppMetadata().then((function(n){return e.prototype.doRequestToURL.call(r,t,n.hostname)}))},t.prototype.doStreamRequest=function(t,r,n){var i=this;return void 0===r&&(r=!0),this.initAppMetadata().then((function(o){return e.prototype.doStreamRequestToURL.call(i,t,o.hostname,r,n)}))},t.prototype.getBaseURL=function(){return bt(this,void 0,void 0,(function(){return vt(this,(function(e){return[2,this.initAppMetadata().then((function(e){return e.hostname}))]}))}))},t.prototype.initAppMetadata=function(){var t=this;if(this.appMetadata)return Promise.resolve(this.appMetadata);var r=(new T.Builder).withMethod(S.GET).withPath(this.routes.appMetadataRoute).build();return e.prototype.doRequestToURL.call(this,r,this.baseUrl).then((function(e){return t.appMetadata=pt.fromJSON(i.a.parse(e.body)),t.appMetadata}))},t}(dt),Et=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),At=(function(e){function t(t,r){return e.call(this,t,r)||this}Et(t,e),t.prototype.doRequest=function(t){return e.prototype.doRequestToURL.call(this,t,this.baseUrl)},t.prototype.doStreamRequest=function(t,r,n){return void 0===r&&(r=!0),e.prototype.doStreamRequestToURL.call(this,t,this.baseUrl,r,n)},t.prototype.getBaseURL=function(){return Promise.resolve(this.baseUrl)}}(dt),function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),wt=function(e){function t(t){var r=e.call(this)||this;return r.type=Qe.AUTH_EVENT,r.event=t,r}return At(t,e),t}(et),Nt=function(){function e(e,t,r,n){this.baseUrl=e,this.storage=t,this.dataDirectory=r,this.transport=n}return e.prototype.builder=function(){return new e.Builder(this)},e}();!function(e){var t=function(){function t(e){e&&(this.baseUrl=e.baseUrl,this.storage=e.storage,this.dataDirectory=e.dataDirectory,this.transport=e.transport)}return t.prototype.withBaseUrl=function(e){return this.baseUrl=e,this},t.prototype.withStorage=function(e){return this.storage=e,this},t.prototype.withDataDirectory=function(e){return this.dataDirectory=e,this},t.prototype.withTransport=function(e){return this.transport=e,this},t.prototype.build=function(){return new e(this.baseUrl,this.storage,this.dataDirectory,this.transport)},t}();e.Builder=t}(Nt||(Nt={}));var Ot=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),St=function(e){function t(t,r,n){var i=e.call(this,t.baseUrl,t.storage,t.dataDirectory,t.transport)||this;return i.localAppVersion=n,i.localAppName=r,i}return Ot(t,e),t.prototype.builder=function(){return new t.Builder(this)},t}(Nt);!function(e){var t=function(t){function r(e){var r=t.call(this,e)||this;return e&&(r.localAppVersion=e.localAppVersion,r.localAppName=e.localAppName),r}return Ot(r,t),r.prototype.withLocalAppName=function(e){return this.localAppName=e,this},r.prototype.withLocalAppVersion=function(e){return this.localAppVersion=e,this},r.prototype.build=function(){var r=t.prototype.build.call(this);return new e(r,this.localAppName,this.localAppVersion)},r}(Nt.Builder);e.Builder=t}(St||(St={}));var Tt,Bt=function(e,t,r,n){this.clientAppId=e,this.dataDirectory=t,this.localAppName=r,this.localAppVersion=n},It=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rt=function(e){function t(t,r){return e.call(this,t,r)||this}return It(t,e),t.prototype.createApiKey=function(t){return e.prototype.createApiKey.call(this,t)},t.prototype.fetchApiKey=function(t){return e.prototype.fetchApiKey.call(this,t)},t.prototype.fetchApiKeys=function(){return e.prototype.fetchApiKeys.call(this)},t.prototype.deleteApiKey=function(t){return e.prototype.deleteApiKey.call(this,t)},t.prototype.enableApiKey=function(t){return e.prototype.enableApiKey.call(this,t)},t.prototype.disableApiKey=function(t){return e.prototype.disableApiKey.call(this,t)},t}(Je);(Tt||(Tt={})).factory=new(function(){function e(){}return e.prototype.getClient=function(e,t,r){return new Rt(e,r)},e}());var Dt,Pt=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ut=function(e){function t(t,r){return e.call(this,Ve.DEFAULT_NAME,t,r)||this}return Pt(t,e),t.prototype.registerWithEmail=function(t,r){return e.prototype.registerWithEmailInternal.call(this,t,r)},t.prototype.confirmUser=function(t,r){return e.prototype.confirmUserInternal.call(this,t,r)},t.prototype.resendConfirmationEmail=function(t){return e.prototype.resendConfirmationEmailInternal.call(this,t)},t.prototype.resetPassword=function(t,r,n){return e.prototype.resetPasswordInternal.call(this,t,r,n)},t.prototype.sendResetPasswordEmail=function(t){return e.prototype.sendResetPasswordEmailInternal.call(this,t)},t.prototype.callResetPasswordFunction=function(t,r,n){return e.prototype.callResetPasswordFunctionInternal.call(this,t,r,n)},t}(Ge);(Dt||(Dt={})).factory=new(function(){function e(){}return e.prototype.getClient=function(e,t,r){return new Ut(t,r)},e}());var Ct=\"URLSearchParams\"in self,$t=\"Symbol\"in self&&\"iterator\"in Symbol,xt=\"FileReader\"in self&&\"Blob\"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),Mt=\"FormData\"in self,kt=\"ArrayBuffer\"in self;if(kt)var Lt=[\"[object Int8Array]\",\"[object Uint8Array]\",\"[object Uint8ClampedArray]\",\"[object Int16Array]\",\"[object Uint16Array]\",\"[object Int32Array]\",\"[object Uint32Array]\",\"[object Float32Array]\",\"[object Float64Array]\"],jt=ArrayBuffer.isView||function(e){return e&&Lt.indexOf(Object.prototype.toString.call(e))>-1};function Ft(e){if(\"string\"!=typeof e&&(e=String(e)),/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError(\"Invalid character in header field name\");return e.toLowerCase()}function zt(e){return\"string\"!=typeof e&&(e=String(e)),e}function Yt(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return $t&&(t[Symbol.iterator]=function(){return t}),t}function Kt(e){this.map={},e instanceof Kt?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function Jt(e){if(e.bodyUsed)return Promise.reject(new TypeError(\"Already read\"));e.bodyUsed=!0}function Wt(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function qt(e){var t=new FileReader,r=Wt(t);return t.readAsArrayBuffer(e),r}function Vt(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Xt(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?\"string\"==typeof e?this._bodyText=e:xt&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:Mt&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:Ct&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():kt&&xt&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=Vt(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):kt&&(ArrayBuffer.prototype.isPrototypeOf(e)||jt(e))?this._bodyArrayBuffer=Vt(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText=\"\",this.headers.get(\"content-type\")||(\"string\"==typeof e?this.headers.set(\"content-type\",\"text/plain;charset=UTF-8\"):this._bodyBlob&&this._bodyBlob.type?this.headers.set(\"content-type\",this._bodyBlob.type):Ct&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set(\"content-type\",\"application/x-www-form-urlencoded;charset=UTF-8\"))},xt&&(this.blob=function(){var e=Jt(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error(\"could not read FormData body as blob\");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Jt(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(qt)}),this.text=function(){var e,t,r,n=Jt(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=Wt(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join(\"\")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error(\"could not read FormData body as text\");return Promise.resolve(this._bodyText)},Mt&&(this.formData=function(){return this.text().then(Zt)}),this.json=function(){return this.text().then(JSON.parse)},this}Kt.prototype.append=function(e,t){e=Ft(e),t=zt(t);var r=this.map[e];this.map[e]=r?r+\", \"+t:t},Kt.prototype.delete=function(e){delete this.map[Ft(e)]},Kt.prototype.get=function(e){return e=Ft(e),this.has(e)?this.map[e]:null},Kt.prototype.has=function(e){return this.map.hasOwnProperty(Ft(e))},Kt.prototype.set=function(e,t){this.map[Ft(e)]=zt(t)},Kt.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},Kt.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),Yt(e)},Kt.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),Yt(e)},Kt.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),Yt(e)},$t&&(Kt.prototype[Symbol.iterator]=Kt.prototype.entries);var Ht=[\"DELETE\",\"GET\",\"HEAD\",\"OPTIONS\",\"POST\",\"PUT\"];function Gt(e,t){var r,n,i=(t=t||{}).body;if(e instanceof Gt){if(e.bodyUsed)throw new TypeError(\"Already read\");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Kt(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||\"same-origin\",!t.headers&&this.headers||(this.headers=new Kt(t.headers)),this.method=(r=t.method||this.method||\"GET\",n=r.toUpperCase(),Ht.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,(\"GET\"===this.method||\"HEAD\"===this.method)&&i)throw new TypeError(\"Body not allowed for GET or HEAD requests\");this._initBody(i)}function Zt(e){var t=new FormData;return e.trim().split(\"&\").forEach((function(e){if(e){var r=e.split(\"=\"),n=r.shift().replace(/\\+/g,\" \"),i=r.join(\"=\").replace(/\\+/g,\" \");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function Qt(e,t){t||(t={}),this.type=\"default\",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=\"statusText\"in t?t.statusText:\"OK\",this.headers=new Kt(t.headers),this.url=t.url||\"\",this._initBody(e)}Gt.prototype.clone=function(){return new Gt(this,{body:this._bodyInit})},Xt.call(Gt.prototype),Xt.call(Qt.prototype),Qt.prototype.clone=function(){return new Qt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Kt(this.headers),url:this.url})},Qt.error=function(){var e=new Qt(null,{status:0,statusText:\"\"});return e.type=\"error\",e};var er=[301,302,303,307,308];Qt.redirect=function(e,t){if(-1===er.indexOf(t))throw new RangeError(\"Invalid status code\");return new Qt(null,{status:t,headers:{location:e}})};var tr=self.DOMException;try{new tr}catch(e){(tr=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),tr.prototype.constructor=tr}function rr(e,t){return new Promise((function(r,n){var i=new Gt(e,t);if(i.signal&&i.signal.aborted)return n(new tr(\"Aborted\",\"AbortError\"));var o=new XMLHttpRequest;function s(){o.abort()}o.onload=function(){var e,t,n={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||\"\",t=new Kt,e.replace(/\\r?\\n[\\t ]+/g,\" \").split(/\\r?\\n/).forEach((function(e){var r=e.split(\":\"),n=r.shift().trim();if(n){var i=r.join(\":\").trim();t.append(n,i)}})),t)};n.url=\"responseURL\"in o?o.responseURL:n.headers.get(\"X-Request-URL\");var i=\"response\"in o?o.response:o.responseText;r(new Qt(i,n))},o.onerror=function(){n(new TypeError(\"Network request failed\"))},o.ontimeout=function(){n(new TypeError(\"Network request failed\"))},o.onabort=function(){n(new tr(\"Aborted\",\"AbortError\"))},o.open(i.method,i.url,!0),\"include\"===i.credentials?o.withCredentials=!0:\"omit\"===i.credentials&&(o.withCredentials=!1),\"responseType\"in o&&xt&&(o.responseType=\"blob\"),i.headers.forEach((function(e,t){o.setRequestHeader(t,e)})),i.signal&&(i.signal.addEventListener(\"abort\",s),o.onreadystatechange=function(){4===o.readyState&&i.signal.removeEventListener(\"abort\",s)}),o.send(void 0===i._bodyInit?null:i._bodyInit)}))}rr.polyfill=!0,self.fetch||(self.fetch=rr,self.Headers=Kt,self.Request=Gt,self.Response=Qt);var nr,ir=function(){function e(){}return e.prototype.roundTrip=function(e){var t=rr(e.url,{body:e.body,headers:e.headers,method:e.method,mode:\"cors\"}),r=t.then((function(e){return e.text()}));return Promise.all([t,r]).then((function(e){var t=e[0],r=e[1],n={};return t.headers.forEach((function(e,t){n[t]=e})),new st(n,t.status,r)}))},e.prototype.stream=function(e,t,r){throw void 0===t&&(t=!0),new z(x.StreamingNotSupported)},e}(),or=function(){function e(e){this.suiteName=e}return e.prototype.get=function(e){return localStorage.getItem(this.getKey(e))},e.prototype.set=function(e,t){localStorage.setItem(this.getKey(e),t)},e.prototype.remove=function(e){localStorage.removeItem(this.getKey(e))},e.prototype.getKey=function(e){return\"__stitch.client.\"+this.suiteName+\".\"+e},e}(),sr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ur=function(e){function t(t,r,n,i){var o=e.call(this,i)||this;return o.evtSrc=t,o.onOpenError=n,o.openedOnce=!1,o.evtSrc.onopen=function(e){r(o),o.openedOnce=!0},o.reset(),o}return sr(t,e),t.prototype.open=function(){if(this.closed)throw new z(x.StreamClosed)},t.prototype.afterClose=function(){this.evtSrc.close()},t.prototype.onReconnect=function(e){this.evtSrc=e.evtSrc,this.reset(),this.events=e.events.concat(this.events)},t.prototype.reset=function(){var e=this;this.evtSrc.onmessage=function(t){e.events.push(new Y(Y.MESSAGE_EVENT,t.data)),e.poll()},this.evtSrc.onerror=function(t){return t instanceof MessageEvent?(e.lastErr=t.data,e.events.push(new Y(K.ERROR_EVENT_NAME,e.lastErr)),e.close(),void e.poll()):e.openedOnce?(e.evtSrc.close(),void e.reconnect()):(e.close(),void e.onOpenError(new Error(\"event source failed to open and will not reconnect; check network log for more details\")))}},t}(it),ar=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},cr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ar(t,e),t.prototype.stream=function(e,t,r){void 0===t&&(t=!0);var n=fr({},e.headers);return n[w.ACCEPT]=A.TEXT_EVENT_STREAM,n[w.CONTENT_TYPE]=A.TEXT_EVENT_STREAM,rr(e.url+\"&stitch_validate=true\",{body:e.body,headers:n,method:e.method,mode:\"cors\"}).then((function(t){var n={};return t.headers.forEach((function(e,t){n[t]=e})),t.status<200||t.status>=300?t.text().then((function(e){return O(new st(n,t.status,e))})):new Promise((function(t,n){return new ur(new EventSource(e.url),(function(e){return t(e)}),(function(e){return n(e)}),r?function(){return r().then((function(e){return e}))}:void 0)}))}))},t}(ir),lr=function(){function e(e){this.proxy=e}return e.prototype.callFunction=function(e,t,r){return this.proxy.callFunction(e,t,r)},e.prototype.streamFunction=function(e,t,r){return this.proxy.streamFunction(e,t,r)},e}(),hr=r(5);!function(e){e.StitchError=\"_stitch_error\",e.State=\"_stitch_state\",e.UserAuth=\"_stitch_ua\",e.LinkUser=\"_stitch_link_user\",e.StitchLink=\"_stitch_link\",e.ClientAppId=\"_stitch_client_app_id\"}(nr||(nr={}));var pr,dr=nr;!function(e){e.ProviderName=\"_stitch_redirect_provider_name\",e.ProviderType=\"_stitch_redirect_provider_type\",e.State=\"_stitch_redirect_state\"}(pr||(pr={}));var _r=pr,yr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gr=function(e){function t(t){return e.call(this,t)||this}return yr(t,e),t}(l),br=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vr=function(e){function t(t,r,n,i,o,s,u,a){var f=e.call(this,t,r,n,i,o,s,a)||this;return f.auth=u,f}return br(t,e),t.prototype.linkWithCredential=function(e){return this.auth.linkWithCredential(this,e)},t.prototype.linkUserWithRedirect=function(e){return this.auth.linkWithRedirectInternal(this,e)},t}(q),mr=function(){function e(e){this.auth=e}return e.prototype.makeUser=function(e,t,r,n,i,o,s){return new vr(e,t,r,n,i,o,this.auth,s)},e}(),Er=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ar=function(e,t){var r=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},wr=function(e){function t(t,r,n,i,o){void 0===o&&(o=window);var s=e.call(this,t,r,n)||this;return s.browserAuthRoutes=r,s.authStorage=n,s.appInfo=i,s.jsdomWindow=o,s.listeners=new Set,s.synchronousListeners=new Set,s}return Er(t,e),Object.defineProperty(t.prototype,\"userFactory\",{get:function(){return new mr(this)},enumerable:!0,configurable:!0}),t.prototype.getProviderClient=function(e,t){return function(e){return void 0!==e.getClient}(e)?e.getClient(this,this.requestClient,this.authRoutes):e.getNamedClient(t,this.requestClient,this.authRoutes)},t.prototype.loginWithCredential=function(t){return e.prototype.loginWithCredentialInternal.call(this,t)},t.prototype.loginWithRedirect=function(e){var t=this,r=this.prepareRedirect(e),n=r.redirectUrl,i=r.state;this.requestClient.getBaseURL().then((function(r){t.jsdomWindow.location.replace(r+t.browserAuthRoutes.getAuthProviderRedirectRoute(e,n,i,t.deviceInfo))}))},t.prototype.linkWithRedirectInternal=function(e,r){var n=this;if(void 0!==this.user&&e.id!==this.user.id)return Promise.reject(new z(x.UserNoLongerValid));var i=this.prepareRedirect(r),o=i.redirectUrl,s=i.state;return this.requestClient.getBaseURL().then((function(e){var i=e+n.browserAuthRoutes.getAuthProviderLinkRedirectRoute(r,o,s,n.deviceInfo);return(t.injectedFetch?t.injectedFetch:fetch)(new Request(i,{credentials:\"include\",headers:{Authorization:\"Bearer \"+n.authInfo.accessToken},mode:\"cors\"}))})).then((function(e){n.jsdomWindow.location.replace(e.headers.get(\"X-Stitch-Location\"))}))},t.prototype.hasRedirectResult=function(){var e=!1;try{return e=this.parseRedirect().isValid}catch(e){return!1}finally{e||this.cleanupRedirect()}},t.prototype.handleRedirectResult=function(){try{var e=this.authStorage.get(_r.ProviderName),t=this.authStorage.get(_r.ProviderType),r=this.parseRedirect();return this.loginWithCredentialInternal(new X(this.processRedirectResult(r),t,e,r.asLink)).then((function(e){return e}))}catch(e){return Promise.reject(e)}},t.prototype.linkWithCredential=function(t,r){return e.prototype.linkUserWithCredentialInternal.call(this,t,r)},t.prototype.logout=function(){return arguments.length>0?Promise.reject(new z(x.UnexpectedArguments)):e.prototype.logoutInternal.call(this)},t.prototype.logoutUserWithId=function(t){return e.prototype.logoutUserWithIdInternal.call(this,t)},t.prototype.removeUser=function(){return arguments.length>0?Promise.reject(new z(x.UnexpectedArguments)):e.prototype.removeUserInternal.call(this)},t.prototype.removeUserWithId=function(t){return e.prototype.removeUserWithIdInternal.call(this,t)},Object.defineProperty(t.prototype,\"deviceInfo\",{get:function(){var e={};this.hasDeviceId&&(e[Re.DEVICE_ID]=this.deviceId),void 0!==this.appInfo.localAppName&&(e[Re.APP_ID]=this.appInfo.localAppName),void 0!==this.appInfo.localAppVersion&&(e[Re.APP_VERSION]=this.appInfo.localAppVersion);var t=Object(hr.detect)();return t?(e[Re.PLATFORM]=t.name,e[Re.PLATFORM_VERSION]=t.version):(e[Re.PLATFORM]=\"web\",e[Re.PLATFORM_VERSION]=\"0.0.0\"),e[Re.SDK_VERSION]=\"4.8.0\",e},enumerable:!0,configurable:!0}),t.prototype.addAuthListener=function(e){this.listeners.add(e),this.onAuthEvent(e),this.dispatchAuthEvent({kind:n.ListenerRegistered})},t.prototype.addSynchronousAuthListener=function(e){this.listeners.add(e),this.onAuthEvent(e),this.dispatchAuthEvent({kind:n.ListenerRegistered})},t.prototype.removeAuthListener=function(e){this.listeners.delete(e)},t.prototype.onAuthEvent=function(e){var t=this;if(e)new Promise((function(r){e.onAuthEvent&&e.onAuthEvent(t),r(void 0)}));else this.listeners.forEach((function(e){t.onAuthEvent(e)}))},t.prototype.dispatchAuthEvent=function(e){var t=this;switch(e.kind){case n.ActiveUserChanged:this.dispatchBlockToListeners((function(r){r.onActiveUserChanged&&r.onActiveUserChanged(t,e.currentActiveUser,e.previousActiveUser)}));break;case n.ListenerRegistered:this.dispatchBlockToListeners((function(e){e.onListenerRegistered&&e.onListenerRegistered(t)}));break;case n.UserAdded:this.dispatchBlockToListeners((function(r){r.onUserAdded&&r.onUserAdded(t,e.addedUser)}));break;case n.UserLinked:this.dispatchBlockToListeners((function(r){r.onUserLinked&&r.onUserLinked(t,e.linkedUser)}));break;case n.UserLoggedIn:this.dispatchBlockToListeners((function(r){r.onUserLoggedIn&&r.onUserLoggedIn(t,e.loggedInUser)}));break;case n.UserLoggedOut:this.dispatchBlockToListeners((function(r){r.onUserLoggedOut&&r.onUserLoggedOut(t,e.loggedOutUser)}));break;case n.UserRemoved:this.dispatchBlockToListeners((function(r){r.onUserRemoved&&r.onUserRemoved(t,e.removedUser)}));break;default:return this.assertNever(e)}},t.prototype.refreshCustomData=function(){return this.refreshAccessToken()},t.prototype.assertNever=function(e){throw new Error(\"unexpected object: \"+e)},t.prototype.dispatchBlockToListeners=function(e){this.synchronousListeners.forEach(e),this.listeners.forEach((function(t){new Promise((function(r){e(t),r(void 0)}))}))},t.prototype.cleanupRedirect=function(){this.jsdomWindow.history.replaceState(null,\"\",this.pageRootUrl()),this.authStorage.remove(_r.State),this.authStorage.remove(_r.ProviderName),this.authStorage.remove(_r.ProviderType)},t.prototype.parseRedirect=function(){if(void 0===this.jsdomWindow)throw new gr(\"running in a non-browser environment\");if(!this.jsdomWindow.location||!this.jsdomWindow.location.hash)throw new gr(\"window location hash was undefined\");var e=this.authStorage.get(_r.State);return function(e,t,r){var n=e.split(\"&\"),i=new Nr;return n.forEach((function(e){var n=e.split(\"=\");switch(decodeURIComponent(n[0])){case dr.StitchError:i.lastError=decodeURIComponent(n[1]);break;case dr.UserAuth:try{i.authInfo=function(e){var t=e.split(\"$\");if(4!==t.length)throw new gr(\"invalid user auth data provided while marshalling user authentication data: \"+e);var r=Ar(t,4),n=r[0],i=r[1],o=r[2],u=r[3];return new s(o,u,n,i)}(decodeURIComponent(n[1]))}catch(e){i.lastError=e}break;case dr.StitchLink:\"ok\"===n[1]&&(i.asLink=!0);break;case dr.State:var o=decodeURIComponent(n[1]);t===o&&(i.stateValid=!0);break;case dr.ClientAppId:var u=decodeURIComponent(n[1]);r===u&&(i.clientAppIdValid=!0)}})),i}(this.jsdomWindow.location.hash.substring(1),e,this.appInfo.clientAppId)},t.prototype.processRedirectResult=function(e){try{if(!e.isValid)throw new gr(\"invalid redirect result\");if(e.lastError)throw new gr(\"error handling redirect: \"+e.lastError);if(!e.authInfo)throw new gr(\"no user auth value was found: it could not be decoded from fragment\")}catch(e){throw e}finally{this.cleanupRedirect()}return e.authInfo},t.prototype.prepareRedirect=function(e){this.authStorage.set(_r.ProviderName,e.providerName),this.authStorage.set(_r.ProviderType,e.providerType);var t=e.redirectUrl;void 0===t&&(t=this.pageRootUrl());var r=function(){for(var e=\"\",t=0;t<64;++t)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".charAt(Math.floor(Math.random()*\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".length));return e}();return this.authStorage.set(_r.State,r),{redirectUrl:t,state:r}},t.prototype.pageRootUrl=function(){return[this.jsdomWindow.location.protocol,\"//\",this.jsdomWindow.location.host,this.jsdomWindow.location.pathname].join(\"\")},t}(Be);var Nr=function(){function e(){this.stateValid=!1,this.clientAppIdValid=!1,this.asLink=!1}return Object.defineProperty(e.prototype,\"isValid\",{get:function(){return this.stateValid&&this.clientAppIdValid},enumerable:!0,configurable:!0}),e}();var Or=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sr=function(e){function t(t){return e.call(this,t)||this}return Or(t,e),t.prototype.getAuthProviderRedirectRoute=function(e,t,r,n){return this.getAuthProviderLoginRoute(e.providerName)+\"?redirect=\"+encodeURI(t)+\"&state=\"+r+\"&device=\"+this.uriEncodeObject(n)},t.prototype.getAuthProviderLinkRedirectRoute=function(e,t,r,n){return this.getAuthProviderLoginRoute(e.providerName)+\"?redirect=\"+encodeURI(t)+\"&state=\"+r+\"&device=\"+this.uriEncodeObject(n)+\"&link=true&providerRedirectHeader=true\"},t.prototype.uriEncodeObject=function(e){return encodeURIComponent(Z(JSON.stringify(e)))},t}(ht),Tr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Br=function(e){function t(t){var r=e.call(this,t)||this;return r.authRoutes=new Sr(t),r}return Tr(t,e),t}(yt),Ir=function(){function e(e,t){this.info=new Bt(e,t.dataDirectory,t.localAppName,t.localAppVersion),this.routes=new Br(this.info.clientAppId);var r=new mt(e,t.baseUrl,t.transport);this.auth=new wr(r,this.routes.authRoutes,t.storage,this.info),this.coreClient=new rt(this.auth,this.routes),this.serviceClients=[],this.auth.addSynchronousAuthListener(this)}return e.prototype.getServiceClient=function(e,t){if(function(e){return void 0!==e.getClient}(e)){var r=new tt(this.auth,this.routes.serviceRoutes,\"\");return this.bindServiceClient(r),e.getClient(r,this.info)}r=new tt(this.auth,this.routes.serviceRoutes,t);return this.bindServiceClient(r),e.getNamedClient(r,this.info)},e.prototype.getGeneralServiceClient=function(e){var t=new tt(this.auth,this.routes.serviceRoutes,e);return this.bindServiceClient(t),new lr(t)},e.prototype.callFunction=function(e,t){return this.coreClient.callFunction(e,t)},e.prototype.onActiveUserChanged=function(e,t,r){this.onRebindEvent(new wt({currentActiveUser:t,kind:n.ActiveUserChanged,previousActiveUser:r}))},e.prototype.bindServiceClient=function(e){this.serviceClients.push(e)},e.prototype.onRebindEvent=function(e){this.serviceClients.forEach((function(t){t.onRebindEvent(e)}))},e}();var Rr,Dr={},Pr=function(){function e(){}return Object.defineProperty(e,\"defaultAppClient\",{get:function(){if(void 0===e.defaultClientAppId)throw new Error(\"default app client has not yet been initialized/set\");return Dr[e.defaultClientAppId]},enumerable:!0,configurable:!0}),e.getAppClient=function(e){if(void 0===Dr[e])throw new Error(\"client for app '\"+e+\"' has not yet been initialized\");return Dr[e]},e.hasAppClient=function(e){return void 0!==Dr[e]},e.initializeDefaultAppClient=function(t,r){if(void 0===r&&(r=(new St.Builder).build()),void 0===t||\"\"===t)throw new Error(\"clientAppId must be set to a non-empty string\");if(void 0!==e.defaultClientAppId)throw new Error(\"default app can only be set once; currently set to '\"+e.defaultClientAppId+\"'\");var n=e.initializeAppClient(t,r);return e.defaultClientAppId=t,n},e.initializeAppClient=function(t,r){if(void 0===r&&(r=(new St.Builder).build()),void 0===t||\"\"===t)throw new Error(\"clientAppId must be set to a non-empty string\");if(void 0!==Dr[t])throw new Error(\"client for app '\"+t+\"' has already been initialized\");var n=r.builder?r.builder():new St.Builder(r);void 0===n.storage&&n.withStorage(new or(t)),void 0===n.transport&&(window.EventSource?n.withTransport(new cr):n.withTransport(new ir)),void 0!==n.baseUrl&&\"\"!==n.baseUrl||n.withBaseUrl(\"https://stitch.mongodb.com\"),void 0!==n.localAppName&&\"\"!==n.localAppName||n.withLocalAppName(e.localAppName),void 0!==n.localAppVersion&&\"\"!==n.localAppVersion||n.withLocalAppVersion(e.localAppVersion);var i=new Ir(t,n.build());return Dr[t]=i,i},e.clearApps=function(){Dr={}},e}(),Ur=r(6),Cr=function(){function e(e,t,r,n){this.command=e,this.args=t,this.service=r,n&&(this.collectionDecoder=new(function(){function e(){}return e.prototype.decode=function(e){return e instanceof Array?e.map((function(e){return n.decode(e)})):[n.decode(e)]},e}()))}return e.prototype.iterator=function(){return this.executeRead().then((function(e){return e[Symbol.iterator]()}))},e.prototype.first=function(){return this.executeRead().then((function(e){return e[0]}))},e.prototype.toArray=function(){return this.executeRead()},e.prototype.asArray=function(){return this.toArray()},e.prototype.executeRead=function(){return this.service.callFunction(this.command,[this.args],this.collectionDecoder)},e}();function $r(e){switch(e){case\"insert\":return Rr.Insert;case\"delete\":return Rr.Delete;case\"replace\":return Rr.Replace;case\"update\":return Rr.Update;default:return Rr.Unknown}}!function(e){e.Insert=\"insert\",e.Delete=\"delete\",e.Replace=\"replace\",e.Update=\"update\",e.Unknown=\"unknown\"}(Rr||(Rr={}));var xr,Mr,kr,Lr,jr,Fr,zr,Yr=function(e){var t={};e.forEach((function(e,r){t[r]=e})),this.insertedIds=t};!function(e){e.InsertedIds=\"insertedIds\"}(xr||(xr={})),function(e){e.InsertedId=\"insertedId\"}(Mr||(Mr={})),function(e){e.MatchedCount=\"matchedCount\",e.ModifiedCount=\"modifiedCount\",e.UpsertedId=\"upsertedId\"}(kr||(kr={})),function(e){e.DeletedCount=\"deletedCount\"}(Lr||(Lr={})),function(e){e.UpdatedFields=\"updatedFields\",e.RemovedFields=\"removedFields\"}(jr||(jr={})),function(e){e.Id=\"_id\",e.OperationType=\"operationType\",e.FullDocument=\"fullDocument\",e.DocumentKey=\"documentKey\",e.Namespace=\"ns\",e.NamespaceDb=\"db\",e.NamespaceColl=\"coll\",e.UpdateDescription=\"updateDescription\"}(Fr||(Fr={})),function(e){e.OperationType=\"ot\",e.FullDocument=\"fd\",e.DocumentKey=\"dk\",e.UpdateDescription=\"ud\",e.StitchDocumentVersion=\"sdv\",e.StitchDocumentHash=\"sdh\"}(zr||(zr={}));var Kr=function(){function e(){}return e.prototype.decode=function(e){return new Yr(e[xr.InsertedIds])},e}(),Jr=function(){function e(){}return e.prototype.decode=function(e){return{insertedId:e[Mr.InsertedId]}},e}(),Wr=function(){function e(){}return e.prototype.decode=function(e){return{matchedCount:e[kr.MatchedCount],modifiedCount:e[kr.ModifiedCount],upsertedId:e[kr.UpsertedId]}},e}(),qr=function(){function e(){}return e.prototype.decode=function(e){return{deletedCount:e[Lr.DeletedCount]}},e}(),Vr=function(){function e(){}return e.prototype.decode=function(e){return ue.keyPresent(jr.UpdatedFields,e),ue.keyPresent(jr.RemovedFields,e),{removedFields:e[jr.RemovedFields],updatedFields:e[jr.UpdatedFields]}},e}();function Xr(e,t,r,n){var i,o;return i=t in e?Qr.updateDescriptionDecoder.decode(e[t]):void 0,r in e?(o=e[r],n&&(o=n.decode(o))):o=void 0,{updateDescription:i,fullDocument:o}}var Hr,Gr=function(){function e(e){this.decoder=e}return e.prototype.decode=function(e){ue.keyPresent(Fr.Id,e),ue.keyPresent(Fr.OperationType,e),ue.keyPresent(Fr.Namespace,e),ue.keyPresent(Fr.DocumentKey,e);var t=e[Fr.Namespace],r=Xr(e,Fr.UpdateDescription,Fr.FullDocument,this.decoder),n=r.updateDescription,i=r.fullDocument;return{documentKey:e[Fr.DocumentKey],fullDocument:i,id:e[Fr.Id],namespace:{collection:t[Fr.NamespaceColl],database:t[Fr.NamespaceDb]},operationType:$r(e[Fr.OperationType]),updateDescription:n}},e}(),Zr=function(){function e(e){this.decoder=e}return e.prototype.decode=function(e){ue.keyPresent(zr.OperationType,e),ue.keyPresent(zr.DocumentKey,e);var t,r,n=Xr(e,zr.UpdateDescription,zr.FullDocument,this.decoder),i=n.updateDescription,o=n.fullDocument;return t=zr.StitchDocumentVersion in e?e[zr.StitchDocumentVersion]:void 0,r=zr.StitchDocumentHash in e?e[zr.StitchDocumentHash]:void 0,{documentKey:e[zr.DocumentKey],fullDocument:o,operationType:$r(e[zr.OperationType]),stitchDocumentHash:r,stitchDocumentVersion:t,updateDescription:i}},e}(),Qr=function(){function e(){}return e.remoteInsertManyResultDecoder=new Kr,e.remoteInsertOneResultDecoder=new Jr,e.remoteUpdateResultDecoder=new Wr,e.remoteDeleteResultDecoder=new qr,e.updateDescriptionDecoder=new Vr,e.ChangeEventDecoder=Gr,e.CompactChangeEventDecoder=Zr,e}(),en=Qr,tn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},rn=function(){function e(e,t,r,n){var i=this;this.name=e,this.databaseName=t,this.service=r,this.codec=n,this.namespace=this.databaseName+\".\"+this.name,this.baseOperationArgs={collection:i.name,database:i.databaseName}}return e.prototype.withCollectionType=function(t){return new e(this.name,this.databaseName,this.service,t)},e.prototype.find=function(e,t){void 0===e&&(e={});var r=tn({},this.baseOperationArgs);return r.query=e,t&&(t.limit&&(r.limit=t.limit),t.projection&&(r.project=t.projection),t.sort&&(r.sort=t.sort)),new Cr(\"find\",r,this.service,this.codec)},e.prototype.findOne=function(e,t){void 0===e&&(e={});var r=tn({},this.baseOperationArgs);return r.query=e,t&&(t.projection&&(r.project=t.projection),t.sort&&(r.sort=t.sort)),this.service.callFunction(\"findOne\",[r],this.codec)},e.prototype.findOneAndUpdate=function(e,t,r){var n=tn({},this.baseOperationArgs);return n.filter=e,n.update=t,r&&(r.projection&&(n.projection=r.projection),r.sort&&(n.sort=r.sort),r.upsert&&(n.upsert=!0),r.returnNewDocument&&(n.returnNewDocument=!0)),this.service.callFunction(\"findOneAndUpdate\",[n],this.codec)},e.prototype.findOneAndReplace=function(e,t,r){var n=tn({},this.baseOperationArgs);return n.filter=e,n.update=t,r&&(r.projection&&(n.projection=r.projection),r.sort&&(n.sort=r.sort),r.upsert&&(n.upsert=!0),r.returnNewDocument&&(n.returnNewDocument=!0)),this.service.callFunction(\"findOneAndReplace\",[n],this.codec)},e.prototype.findOneAndDelete=function(e,t){var r=tn({},this.baseOperationArgs);return r.filter=e,t&&(t.projection&&(r.projection=t.projection),t.sort&&(r.sort=t.sort)),this.service.callFunction(\"findOneAndDelete\",[r],this.codec)},e.prototype.aggregate=function(e){var t=tn({},this.baseOperationArgs);return t.pipeline=e,new Cr(\"aggregate\",t,this.service,this.codec)},e.prototype.count=function(e,t){void 0===e&&(e={});var r=tn({},this.baseOperationArgs);return r.query=e,t&&t.limit&&(r.limit=t.limit),this.service.callFunction(\"count\",[r])},e.prototype.insertOne=function(e){var t=tn({},this.baseOperationArgs);return t.document=this.generateObjectIdIfMissing(this.codec?this.codec.encode(e):e),this.service.callFunction(\"insertOne\",[t],en.remoteInsertOneResultDecoder)},e.prototype.insertMany=function(e){var t=this,r=tn({},this.baseOperationArgs);return r.documents=e.map((function(e){return t.generateObjectIdIfMissing(t.codec?t.codec.encode(e):e)})),this.service.callFunction(\"insertMany\",[r],en.remoteInsertManyResultDecoder)},e.prototype.deleteOne=function(e){return this.executeDelete(e,!1)},e.prototype.deleteMany=function(e){return this.executeDelete(e,!0)},e.prototype.updateOne=function(e,t,r){return this.executeUpdate(e,t,r,!1)},e.prototype.updateMany=function(e,t,r){return this.executeUpdate(e,t,r,!0)},e.prototype.watch=function(e){var t=tn({},this.baseOperationArgs);return void 0!==e&&(e instanceof Array?0!==e.length&&(t.ids=e):e instanceof Object&&(t.filter=e)),t.useCompactEvents=!1,this.service.streamFunction(\"watch\",[t],new en.ChangeEventDecoder(this.codec))},e.prototype.watchCompact=function(e){var t=tn({},this.baseOperationArgs);return t.ids=e,t.useCompactEvents=!0,this.service.streamFunction(\"watch\",[t],new en.CompactChangeEventDecoder(this.codec))},e.prototype.executeDelete=function(e,t){var r=tn({},this.baseOperationArgs);return r.query=e,this.service.callFunction(t?\"deleteMany\":\"deleteOne\",[r],en.remoteDeleteResultDecoder)},e.prototype.executeUpdate=function(e,t,r,n){void 0===n&&(n=!1);var i=tn({},this.baseOperationArgs);return i.query=e,i.update=t,r&&r.upsert&&(i.upsert=r.upsert),this.service.callFunction(n?\"updateMany\":\"updateOne\",[i],en.remoteUpdateResultDecoder)},e.prototype.generateObjectIdIfMissing=function(e){if(!e._id){var t=e;return t._id=new Ur.a.ObjectID,t}return e},e}(),nn=function(){function e(e,t){this.name=e,this.service=t}return e.prototype.collection=function(e,t){return new rn(e,this.name,this.service,t)},e}(),on=function(){function e(e){this.service=e}return e.prototype.db=function(e){return new nn(e,this.service)},e}(),sn=function(){function e(e){this.proxy=e}return e.prototype.next=function(){return Promise.resolve(this.proxy.next().value)},e}(),un=function(){function e(e){this.proxy=e}return e.prototype.first=function(){return this.proxy.first()},e.prototype.toArray=function(){return this.proxy.toArray()},e.prototype.asArray=function(){return this.toArray()},e.prototype.iterator=function(){return this.proxy.iterator().then((function(e){return new sn(e)}))},e}(),an=function(){function e(e){this.proxy=e,this.namespace=this.proxy.namespace}return e.prototype.withCollectionType=function(t){return new e(this.proxy.withCollectionType(t))},e.prototype.count=function(e,t){return this.proxy.count(e,t)},e.prototype.find=function(e,t){return new un(this.proxy.find(e,t))},e.prototype.findOne=function(e,t){return this.proxy.findOne(e,t)},e.prototype.findOneAndUpdate=function(e,t,r){return this.proxy.findOneAndUpdate(e,t,r)},e.prototype.findOneAndReplace=function(e,t,r){return this.proxy.findOneAndReplace(e,t,r)},e.prototype.findOneAndDelete=function(e,t){return this.proxy.findOneAndDelete(e,t)},e.prototype.aggregate=function(e){return new un(this.proxy.aggregate(e))},e.prototype.insertOne=function(e){return this.proxy.insertOne(e)},e.prototype.insertMany=function(e){return this.proxy.insertMany(e)},e.prototype.deleteOne=function(e){return this.proxy.deleteOne(e)},e.prototype.deleteMany=function(e){return this.proxy.deleteMany(e)},e.prototype.updateOne=function(e,t,r){return this.proxy.updateOne(e,t,r)},e.prototype.updateMany=function(e,t,r){return this.proxy.updateMany(e,t,r)},e.prototype.watch=function(e){return this.proxy.watch(e)},e.prototype.watchCompact=function(e){return this.proxy.watchCompact(e)},e}(),fn=function(){function e(e){this.proxy=e,this.name=this.proxy.name}return e.prototype.collection=function(e,t){return new an(this.proxy.collection(e,t))},e}(),cn=function(){function e(e){this.proxy=e}return e.prototype.db=function(e){return new fn(this.proxy.db(e))},e}();(Hr||(Hr={})).factory=new(function(){function e(){}return e.prototype.getNamedClient=function(e,t){return new cn(new on(e))},e}());const ln=Pr.initializeDefaultAppClient(\"taskmanager-aispk\"),hn=ln.getServiceClient(Hr.factory,\"mongodb-atlas\").db(\"taskmanager\"),pn=ln.auth.loginWithCredential(new Pe);pn.then(()=>hn.collection(\"task\").find({category:\"Home\"},{limit:100}).asArray()).then(e=>{console.log(\"Found docs\",e),console.log(\"[MongoDB Stitch] Connected to Stitch\")}).catch(e=>{console.error(e)}),$(document).ready((function(){var e;e=pn.then(()=>hn.collection(\"task\").find({category:\"Home\"},{limit:100}).asArray()).then(e=>{console.log(\"Found docs\",e),console.log(\"[MongoDB Stitch] Connected to Stitch\")}).catch(e=>{console.error(e)}),$.get(e)}))}]);","extractedComments":[]}